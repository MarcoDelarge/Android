!function (e, t) {
  "object" == typeof exports && "object" == typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define([], t) : "object" == typeof exports ? exports.cellsNative = t() : e.cellsNative = t();
}(window, function () {
  return function (e) {
    function t(r) {
      if (n[r]) return n[r].exports;
      var i = n[r] = {
        i: r,
        l: !1,
        exports: {}
      };
      return e[r].call(i.exports, i, i.exports, t), i.l = !0, i.exports;
    }

    var n = {};
    return t.m = e, t.c = n, t.d = function (e, n, r) {
      t.o(e, n) || Object.defineProperty(e, n, {
        enumerable: !0,
        get: r
      });
    }, t.r = function (e) {
      "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
        value: "Module"
      }), Object.defineProperty(e, "__esModule", {
        value: !0
      });
    }, t.t = function (e, n) {
      if (1 & n && (e = t(e)), 8 & n) return e;
      if (4 & n && "object" == typeof e && e && e.__esModule) return e;
      var r = Object.create(null);
      if (t.r(r), Object.defineProperty(r, "default", {
        enumerable: !0,
        value: e
      }), 2 & n && "string" != typeof e) for (var i in e) t.d(r, i, function (t) {
        return e[t];
      }.bind(null, i));
      return r;
    }, t.n = function (e) {
      var n = e && e.__esModule ? function () {
        return e.default;
      } : function () {
        return e;
      };
      return t.d(n, "a", n), n;
    }, t.o = function (e, t) {
      return Object.prototype.hasOwnProperty.call(e, t);
    }, t.p = "", t(t.s = 8);
  }([, function (e, t, n) {
    "use strict";

    function r(e) {
      for (var t = e.split("."), n = [], r = 0; r < t.length; r++) {
        for (var i = t[r]; "\\" === i[i.length - 1] && void 0 !== t[r + 1];) i = i.slice(0, -1) + ".", i += t[++r];

        n.push(i);
      }

      return n;
    }

    var i = n(7);
    e.exports = {
      get: function (e, t, n) {
        if (!i(e) || "string" != typeof t) return void 0 === n ? e : n;

        for (var o = r(t), a = 0; a < o.length; a++) {
          if (!Object.prototype.propertyIsEnumerable.call(e, o[a])) return n;

          if (e = e[o[a]], void 0 === e || null === e) {
            if (a !== o.length - 1) return n;
            break;
          }
        }

        return e;
      },
      set: function (e, t, n) {
        if (i(e) && "string" == typeof t) for (var o = r(t), a = 0; a < o.length; a++) {
          var s = o[a];
          i(e[s]) || (e[s] = {}), a === o.length - 1 && (e[s] = n), e = e[s];
        }
      },
      delete: function (e, t) {
        if (i(e) && "string" == typeof t) for (var n = r(t), o = 0; o < n.length; o++) {
          var a = n[o];
          if (o === n.length - 1) return void delete e[a];
          if (e = e[a], !i(e)) return;
        }
      },
      has: function (e, t) {
        if (!i(e) || "string" != typeof t) return !1;

        for (var n = r(t), o = 0; o < n.length; o++) {
          if (!i(e)) return !1;
          if (!(n[o] in e)) return !1;
          e = e[n[o]];
        }

        return !0;
      }
    };
  },, function (e, t, n) {
    "use strict";

    function r(e) {
      console && console.warn && console.warn(e);
    }

    function i() {
      i.init.call(this);
    }

    function o(e) {
      if ("function" != typeof e) throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof e);
    }

    function a(e) {
      return void 0 === e._maxListeners ? i.defaultMaxListeners : e._maxListeners;
    }

    function s(e, t, n, i) {
      var s, u, c;
      if (o(n), u = e._events, void 0 === u ? (u = e._events = Object.create(null), e._eventsCount = 0) : (void 0 !== u.newListener && (e.emit("newListener", t, n.listener ? n.listener : n), u = e._events), c = u[t]), void 0 === c) c = u[t] = n, ++e._eventsCount;else if ("function" == typeof c ? c = u[t] = i ? [n, c] : [c, n] : i ? c.unshift(n) : c.push(n), s = a(e), s > 0 && c.length > s && !c.warned) {
        c.warned = !0;
        var l = new Error("Possible EventEmitter memory leak detected. " + c.length + " " + String(t) + " listeners added. Use emitter.setMaxListeners() to increase limit");
        l.name = "MaxListenersExceededWarning", l.emitter = e, l.type = t, l.count = c.length, r(l);
      }
      return e;
    }

    function u() {
      if (!this.fired) return this.target.removeListener(this.type, this.wrapFn), this.fired = !0, 0 === arguments.length ? this.listener.call(this.target) : this.listener.apply(this.target, arguments);
    }

    function c(e, t, n) {
      var r = {
        fired: !1,
        wrapFn: void 0,
        target: e,
        type: t,
        listener: n
      },
          i = u.bind(r);
      return i.listener = n, r.wrapFn = i, i;
    }

    function l(e, t, n) {
      var r = e._events;
      if (void 0 === r) return [];
      var i = r[t];
      return void 0 === i ? [] : "function" == typeof i ? n ? [i.listener || i] : [i] : n ? v(i) : f(i, i.length);
    }

    function h(e) {
      var t = this._events;

      if (void 0 !== t) {
        var n = t[e];
        if ("function" == typeof n) return 1;
        if (void 0 !== n) return n.length;
      }

      return 0;
    }

    function f(e, t) {
      for (var n = new Array(t), r = 0; r < t; ++r) n[r] = e[r];

      return n;
    }

    function p(e, t) {
      for (; t + 1 < e.length; t++) e[t] = e[t + 1];

      e.pop();
    }

    function v(e) {
      for (var t = new Array(e.length), n = 0; n < t.length; ++n) t[n] = e[n].listener || e[n];

      return t;
    }

    var d,
        g = "object" == typeof Reflect ? Reflect : null,
        y = g && "function" == typeof g.apply ? g.apply : function (e, t, n) {
      return Function.prototype.apply.call(e, t, n);
    };
    d = g && "function" == typeof g.ownKeys ? g.ownKeys : Object.getOwnPropertySymbols ? function (e) {
      return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e));
    } : function (e) {
      return Object.getOwnPropertyNames(e);
    };

    var m = Number.isNaN || function (e) {
      return e !== e;
    };

    e.exports = i, i.EventEmitter = i, i.prototype._events = void 0, i.prototype._eventsCount = 0, i.prototype._maxListeners = void 0;
    var b = 10;
    Object.defineProperty(i, "defaultMaxListeners", {
      enumerable: !0,
      get: function () {
        return b;
      },
      set: function (e) {
        if ("number" != typeof e || e < 0 || m(e)) throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + e + ".");
        b = e;
      }
    }), i.init = function () {
      void 0 !== this._events && this._events !== Object.getPrototypeOf(this)._events || (this._events = Object.create(null), this._eventsCount = 0), this._maxListeners = this._maxListeners || void 0;
    }, i.prototype.setMaxListeners = function (e) {
      if ("number" != typeof e || e < 0 || m(e)) throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + e + ".");
      return this._maxListeners = e, this;
    }, i.prototype.getMaxListeners = function () {
      return a(this);
    }, i.prototype.emit = function (e) {
      for (var t = [], n = 1; n < arguments.length; n++) t.push(arguments[n]);

      var r = "error" === e,
          i = this._events;
      if (void 0 !== i) r = r && void 0 === i.error;else if (!r) return !1;

      if (r) {
        var o;
        if (t.length > 0 && (o = t[0]), o instanceof Error) throw o;
        var a = new Error("Unhandled error." + (o ? " (" + o.message + ")" : ""));
        throw a.context = o, a;
      }

      var s = i[e];
      if (void 0 === s) return !1;
      if ("function" == typeof s) y(s, this, t);else for (var u = s.length, c = f(s, u), n = 0; n < u; ++n) y(c[n], this, t);
      return !0;
    }, i.prototype.addListener = function (e, t) {
      return s(this, e, t, !1);
    }, i.prototype.on = i.prototype.addListener, i.prototype.prependListener = function (e, t) {
      return s(this, e, t, !0);
    }, i.prototype.once = function (e, t) {
      return o(t), this.on(e, c(this, e, t)), this;
    }, i.prototype.prependOnceListener = function (e, t) {
      return o(t), this.prependListener(e, c(this, e, t)), this;
    }, i.prototype.removeListener = function (e, t) {
      var n, r, i, a, s;
      if (o(t), r = this._events, void 0 === r) return this;
      if (n = r[e], void 0 === n) return this;
      if (n === t || n.listener === t) 0 === --this._eventsCount ? this._events = Object.create(null) : (delete r[e], r.removeListener && this.emit("removeListener", e, n.listener || t));else if ("function" != typeof n) {
        for (i = -1, a = n.length - 1; a >= 0; a--) if (n[a] === t || n[a].listener === t) {
          s = n[a].listener, i = a;
          break;
        }

        if (i < 0) return this;
        0 === i ? n.shift() : p(n, i), 1 === n.length && (r[e] = n[0]), void 0 !== r.removeListener && this.emit("removeListener", e, s || t);
      }
      return this;
    }, i.prototype.off = i.prototype.removeListener, i.prototype.removeAllListeners = function (e) {
      var t, n, r;
      if (n = this._events, void 0 === n) return this;
      if (void 0 === n.removeListener) return 0 === arguments.length ? (this._events = Object.create(null), this._eventsCount = 0) : void 0 !== n[e] && (0 === --this._eventsCount ? this._events = Object.create(null) : delete n[e]), this;

      if (0 === arguments.length) {
        var i,
            o = Object.keys(n);

        for (r = 0; r < o.length; ++r) i = o[r], "removeListener" !== i && this.removeAllListeners(i);

        return this.removeAllListeners("removeListener"), this._events = Object.create(null), this._eventsCount = 0, this;
      }

      if (t = n[e], "function" == typeof t) this.removeListener(e, t);else if (void 0 !== t) for (r = t.length - 1; r >= 0; r--) this.removeListener(e, t[r]);
      return this;
    }, i.prototype.listeners = function (e) {
      return l(this, e, !0);
    }, i.prototype.rawListeners = function (e) {
      return l(this, e, !1);
    }, i.listenerCount = function (e, t) {
      return "function" == typeof e.listenerCount ? e.listenerCount(t) : h.call(e, t);
    }, i.prototype.listenerCount = h, i.prototype.eventNames = function () {
      return this._eventsCount > 0 ? d(this._events) : [];
    };
  }, function (e, t, n) {
    (function (e) {
      !function (t, n) {
        e.exports = n();
      }(this, function () {
        "use strict";

        function t(e) {
          var t = this;
          return function () {
            var n = a(regeneratorRuntime.mark(function n(r) {
              var i, o, a, s, u, c;
              return regeneratorRuntime.wrap(function (t) {
                for (;;) switch (t.prev = t.next) {
                  case 0:
                    return i = r.url, o = r.body, a = r.headers, s = {
                      method: e,
                      body: JSON.stringify(o),
                      headers: {
                        "content-type": "application/json"
                      }
                    }, a && Object.keys(a).forEach(function (e) {
                      var t = a[e];
                      s.headers[e] = t;
                    }), t.next = 5, fetch(i, s);

                  case 5:
                    if (u = t.sent, u.ok) {
                      t.next = 8;
                      break;
                    }

                    return t.abrupt("return", null);

                  case 8:
                    return c = {}, t.prev = 9, t.next = 12, u.json();

                  case 12:
                    c = t.sent, t.next = 17;
                    break;

                  case 15:
                    t.prev = 15, t.t0 = t.catch(9);

                  case 17:
                    return t.abrupt("return", c);

                  case 18:
                  case "end":
                    return t.stop();
                }
              }, n, t, [[9, 15]]);
            }));
            return function (e) {
              return n.apply(this, arguments);
            };
          }();
        }

        function n(e) {
          return function (t, n, i) {
            return {
              configurable: !0,
              enumerable: i.enumerable,
              get: function () {
                return Object.defineProperty(this, n, {
                  configurable: !0,
                  enumerable: i.enumerable,
                  value: r(i.value, e)
                }), this[n];
              }
            };
          };
        }

        function r(e) {
          function t() {
            for (var i = this, o = arguments.length, a = Array(o), s = 0; s < o; s++) a[s] = arguments[s];

            t.clear(), r = setTimeout(function () {
              r = null, e.apply(i, a);
            }, n);
          }

          var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : V,
              r = void 0;
          return t.clear = function () {
            r && (clearTimeout(r), r = null);
          }, t;
        }

        function i(e, t, n, r, i) {
          var o = {};
          return Object.keys(r).forEach(function (e) {
            o[e] = r[e];
          }), o.enumerable = !!o.enumerable, o.configurable = !!o.configurable, ("value" in o || o.initializer) && (o.writable = !0), o = n.slice().reverse().reduce(function (n, r) {
            return r(e, t, n) || n;
          }, o), i && void 0 !== o.initializer && (o.value = o.initializer ? o.initializer.call(i) : void 0, o.initializer = void 0), void 0 === o.initializer && (Object.defineProperty(e, t, o), o = null), o;
        }

        var o = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
          return typeof e;
        } : function (e) {
          return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
        },
            a = function (e) {
          return function () {
            var t = e.apply(this, arguments);
            return new Promise(function (e, n) {
              function r(i, o) {
                try {
                  var a = t[i](o),
                      s = a.value;
                } catch (e) {
                  return void n(e);
                }

                return a.done ? void e(s) : Promise.resolve(s).then(function (e) {
                  r("next", e);
                }, function (e) {
                  r("throw", e);
                });
              }

              return r("next");
            });
          };
        },
            s = function (e, t) {
          if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
        },
            u = function () {
          function e(e, t) {
            for (var n = 0; n < t.length; n++) {
              var r = t[n];
              r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
            }
          }

          return function (t, n, r) {
            return n && e(t.prototype, n), r && e(t, r), t;
          };
        }(),
            c = function (e, t, n) {
          return t in e ? Object.defineProperty(e, t, {
            value: n,
            enumerable: !0,
            configurable: !0,
            writable: !0
          }) : e[t] = n, e;
        },
            l = Object.assign || function (e) {
          for (var t = 1; t < arguments.length; t++) {
            var n = arguments[t];

            for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);
          }

          return e;
        },
            h = function (e) {
          if (Array.isArray(e)) {
            for (var t = 0, n = Array(e.length); t < e.length; t++) n[t] = e[t];

            return n;
          }

          return Array.from(e);
        };

        !function (t) {
          function n(e, t, n, r) {
            var o = t && t.prototype instanceof i ? t : i,
                a = Object.create(o.prototype),
                s = new v(r || []);
            return a._invoke = l(e, n, s), a;
          }

          function r(e, t, n) {
            try {
              return {
                type: "normal",
                arg: e.call(t, n)
              };
            } catch (e) {
              return {
                type: "throw",
                arg: e
              };
            }
          }

          function i() {}

          function a() {}

          function s() {}

          function u(e) {
            ["next", "throw", "return"].forEach(function (t) {
              e[t] = function (e) {
                return this._invoke(t, e);
              };
            });
          }

          function c(e) {
            function t(n, i, a, s) {
              var u = r(e[n], e, i);

              if ("throw" !== u.type) {
                var c = u.arg,
                    l = c.value;
                return l && "object" === ("undefined" == typeof l ? "undefined" : o(l)) && b.call(l, "__await") ? Promise.resolve(l.__await).then(function (e) {
                  t("next", e, a, s);
                }, function (e) {
                  t("throw", e, a, s);
                }) : Promise.resolve(l).then(function (e) {
                  c.value = e, a(c);
                }, s);
              }

              s(u.arg);
            }

            function n(e, n) {
              function r() {
                return new Promise(function (r, i) {
                  t(e, n, r, i);
                });
              }

              return i = i ? i.then(r, r) : r();
            }

            var i;
            this._invoke = n;
          }

          function l(e, t, n) {
            var i = T;
            return function (o, a) {
              if (i === A) throw new Error("Generator is already running");

              if (i === O) {
                if ("throw" === o) throw a;
                return g();
              }

              for (n.method = o, n.arg = a;;) {
                var s = n.delegate;

                if (s) {
                  var u = h(s, n);

                  if (u) {
                    if (u === R) continue;
                    return u;
                  }
                }

                if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) {
                  if (i === T) throw i = O, n.arg;
                  n.dispatchException(n.arg);
                } else "return" === n.method && n.abrupt("return", n.arg);
                i = A;
                var c = r(e, t, n);

                if ("normal" === c.type) {
                  if (i = n.done ? O : P, c.arg === R) continue;
                  return {
                    value: c.arg,
                    done: n.done
                  };
                }

                "throw" === c.type && (i = O, n.method = "throw", n.arg = c.arg);
              }
            };
          }

          function h(e, t) {
            var n = e.iterator[t.method];

            if (n === y) {
              if (t.delegate = null, "throw" === t.method) {
                if (e.iterator.return && (t.method = "return", t.arg = y, h(e, t), "throw" === t.method)) return R;
                t.method = "throw", t.arg = new TypeError("The iterator does not provide a 'throw' method");
              }

              return R;
            }

            var i = r(n, e.iterator, t.arg);
            if ("throw" === i.type) return t.method = "throw", t.arg = i.arg, t.delegate = null, R;
            var o = i.arg;
            return o ? o.done ? (t[e.resultName] = o.value, t.next = e.nextLoc, "return" !== t.method && (t.method = "next", t.arg = y), t.delegate = null, R) : o : (t.method = "throw", t.arg = new TypeError("iterator result is not an object"), t.delegate = null, R);
          }

          function f(e) {
            var t = {
              tryLoc: e[0]
            };
            1 in e && (t.catchLoc = e[1]), 2 in e && (t.finallyLoc = e[2], t.afterLoc = e[3]), this.tryEntries.push(t);
          }

          function p(e) {
            var t = e.completion || {};
            t.type = "normal", delete t.arg, e.completion = t;
          }

          function v(e) {
            this.tryEntries = [{
              tryLoc: "root"
            }], e.forEach(f, this), this.reset(!0);
          }

          function d(e) {
            if (e) {
              var t = e[E];
              if (t) return t.call(e);
              if ("function" == typeof e.next) return e;

              if (!isNaN(e.length)) {
                var n = -1,
                    r = function t() {
                  for (; ++n < e.length;) if (b.call(e, n)) return t.value = e[n], t.done = !1, t;

                  return t.value = y, t.done = !0, t;
                };

                return r.next = r;
              }
            }

            return {
              next: g
            };
          }

          function g() {
            return {
              value: y,
              done: !0
            };
          }

          var y,
              m = Object.prototype,
              b = m.hasOwnProperty,
              _ = "function" == typeof Symbol ? Symbol : {},
              E = _.iterator || "@@iterator",
              k = _.asyncIterator || "@@asyncIterator",
              C = _.toStringTag || "@@toStringTag",
              w = "object" === o(e),
              S = t.regeneratorRuntime;

          if (S) return void (w && (e.exports = S));
          S = t.regeneratorRuntime = w ? e.exports : {}, S.wrap = n;
          var T = "suspendedStart",
              P = "suspendedYield",
              A = "executing",
              O = "completed",
              R = {},
              N = {};

          N[E] = function () {
            return this;
          };

          var I = Object.getPrototypeOf,
              x = I && I(I(d([])));
          x && x !== m && b.call(x, E) && (N = x);
          var M = s.prototype = i.prototype = Object.create(N);
          a.prototype = M.constructor = s, s.constructor = a, s[C] = a.displayName = "GeneratorFunction", S.isGeneratorFunction = function (e) {
            var t = "function" == typeof e && e.constructor;
            return !!t && (t === a || "GeneratorFunction" === (t.displayName || t.name));
          }, S.mark = function (e) {
            return Object.setPrototypeOf ? Object.setPrototypeOf(e, s) : (e.__proto__ = s, C in e || (e[C] = "GeneratorFunction")), e.prototype = Object.create(M), e;
          }, S.awrap = function (e) {
            return {
              __await: e
            };
          }, u(c.prototype), c.prototype[k] = function () {
            return this;
          }, S.AsyncIterator = c, S.async = function (e, t, r, i) {
            var o = new c(n(e, t, r, i));
            return S.isGeneratorFunction(t) ? o : o.next().then(function (e) {
              return e.done ? e.value : o.next();
            });
          }, u(M), M[C] = "Generator", M[E] = function () {
            return this;
          }, M.toString = function () {
            return "[object Generator]";
          }, S.keys = function (e) {
            var t = [];

            for (var n in e) t.push(n);

            return t.reverse(), function n() {
              for (; t.length;) {
                var r = t.pop();
                if (r in e) return n.value = r, n.done = !1, n;
              }

              return n.done = !0, n;
            };
          }, S.values = d, v.prototype = {
            constructor: v,
            reset: function (e) {
              if (this.prev = 0, this.next = 0, this.sent = this._sent = y, this.done = !1, this.delegate = null, this.method = "next", this.arg = y, this.tryEntries.forEach(p), !e) for (var t in this) "t" === t.charAt(0) && b.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = y);
            },
            stop: function () {
              this.done = !0;
              var e = this.tryEntries[0],
                  t = e.completion;
              if ("throw" === t.type) throw t.arg;
              return this.rval;
            },
            dispatchException: function (e) {
              function t(t, r) {
                return o.type = "throw", o.arg = e, n.next = t, r && (n.method = "next", n.arg = y), !!r;
              }

              if (this.done) throw e;

              for (var n = this, r = this.tryEntries.length - 1; r >= 0; --r) {
                var i = this.tryEntries[r],
                    o = i.completion;
                if ("root" === i.tryLoc) return t("end");

                if (i.tryLoc <= this.prev) {
                  var a = b.call(i, "catchLoc"),
                      s = b.call(i, "finallyLoc");

                  if (a && s) {
                    if (this.prev < i.catchLoc) return t(i.catchLoc, !0);
                    if (this.prev < i.finallyLoc) return t(i.finallyLoc);
                  } else if (a) {
                    if (this.prev < i.catchLoc) return t(i.catchLoc, !0);
                  } else {
                    if (!s) throw new Error("try statement without catch or finally");
                    if (this.prev < i.finallyLoc) return t(i.finallyLoc);
                  }
                }
              }
            },
            abrupt: function (e, t) {
              for (var n = this.tryEntries.length - 1; n >= 0; --n) {
                var r = this.tryEntries[n];

                if (r.tryLoc <= this.prev && b.call(r, "finallyLoc") && this.prev < r.finallyLoc) {
                  var i = r;
                  break;
                }
              }

              i && ("break" === e || "continue" === e) && i.tryLoc <= t && t <= i.finallyLoc && (i = null);
              var o = i ? i.completion : {};
              return o.type = e, o.arg = t, i ? (this.method = "next", this.next = i.finallyLoc, R) : this.complete(o);
            },
            complete: function (e, t) {
              if ("throw" === e.type) throw e.arg;
              return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg, this.method = "return", this.next = "end") : "normal" === e.type && t && (this.next = t), R;
            },
            finish: function (e) {
              for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                var n = this.tryEntries[t];
                if (n.finallyLoc === e) return this.complete(n.completion, n.afterLoc), p(n), R;
              }
            },
            catch: function (e) {
              for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                var n = this.tryEntries[t];

                if (n.tryLoc === e) {
                  var r = n.completion;

                  if ("throw" === r.type) {
                    var i = r.arg;
                    p(n);
                  }

                  return i;
                }
              }

              throw new Error("illegal catch attempt");
            },
            delegateYield: function (e, t, n) {
              return this.delegate = {
                iterator: d(e),
                resultName: t,
                nextLoc: n
              }, "next" === this.method && (this.arg = y), R;
            }
          };
        }(function () {
          return this;
        }() || Function("return this")());

        var f,
            p,
            v = ["consumerId", "policy", "mrId", "nameSpace", "region", "dnsTld", "tsec2JWTEndpoint"],
            d = {
          DEFAULT_ADAPTER_IDENTIFIER: "application",
          DEFAULT_ADAPTER_VERSION: "v1",
          REQUIRED_FIELDS: v,
          ALLOWED_FIELDS: [].concat(v, ["identifier", "version"])
        },
            g = function (e) {
          return function (t, n, r) {
            return "https://" + e + "." + [t, n].filter(Boolean).join(".") + "/" + r;
          };
        },
            y = {
          HOST: g("rho"),
          ALLOWED_FIELDS: ["mrId", "spanId", "startDate", "finishDate", "name", "parentSpan", "traceId", "properties", "duration", "recordDate"],
          REQUIRED_FIELDS: []
        },
            m = {
          HOST: g("omega"),
          DEFAULT_LOG_LEVEL: "DEBUG",
          ALLOWED_FIELDS: ["mrId", "spanId", "traceId", "creationDate", "level", "message", "properties"],
          MAXIMUM_BULK_SIZE: 1e3,
          REQUIRED_FIELDS: []
        },
            b = {
          SEMAAS: d,
          RHO: y,
          OMEGA: m
        },
            _ = function (e) {
          var t = "_",
              n = {},
              r = function e(r, i) {
            Object.keys(r).forEach(function (a) {
              var s = r[a],
                  u = i ? i + t + a : a;
              s && "object" === ("undefined" == typeof s ? "undefined" : o(s)) ? e(s, u) : n[u] = s;
            });
          };

          return r(e), n;
        },
            E = function (e, t) {
          var n = l({}, e);
          return Object.keys(n).forEach(function (e) {
            t.includes(e) || delete n[e];
          }), n.properties && (n.properties = _(n.properties)), n;
        },
            k = function (e) {
          return function (t) {
            return Object.prototype.hasOwnProperty.call(e, t) && !!e[t];
          };
        },
            C = function (e, t) {
          return t.every(k(e));
        },
            w = function (e, t) {
          return e.reduce(function (e, n) {
            var r = t instanceof Function ? t(n) : n[t],
                i = e.find(function (e) {
              return e && e.key === r;
            });
            return i ? i.values.push(n) : e.push({
              key: r,
              values: [n]
            }), e;
          }, []);
        },
            S = function () {
          for (var e = [], t = "0123456789abcdef", n = 0; n < 36; n++) e[n] = t.substr(Math.floor(16 * Math.random()), 1);

          e[14] = "4", e[19] = t.substr(3 & e[19] | 8, 1), e[8] = e[13] = e[18] = e[23] = "-";
          var r = e.join("");
          return r;
        },
            T = {
          dotify: _,
          sanitizeObj: E,
          hasProperty: k,
          hasProperties: C,
          groupBy: w,
          createUUID: S
        },
            P = b.OMEGA,
            A = P.DEFAULT_LOG_LEVEL,
            O = P.ALLOWED_FIELDS,
            R = T.sanitizeObj,
            N = function () {
          function e(t) {
            s(this, e), this.mrId = t;
          }

          return u(e, [{
            key: "createLog",
            value: function (e) {
              var t = this.mrId,
                  n = R(e, O),
                  r = {
                mrId: t,
                creationDate: 1e6 * Date.now(),
                level: A
              };
              return l({}, r, n);
            }
          }]), e;
        }(),
            I = b.RHO,
            x = I.ALLOWED_FIELDS,
            M = T.sanitizeObj,
            L = T.createUUID,
            j = function () {
          function e(t) {
            s(this, e), this.spanId = null, this.initialize(t);
          }

          return u(e, [{
            key: "initialize",
            value: function (e) {
              var t = this;
              x.forEach(function (n) {
                e[n] && (t[n] = e[n]);
              }), this.spanId = L(), this.start();
            }
          }, {
            key: "start",
            value: function () {
              this.startDate = 1e6 * Date.now();
            }
          }, {
            key: "finish",
            value: function () {
              this.finishDate = 1e6 * Date.now();
            }
          }]), e;
        }(),
            D = function () {
          function e(t) {
            s(this, e), this.mrId = t;
          }

          return u(e, [{
            key: "createUUID",
            value: function () {
              return L();
            }
          }, {
            key: "createSpan",
            value: function (e, t) {
              var n = this.mrId,
                  r = e.mrId,
                  i = void 0 === r ? n : r,
                  o = e.parentSpan,
                  a = this.getParentSpan(o, i, t),
                  s = l({}, e, {
                mrId: i,
                parentSpan: a
              }),
                  u = new j(s);
              return u;
            }
          }, {
            key: "buildSpans",
            value: function (e) {
              var t = Array.isArray(e) ? [].concat(h(e)) : [e];
              return t.map(function (e) {
                return M(e, x);
              });
            }
          }, {
            key: "getParentSpan",
            value: function (e, t, n) {
              return e ? [n, t, "spans", e].join("/") : null;
            }
          }]), e;
        }(),
            B = {
          Omega: N,
          Rho: D
        },
            U = {
          GET: t("get"),
          POST: t("post")
        },
            F = function () {
          function e() {
            s(this, e);
          }

          return u(e, null, [{
            key: "get",
            value: function () {
              function e(e, n) {
                return t.apply(this, arguments);
              }

              var t = a(regeneratorRuntime.mark(function e(t, n) {
                return regeneratorRuntime.wrap(function (e) {
                  for (;;) switch (e.prev = e.next) {
                    case 0:
                      return e.abrupt("return", U.GET({
                        url: t,
                        headers: n
                      }));

                    case 1:
                    case "end":
                      return e.stop();
                  }
                }, e, this);
              }));
              return e;
            }()
          }, {
            key: "post",
            value: function () {
              function e(e, n, r) {
                return t.apply(this, arguments);
              }

              var t = a(regeneratorRuntime.mark(function e(t, n, r) {
                return regeneratorRuntime.wrap(function (e) {
                  for (;;) switch (e.prev = e.next) {
                    case 0:
                      return e.abrupt("return", U.POST({
                        url: t,
                        body: n,
                        headers: r
                      }));

                    case 1:
                    case "end":
                      return e.stop();
                  }
                }, e, this);
              }));
              return e;
            }()
          }]), e;
        }(),
            V = 500,
            H = function (e) {
          return function (t, n, r) {
            var i = r.value;
            return e.slice().reverse().forEach(function (e) {
              return i = e(i);
            }), l({}, r, {
              value: i
            });
          };
        },
            G = {
          outerDecorator: n,
          decorate: H
        },
            q = T.groupBy,
            W = 1e3,
            z = function () {
          function e(t) {
            s(this, e), this.items = [], this.identifier = t;
          }

          return u(e, [{
            key: "add",
            value: function (e, t) {
              var n = this,
                  r = Array.isArray(t) ? [].concat(h(t)) : [t];
              r.forEach(function (t) {
                var r = {
                  data: t,
                  endpoint: e
                };
                n.items.push(r);
              });
            }
          }, {
            key: "dump",
            value: function () {
              if (!this.any()) return null;
              var e = q(this.items, "endpoint"),
                  t = e[0].values,
                  n = t.slice(0, W),
                  r = this.items.filter(function (e) {
                return !n.includes(e);
              });
              return console.log("Dumping " + n.length + " items from " + this.identifier + " queue (" + this.items.length + ")..."), this.items = r, n;
            }
          }, {
            key: "any",
            value: function () {
              return null !== this.items && this.items.length > 0;
            }
          }]), e;
        }(),
            K = B.Omega,
            Y = B.Rho,
            J = b.SEMAAS,
            Q = J.REQUIRED_FIELDS,
            $ = J.ALLOWED_FIELDS,
            X = J.DEFAULT_ADAPTER_IDENTIFIER,
            Z = J.DEFAULT_ADAPTER_VERSION,
            ee = b.OMEGA.HOST,
            te = b.RHO.HOST,
            ne = T.hasProperties,
            re = G.outerDecorator,
            ie = (f = re(5e3), p = function () {
          function e(t) {
            s(this, e), this.nameSpace = null, this.identifier = X, this.mrId = null, this.consumerId = null, this.policy = null, this.region = null, this.dnsTld = null, this.version = Z, this.tsec2JWTEndpoint = null, this.apiKey = null, this.omega = null, this.rho = null, this.queue = null, this.setup(t);
          }

          return u(e, [{
            key: "setup",
            value: function (e) {
              if (!e || !this.validateConfig(e, Q)) throw new Error("Invalid setup for SEMaaS adapter (" + this.identifier + "). Required fields: " + Q.join(", ") + ".");
              this.initialize(e);
            }
          }, {
            key: "validateConfig",
            value: function (e, t) {
              return ne(e, t);
            }
          }, {
            key: "initialize",
            value: function (e) {
              var t = this;
              $.forEach(function (n) {
                e[n] && (t[n] = e[n]);
              });
              var n = this.nameSpace,
                  r = this.identifier,
                  i = this.mrId,
                  o = this.tsec2JWTEndpoint,
                  a = this.region,
                  s = this.dnsTld,
                  u = this.version;
              this.omega = new K(i), this.rho = new Y(i), this.queue = new z(r), console.info("SEMaaS adapter for " + a + " (TSEC: " + o + ") [" + s + " - " + u + "] (" + r + " - ns: " + n + ", mrId: " + i + ") successfully initialized.");
            }
          }, {
            key: "log",
            value: function (e) {
              var t = this.omega.createLog(e);
              this.enqueue(this.omegaEndpoint, t);
            }
          }, {
            key: "ingest",
            value: function (e) {
              var t = this.rho.buildSpans(e);
              this.enqueue(this.rhoEndpoint, t);
            }
          }, {
            key: "createSpan",
            value: function (e) {
              var t = this.rho.createSpan(e, this.prefixForChildSpan);
              return t;
            }
          }, {
            key: "createUUID",
            value: function () {
              var e = this.rho.createUUID();
              return e;
            }
          }, {
            key: "send",
            value: function () {
              function e(e, n, r) {
                return t.apply(this, arguments);
              }

              var t = a(regeneratorRuntime.mark(function e(t, n, r) {
                var i;
                return regeneratorRuntime.wrap(function (e) {
                  for (;;) switch (e.prev = e.next) {
                    case 0:
                      return i = void 0, e.prev = 1, e.next = 4, F.post(t, n, r);

                    case 4:
                      i = e.sent, e.next = 9;
                      break;

                    case 7:
                      e.prev = 7, e.t0 = e.catch(1);

                    case 9:
                      return i || (console.log("There was a problem while sending data to SEMaaS - operation will be queued."), this.enqueue(t, n)), e.abrupt("return", i);

                    case 11:
                    case "end":
                      return e.stop();
                  }
                }, e, this, [[1, 7]]);
              }));
              return e;
            }()
          }, {
            key: "enqueue",
            value: function (e, t) {
              this.queue.add(e, t), this.flush();
            }
          }, {
            key: "flush",
            value: function () {
              function e() {
                return t.apply(this, arguments);
              }

              var t = a(regeneratorRuntime.mark(function e() {
                var t,
                    n,
                    r,
                    i,
                    o,
                    a,
                    s = this;
                return regeneratorRuntime.wrap(function (e) {
                  for (;;) switch (e.prev = e.next) {
                    case 0:
                      return e.next = 2, this.ensureValidApiKey();

                    case 2:
                      if (t = e.sent) {
                        e.next = 6;
                        break;
                      }

                      return console.log("No valid API Key for SEMaaS adapter (" + this.identifier + ") - aborting operation"), e.abrupt("return");

                    case 6:
                      if (n = this.queue.dump()) {
                        e.next = 10;
                        break;
                      }

                      return console.log("Empty queue for SEMaaS adapter (" + this.identifier + ")"), e.abrupt("return");

                    case 10:
                      r = n[0].endpoint, i = this.apiKey, console.log("Sending queued batch " + r + " - " + i), o = n.map(function (e) {
                        return e.data;
                      }), a = this.buildApiHeaders(), this.send(r, o, a).then(function () {
                        return s.queue.any() && s.flush();
                      });

                    case 16:
                    case "end":
                      return e.stop();
                  }
                }, e, this);
              }));
              return e;
            }()
          }, {
            key: "ensureValidApiKey",
            value: function () {
              function e() {
                return t.apply(this, arguments);
              }

              var t = a(regeneratorRuntime.mark(function e() {
                return regeneratorRuntime.wrap(function (e) {
                  for (;;) switch (e.prev = e.next) {
                    case 0:
                      if (!this.hasApiKey) {
                        e.next = 5;
                        break;
                      }

                      return console.log("ApiKey OK -> next()"), e.abrupt("return", !0);

                    case 5:
                      if (!this.hasCredentials) {
                        e.next = 8;
                        break;
                      }

                      return console.log("ApiKey KO, Credentials OK -> getApiKey()"), e.abrupt("return", this.getApiKey());

                    case 8:
                      return console.log("No ApiKey && No Credentials -> KO"), e.abrupt("return", !1);

                    case 10:
                    case "end":
                      return e.stop();
                  }
                }, e, this);
              }));
              return e;
            }()
          }, {
            key: "buildApiHeaders",
            value: function () {
              var e = void 0,
                  t = void 0;

              switch (this.version.toLowerCase()) {
                case "v1":
                  e = "Authorization", t = "Bearer " + this.apiKey;
                  break;

                default:
                  e = "Api-Key", t = "jwt " + this.apiKey;
              }

              return c({}, e, t);
            }
          }, {
            key: "getApiKey",
            value: function () {
              function e() {
                return t.apply(this, arguments);
              }

              var t = a(regeneratorRuntime.mark(function e() {
                var t, n, r, i, o, a, s;
                return regeneratorRuntime.wrap(function (e) {
                  for (;;) switch (e.prev = e.next) {
                    case 0:
                      return t = this.consumerId, n = this.policy, r = this.tsec2JWTEndpoint, i = {
                        "x-consumer-id": t,
                        "x-tsec-token": window.sessionStorage.getItem("tsec"),
                        "x-validation-policy": n
                      }, o = r, e.next = 5, F.get(o, i);

                    case 5:
                      if (a = e.sent) {
                        e.next = 8;
                        break;
                      }

                      return e.abrupt("return", null);

                    case 8:
                      return s = a.accessToken, this.apiKey = s, e.abrupt("return", s);

                    case 11:
                    case "end":
                      return e.stop();
                  }
                }, e, this);
              }));
              return e;
            }()
          }, {
            key: "getEndpoint",
            value: function (e) {
              var t = this.region,
                  n = this.dnsTld,
                  r = this.version;
              return e(t, n, r);
            }
          }, {
            key: "hasApiKey",
            get: function () {
              return !!this.apiKey;
            }
          }, {
            key: "hasCredentials",
            get: function () {
              return !!this.consumerId && !!this.policy && !!this.tsec;
            }
          }, {
            key: "initialized",
            get: function () {
              return !!this.omega && !!this.rho;
            }
          }, {
            key: "omegaEndpoint",
            get: function () {
              var e = this.nameSpace,
                  t = this.getEndpoint(ee);
              return t + "/ns/" + e + "/logs";
            }
          }, {
            key: "rhoEndpoint",
            get: function () {
              var e = this.nameSpace,
                  t = this.getEndpoint(te);
              return t + "/ns/" + e + "/spans";
            }
          }, {
            key: "prefixForChildSpan",
            get: function () {
              return "ns/" + this.nameSpace + "/mrs";
            }
          }, {
            key: "tsec",
            get: function () {
              return window.sessionStorage.getItem("tsec");
            }
          }]), e;
        }(), i(p.prototype, "flush", [f], Object.getOwnPropertyDescriptor(p.prototype, "flush"), p.prototype), p);

        return ie;
      });
    }).call(this, n(6)(e));
  }, function (e, t) {
    function n(e, t) {
      var n;

      if ("undefined" == typeof Symbol || null == e[Symbol.iterator]) {
        if (Array.isArray(e) || (n = r(e)) || t && e && "number" == typeof e.length) {
          n && (e = n);

          var i = 0,
              o = function () {};

          return {
            s: o,
            n: function () {
              return i >= e.length ? {
                done: !0
              } : {
                done: !1,
                value: e[i++]
              };
            },
            e: function (e) {
              throw e;
            },
            f: o
          };
        }

        throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
      }

      var a,
          s = !0,
          u = !1;
      return {
        s: function () {
          n = e[Symbol.iterator]();
        },
        n: function () {
          var e = n.next();
          return s = e.done, e;
        },
        e: function (e) {
          u = !0, a = e;
        },
        f: function () {
          try {
            s || null == n.return || n.return();
          } finally {
            if (u) throw a;
          }
        }
      };
    }

    function r(e, t) {
      if (e) {
        if ("string" == typeof e) return i(e, t);
        var n = Object.prototype.toString.call(e).slice(8, -1);
        return "Object" === n && e.constructor && (n = e.constructor.name), "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? i(e, t) : void 0;
      }
    }

    function i(e, t) {
      (null == t || t > e.length) && (t = e.length);

      for (var n = 0, r = new Array(t); n < t; n++) r[n] = e[n];

      return r;
    }

    Object.values || (Object.values = function (e) {
      return Object.keys(e).map(function (t) {
        return e[t];
      });
    }), Object.entries || (Object.entries = function (e) {
      for (var t = Object.keys(e), n = t.length, r = new Array(n); n--;) r[n] = [t[n], e[t[n]]];

      return r;
    }), String.prototype.endsWith || (String.prototype.endsWith = function (e, t) {
      var n = this.toString();
      ("number" != typeof t || !isFinite(t) || Math.floor(t) !== t || t > n.length) && (t = n.length), t -= e.length;
      var r = n.indexOf(e, t);
      return r !== -1 && r === t;
    }), Array.prototype.flat || (Array.prototype.flat = function (e) {
      var t = [];
      return function e(r, i) {
        var o,
            a = n(r);

        try {
          for (a.s(); !(o = a.n()).done;) {
            var s = o.value;
            Array.isArray(s) && i > 0 ? e(s, i - 1) : t.push(s);
          }
        } catch (e) {
          a.e(e);
        } finally {
          a.f();
        }
      }(this, Math.floor(e) || 1), t;
    });
  }, function (e, t) {
    e.exports = function (e) {
      return e.webpackPolyfill || (e.deprecate = function () {}, e.paths = [], e.children || (e.children = []), Object.defineProperty(e, "loaded", {
        enumerable: !0,
        get: function () {
          return e.l;
        }
      }), Object.defineProperty(e, "id", {
        enumerable: !0,
        get: function () {
          return e.i;
        }
      }), e.webpackPolyfill = 1), e;
    };
  }, function (e, t, n) {
    "use strict";

    e.exports = function (e) {
      var t = typeof e;
      return null !== e && ("object" === t || "function" === t);
    };
  }, function (e, t, n) {
    "use strict";

    function r(e) {
      "@babel/helpers - typeof";

      return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
        return typeof e;
      } : function (e) {
        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
      })(e);
    }

    function i(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function o(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function a(e, t, n) {
      return t && o(e.prototype, t), n && o(e, n), e;
    }

    function s(e, t) {
      if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
      e.prototype = Object.create(t && t.prototype, {
        constructor: {
          value: e,
          writable: !0,
          configurable: !0
        }
      }), t && u(e, t);
    }

    function u(e, t) {
      return (u = Object.setPrototypeOf || function (e, t) {
        return e.__proto__ = t, e;
      })(e, t);
    }

    function c(e) {
      var t = f();
      return function () {
        var n,
            r = p(e);

        if (t) {
          var i = p(this).constructor;
          n = Reflect.construct(r, arguments, i);
        } else n = r.apply(this, arguments);

        return l(this, n);
      };
    }

    function l(e, t) {
      return !t || "object" !== r(t) && "function" != typeof t ? h(e) : t;
    }

    function h(e) {
      if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return e;
    }

    function f() {
      if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
      if (Reflect.construct.sham) return !1;
      if ("function" == typeof Proxy) return !0;

      try {
        return Date.prototype.toString.call(Reflect.construct(Date, [], function () {})), !0;
      } catch (e) {
        return !1;
      }
    }

    function p(e) {
      return (p = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {
        return e.__proto__ || Object.getPrototypeOf(e);
      })(e);
    }

    function v() {
      return v = Object.assign || function (e) {
        for (var t = 1; t < arguments.length; t++) {
          var n = arguments[t];

          for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);
        }

        return e;
      }, v.apply(this, arguments);
    }

    function d(e) {
      "@babel/helpers - typeof";

      return (d = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
        return typeof e;
      } : function (e) {
        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
      })(e);
    }

    function g(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function y(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function m(e, t, n) {
      return t && y(e.prototype, t), n && y(e, n), e;
    }

    function b() {
      return b = Object.assign || function (e) {
        for (var t = 1; t < arguments.length; t++) {
          var n = arguments[t];

          for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);
        }

        return e;
      }, b.apply(this, arguments);
    }

    function _(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function E(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function k(e, t, n) {
      return t && E(e.prototype, t), n && E(e, n), e;
    }

    function C(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function w(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function S(e, t, n) {
      return t && w(e.prototype, t), n && w(e, n), e;
    }

    function T(e, t) {
      return N(e) || R(e, t) || A(e, t) || P();
    }

    function P() {
      throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }

    function A(e, t) {
      if (e) {
        if ("string" == typeof e) return O(e, t);
        var n = Object.prototype.toString.call(e).slice(8, -1);
        return "Object" === n && e.constructor && (n = e.constructor.name), "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? O(e, t) : void 0;
      }
    }

    function O(e, t) {
      (null == t || t > e.length) && (t = e.length);

      for (var n = 0, r = new Array(t); n < t; n++) r[n] = e[n];

      return r;
    }

    function R(e, t) {
      if ("undefined" != typeof Symbol && Symbol.iterator in Object(e)) {
        var n = [],
            r = !0,
            i = !1,
            o = void 0;

        try {
          for (var a, s = e[Symbol.iterator](); !(r = (a = s.next()).done) && (n.push(a.value), !t || n.length !== t); r = !0);
        } catch (e) {
          i = !0, o = e;
        } finally {
          try {
            r || null == s.return || s.return();
          } finally {
            if (i) throw o;
          }
        }

        return n;
      }
    }

    function N(e) {
      if (Array.isArray(e)) return e;
    }

    function I() {
      return I = Object.assign || function (e) {
        for (var t = 1; t < arguments.length; t++) {
          var n = arguments[t];

          for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);
        }

        return e;
      }, I.apply(this, arguments);
    }

    function x(e, t) {
      return B(e) || D(e, t) || L(e, t) || M();
    }

    function M() {
      throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }

    function L(e, t) {
      if (e) {
        if ("string" == typeof e) return j(e, t);
        var n = Object.prototype.toString.call(e).slice(8, -1);
        return "Object" === n && e.constructor && (n = e.constructor.name), "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? j(e, t) : void 0;
      }
    }

    function j(e, t) {
      (null == t || t > e.length) && (t = e.length);

      for (var n = 0, r = new Array(t); n < t; n++) r[n] = e[n];

      return r;
    }

    function D(e, t) {
      if ("undefined" != typeof Symbol && Symbol.iterator in Object(e)) {
        var n = [],
            r = !0,
            i = !1,
            o = void 0;

        try {
          for (var a, s = e[Symbol.iterator](); !(r = (a = s.next()).done) && (n.push(a.value), !t || n.length !== t); r = !0);
        } catch (e) {
          i = !0, o = e;
        } finally {
          try {
            r || null == s.return || s.return();
          } finally {
            if (i) throw o;
          }
        }

        return n;
      }
    }

    function B(e) {
      if (Array.isArray(e)) return e;
    }

    function U(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function F(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function V(e, t, n) {
      return t && F(e.prototype, t), n && F(e, n), e;
    }

    function H() {
      return H = Object.assign || function (e) {
        for (var t = 1; t < arguments.length; t++) {
          var n = arguments[t];

          for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);
        }

        return e;
      }, H.apply(this, arguments);
    }

    function G(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function q(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function W(e, t, n) {
      return t && q(e.prototype, t), n && q(e, n), e;
    }

    function z(e, t) {
      function n() {
        this.constructor = e;
      }

      vo(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n());
    }

    function K(e) {
      return "function" == typeof e;
    }

    function Y(e) {
      setTimeout(function () {
        throw e;
      }, 0);
    }

    function J(e) {
      return null !== e && "object" == typeof e;
    }

    function Q(e) {
      return e.reduce(function (e, t) {
        return e.concat(t instanceof Eo ? t.errors : t);
      }, []);
    }

    function $(e) {
      for (; e;) {
        var t = e,
            n = t.closed,
            r = t.destination,
            i = t.isStopped;
        if (n || i) return !1;
        e = r && r instanceof wo ? r : null;
      }

      return !0;
    }

    function X(e, t, n) {
      if (e) {
        if (e instanceof wo) return e;
        if (e[Co]) return e[Co]();
      }

      return e || t || n ? new wo(e, t, n) : new wo(mo);
    }

    function Z(e) {
      return e;
    }

    function ee(e) {
      return 0 === e.length ? Z : 1 === e.length ? e[0] : function (t) {
        return e.reduce(function (e, t) {
          return t(e);
        }, t);
      };
    }

    function te(e) {
      if (e || (e = yo.Promise || Promise), !e) throw new Error("no Promise impl found");
      return e;
    }

    function ne(e, t) {
      return function (n) {
        if ("function" != typeof e) throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");
        return n.lift(new Ao(e, t));
      };
    }

    function re(e, t, n, r) {
      return K(n) && (r = n, n = void 0), r ? re(e, t, n).pipe(ne(function (e) {
        return bo(e) ? r.apply(void 0, e) : r(e);
      })) : new Po(function (r) {
        function i(e) {
          arguments.length > 1 ? r.next(Array.prototype.slice.call(arguments)) : r.next(e);
        }

        ie(e, t, i, r, n);
      });
    }

    function ie(e, t, n, r, i) {
      var o;

      if (se(e)) {
        var a = e;
        e.addEventListener(t, n, i), o = function () {
          return a.removeEventListener(t, n, i);
        };
      } else if (ae(e)) {
        var s = e;
        e.on(t, n), o = function () {
          return s.off(t, n);
        };
      } else if (oe(e)) {
        var u = e;
        e.addListener(t, n), o = function () {
          return u.removeListener(t, n);
        };
      } else {
        if (!e || !e.length) throw new TypeError("Invalid event target");

        for (var c = 0, l = e.length; c < l; c++) ie(e[c], t, n, r, i);
      }

      r.add(o);
    }

    function oe(e) {
      return e && "function" == typeof e.addListener && "function" == typeof e.removeListener;
    }

    function ae(e) {
      return e && "function" == typeof e.on && "function" == typeof e.off;
    }

    function se(e) {
      return e && "function" == typeof e.addEventListener && "function" == typeof e.removeEventListener;
    }

    function ue(e, t) {
      return function (n) {
        return n.lift(new Ro(e, t));
      };
    }

    function ce(e) {
      return e ? le(e) : zo;
    }

    function le(e) {
      return new Po(function (t) {
        return e.schedule(function () {
          return t.complete();
        });
      });
    }

    function he(e) {
      return e && "function" == typeof e.schedule;
    }

    function fe(e, t) {
      return new Po(function (n) {
        var r = new ko(),
            i = 0;
        return r.add(t.schedule(function () {
          return i === e.length ? void n.complete() : (n.next(e[i++]), void (n.closed || r.add(this.schedule())));
        })), r;
      });
    }

    function pe(e, t) {
      return t ? fe(e, t) : new Po(Ko(e));
    }

    function ve() {
      for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];

      var n = e[e.length - 1];
      return he(n) ? (e.pop(), fe(e, n)) : pe(e);
    }

    function de(e, t) {
      return new Po(t ? function (n) {
        return t.schedule(ge, 0, {
          error: e,
          subscriber: n
        });
      } : function (t) {
        return t.error(e);
      });
    }

    function ge(e) {
      var t = e.error,
          n = e.subscriber;
      n.error(t);
    }

    function ye() {
      var e = new Date().getTime(),
          t = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (t) {
        var n = (e + 16 * Math.random()) % 16 | 0;
        return ("x" == t ? n : 3 & n | 8).toString(16);
      });
      return t;
    }

    function me(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function be(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function _e(e, t, n) {
      return t && be(e.prototype, t), n && be(e, n), e;
    }

    function Ee(e) {
      "@babel/helpers - typeof";

      return (Ee = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
        return typeof e;
      } : function (e) {
        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
      })(e);
    }

    function ke(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function Ce(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function we(e, t, n) {
      return t && Ce(e.prototype, t), n && Ce(e, n), e;
    }

    function Se(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function Te(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function Pe(e, t, n) {
      return t && Te(e.prototype, t), n && Te(e, n), e;
    }

    function Ae(e) {
      "@babel/helpers - typeof";

      return (Ae = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
        return typeof e;
      } : function (e) {
        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
      })(e);
    }

    function Oe(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function Re(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function Ne(e, t, n) {
      return t && Re(e.prototype, t), n && Re(e, n), e;
    }

    function Ie(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function xe(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function Me(e, t, n) {
      return t && xe(e.prototype, t), n && xe(e, n), e;
    }

    function Le(e, t, n) {
      return t in e ? Object.defineProperty(e, t, {
        value: n,
        enumerable: !0,
        configurable: !0,
        writable: !0
      }) : e[t] = n, e;
    }

    function je(e, t) {
      return Ve(e) || Fe(e, t) || Be(e, t) || De();
    }

    function De() {
      throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }

    function Be(e, t) {
      if (e) {
        if ("string" == typeof e) return Ue(e, t);
        var n = Object.prototype.toString.call(e).slice(8, -1);
        return "Object" === n && e.constructor && (n = e.constructor.name), "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? Ue(e, t) : void 0;
      }
    }

    function Ue(e, t) {
      (null == t || t > e.length) && (t = e.length);

      for (var n = 0, r = new Array(t); n < t; n++) r[n] = e[n];

      return r;
    }

    function Fe(e, t) {
      if ("undefined" != typeof Symbol && Symbol.iterator in Object(e)) {
        var n = [],
            r = !0,
            i = !1,
            o = void 0;

        try {
          for (var a, s = e[Symbol.iterator](); !(r = (a = s.next()).done) && (n.push(a.value), !t || n.length !== t); r = !0);
        } catch (e) {
          i = !0, o = e;
        } finally {
          try {
            r || null == s.return || s.return();
          } finally {
            if (i) throw o;
          }
        }

        return n;
      }
    }

    function Ve(e) {
      if (Array.isArray(e)) return e;
    }

    function He() {
      return He = Object.assign || function (e) {
        for (var t = 1; t < arguments.length; t++) {
          var n = arguments[t];

          for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);
        }

        return e;
      }, He.apply(this, arguments);
    }

    function Ge(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function qe(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function We(e, t, n) {
      return t && qe(e.prototype, t), n && qe(e, n), e;
    }

    function ze(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function Ke(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function Ye(e, t, n) {
      return t && Ke(e.prototype, t), n && Ke(e, n), e;
    }

    function Je() {
      return Je = Object.assign || function (e) {
        for (var t = 1; t < arguments.length; t++) {
          var n = arguments[t];

          for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);
        }

        return e;
      }, Je.apply(this, arguments);
    }

    function Qe(e, t) {
      return tt(e) || et(e, t) || Xe(e, t) || $e();
    }

    function $e() {
      throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }

    function Xe(e, t) {
      if (e) {
        if ("string" == typeof e) return Ze(e, t);
        var n = Object.prototype.toString.call(e).slice(8, -1);
        return "Object" === n && e.constructor && (n = e.constructor.name), "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? Ze(e, t) : void 0;
      }
    }

    function Ze(e, t) {
      (null == t || t > e.length) && (t = e.length);

      for (var n = 0, r = new Array(t); n < t; n++) r[n] = e[n];

      return r;
    }

    function et(e, t) {
      if ("undefined" != typeof Symbol && Symbol.iterator in Object(e)) {
        var n = [],
            r = !0,
            i = !1,
            o = void 0;

        try {
          for (var a, s = e[Symbol.iterator](); !(r = (a = s.next()).done) && (n.push(a.value), !t || n.length !== t); r = !0);
        } catch (e) {
          i = !0, o = e;
        } finally {
          try {
            r || null == s.return || s.return();
          } finally {
            if (i) throw o;
          }
        }

        return n;
      }
    }

    function tt(e) {
      if (Array.isArray(e)) return e;
    }

    function nt(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function rt(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function it(e, t, n) {
      return t && rt(e.prototype, t), n && rt(e, n), e;
    }

    function ot(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function at(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function st(e, t, n) {
      return t && at(e.prototype, t), n && at(e, n), e;
    }

    function ut() {
      return "function" == typeof Symbol && Symbol.iterator ? Symbol.iterator : "@@iterator";
    }

    function ct(e) {
      return !!e && "function" != typeof e.subscribe && "function" == typeof e.then;
    }

    function lt(e, t, n, r, i) {
      if (void 0 === i && (i = new Ca(e, n, r)), !i.closed) return t instanceof Po ? t.subscribe(i) : Oa(t)(i);
    }

    function ht(e, t) {
      return new Po(function (n) {
        var r = new ko();
        return r.add(t.schedule(function () {
          var i = e[To]();
          r.add(i.subscribe({
            next: function (e) {
              r.add(t.schedule(function () {
                return n.next(e);
              }));
            },
            error: function (e) {
              r.add(t.schedule(function () {
                return n.error(e);
              }));
            },
            complete: function () {
              r.add(t.schedule(function () {
                return n.complete();
              }));
            }
          }));
        })), r;
      });
    }

    function ft(e, t) {
      return new Po(function (n) {
        var r = new ko();
        return r.add(t.schedule(function () {
          return e.then(function (e) {
            r.add(t.schedule(function () {
              n.next(e), r.add(t.schedule(function () {
                return n.complete();
              }));
            }));
          }, function (e) {
            r.add(t.schedule(function () {
              return n.error(e);
            }));
          });
        })), r;
      });
    }

    function pt(e, t) {
      if (!e) throw new Error("Iterable cannot be null");
      return new Po(function (n) {
        var r,
            i = new ko();
        return i.add(function () {
          r && "function" == typeof r.return && r.return();
        }), i.add(t.schedule(function () {
          r = e[Sa](), i.add(t.schedule(function () {
            if (!n.closed) {
              var e, t;

              try {
                var i = r.next();
                e = i.value, t = i.done;
              } catch (e) {
                return void n.error(e);
              }

              t ? n.complete() : (n.next(e), this.schedule());
            }
          }));
        })), i;
      });
    }

    function vt(e) {
      return e && "function" == typeof e[To];
    }

    function dt(e) {
      return e && "function" == typeof e[Sa];
    }

    function gt(e, t) {
      if (null != e) {
        if (vt(e)) return ht(e, t);
        if (ct(e)) return ft(e, t);
        if (Aa(e)) return fe(e, t);
        if (dt(e) || "string" == typeof e) return pt(e, t);
      }

      throw new TypeError((null !== e && typeof e || e) + " is not observable");
    }

    function yt(e, t) {
      return t ? gt(e, t) : e instanceof Po ? e : new Po(Oa(e));
    }

    function mt(e, t, n) {
      return void 0 === n && (n = Number.POSITIVE_INFINITY), "function" == typeof t ? function (r) {
        return r.pipe(mt(function (n, r) {
          return yt(e(n, r)).pipe(ne(function (e, i) {
            return t(n, e, r, i);
          }));
        }, n));
      } : ("number" == typeof t && (n = t), function (t) {
        return t.lift(new Na(e, n));
      });
    }

    function bt(e) {
      return void 0 === e && (e = Number.POSITIVE_INFINITY), mt(Z, e);
    }

    function _t() {
      for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];

      var n = Number.POSITIVE_INFINITY,
          r = null,
          i = e[e.length - 1];
      return he(i) ? (r = e.pop(), e.length > 1 && "number" == typeof e[e.length - 1] && (n = e.pop())) : "number" == typeof i && (n = e.pop()), null === r && 1 === e.length && e[0] instanceof Po ? e[0] : bt(n)(pe(e, r));
    }

    function Et() {
      return bt(1);
    }

    function kt() {
      for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];

      return Et()(ve.apply(void 0, e));
    }

    function Ct() {
      for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];

      var n = e[e.length - 1];
      return he(n) ? (e.pop(), function (t) {
        return kt(e, t, n);
      }) : function (t) {
        return kt(e, t);
      };
    }

    function wt(e, t) {
      return function (n) {
        return n.lift(new xa(e, t));
      };
    }

    function St(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function Tt(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function Pt(e, t, n) {
      return t && Tt(e.prototype, t), n && Tt(e, n), e;
    }

    function At(e, t) {
      return xt(e) || It(e, t) || Rt(e, t) || Ot();
    }

    function Ot() {
      throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }

    function Rt(e, t) {
      if (e) {
        if ("string" == typeof e) return Nt(e, t);
        var n = Object.prototype.toString.call(e).slice(8, -1);
        return "Object" === n && e.constructor && (n = e.constructor.name), "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? Nt(e, t) : void 0;
      }
    }

    function Nt(e, t) {
      (null == t || t > e.length) && (t = e.length);

      for (var n = 0, r = new Array(t); n < t; n++) r[n] = e[n];

      return r;
    }

    function It(e, t) {
      if ("undefined" != typeof Symbol && Symbol.iterator in Object(e)) {
        var n = [],
            r = !0,
            i = !1,
            o = void 0;

        try {
          for (var a, s = e[Symbol.iterator](); !(r = (a = s.next()).done) && (n.push(a.value), !t || n.length !== t); r = !0);
        } catch (e) {
          i = !0, o = e;
        } finally {
          try {
            r || null == s.return || s.return();
          } finally {
            if (i) throw o;
          }
        }

        return n;
      }
    }

    function xt(e) {
      if (Array.isArray(e)) return e;
    }

    function Mt(e) {
      "@babel/helpers - typeof";

      return (Mt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
        return typeof e;
      } : function (e) {
        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
      })(e);
    }

    function Lt(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function jt(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function Dt(e, t, n) {
      return t && jt(e.prototype, t), n && jt(e, n), e;
    }

    function Bt(e, t, n) {
      return (Bt = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function (e, t, n) {
        var r = Ut(e, t);

        if (r) {
          var i = Object.getOwnPropertyDescriptor(r, t);
          return i.get ? i.get.call(n) : i.value;
        }
      })(e, t, n || e);
    }

    function Ut(e, t) {
      for (; !Object.prototype.hasOwnProperty.call(e, t) && (e = zt(e), null !== e););

      return e;
    }

    function Ft(e, t) {
      if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
      e.prototype = Object.create(t && t.prototype, {
        constructor: {
          value: e,
          writable: !0,
          configurable: !0
        }
      }), t && Vt(e, t);
    }

    function Vt(e, t) {
      return (Vt = Object.setPrototypeOf || function (e, t) {
        return e.__proto__ = t, e;
      })(e, t);
    }

    function Ht(e) {
      var t = Wt();
      return function () {
        var n,
            r = zt(e);

        if (t) {
          var i = zt(this).constructor;
          n = Reflect.construct(r, arguments, i);
        } else n = r.apply(this, arguments);

        return Gt(this, n);
      };
    }

    function Gt(e, t) {
      return !t || "object" !== Mt(t) && "function" != typeof t ? qt(e) : t;
    }

    function qt(e) {
      if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return e;
    }

    function Wt() {
      if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
      if (Reflect.construct.sham) return !1;
      if ("function" == typeof Proxy) return !0;

      try {
        return Date.prototype.toString.call(Reflect.construct(Date, [], function () {})), !0;
      } catch (e) {
        return !1;
      }
    }

    function zt(e) {
      return (zt = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {
        return e.__proto__ || Object.getPrototypeOf(e);
      })(e);
    }

    function Kt(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function Yt(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function Jt(e, t, n) {
      return t && Yt(e.prototype, t), n && Yt(e, n), e;
    }

    function Qt(e) {
      "@babel/helpers - typeof";

      return (Qt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
        return typeof e;
      } : function (e) {
        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
      })(e);
    }

    function $t(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function Xt(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function Zt(e, t, n) {
      return t && Xt(e.prototype, t), n && Xt(e, n), e;
    }

    function en(e, t) {
      if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
      e.prototype = Object.create(t && t.prototype, {
        constructor: {
          value: e,
          writable: !0,
          configurable: !0
        }
      }), t && tn(e, t);
    }

    function tn(e, t) {
      return (tn = Object.setPrototypeOf || function (e, t) {
        return e.__proto__ = t, e;
      })(e, t);
    }

    function nn(e) {
      var t = an();
      return function () {
        var n,
            r = sn(e);

        if (t) {
          var i = sn(this).constructor;
          n = Reflect.construct(r, arguments, i);
        } else n = r.apply(this, arguments);

        return rn(this, n);
      };
    }

    function rn(e, t) {
      return !t || "object" !== Qt(t) && "function" != typeof t ? on(e) : t;
    }

    function on(e) {
      if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return e;
    }

    function an() {
      if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
      if (Reflect.construct.sham) return !1;
      if ("function" == typeof Proxy) return !0;

      try {
        return Date.prototype.toString.call(Reflect.construct(Date, [], function () {})), !0;
      } catch (e) {
        return !1;
      }
    }

    function sn(e) {
      return (sn = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {
        return e.__proto__ || Object.getPrototypeOf(e);
      })(e);
    }

    function un(e) {
      "@babel/helpers - typeof";

      return (un = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
        return typeof e;
      } : function (e) {
        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
      })(e);
    }

    function cn(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function ln(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function hn(e, t, n) {
      return t && ln(e.prototype, t), n && ln(e, n), e;
    }

    function fn(e, t) {
      if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
      e.prototype = Object.create(t && t.prototype, {
        constructor: {
          value: e,
          writable: !0,
          configurable: !0
        }
      }), t && pn(e, t);
    }

    function pn(e, t) {
      return (pn = Object.setPrototypeOf || function (e, t) {
        return e.__proto__ = t, e;
      })(e, t);
    }

    function vn(e) {
      var t = yn();
      return function () {
        var n,
            r = mn(e);

        if (t) {
          var i = mn(this).constructor;
          n = Reflect.construct(r, arguments, i);
        } else n = r.apply(this, arguments);

        return dn(this, n);
      };
    }

    function dn(e, t) {
      return !t || "object" !== un(t) && "function" != typeof t ? gn(e) : t;
    }

    function gn(e) {
      if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return e;
    }

    function yn() {
      if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
      if (Reflect.construct.sham) return !1;
      if ("function" == typeof Proxy) return !0;

      try {
        return Date.prototype.toString.call(Reflect.construct(Date, [], function () {})), !0;
      } catch (e) {
        return !1;
      }
    }

    function mn(e) {
      return (mn = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {
        return e.__proto__ || Object.getPrototypeOf(e);
      })(e);
    }

    function bn(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function _n(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function En(e, t, n) {
      return t && _n(e.prototype, t), n && _n(e, n), e;
    }

    function kn(e) {
      return function (t) {
        return 0 === e ? ce() : t.lift(new ns(e));
      };
    }

    function Cn(e) {
      return void 0 === e && (e = null), function (t) {
        return t.lift(new is(e));
      };
    }

    function wn(e) {
      return void 0 === e && (e = Sn), function (t) {
        return t.lift(new as(e));
      };
    }

    function Sn() {
      return new Za();
    }

    function Tn(e, t) {
      var n = arguments.length >= 2;
      return function (r) {
        return r.pipe(e ? ue(function (t, n) {
          return e(t, n, r);
        }) : Z, kn(1), n ? Cn(t) : wn(function () {
          return new Za();
        }));
      };
    }

    function Pn(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function An(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function On(e, t, n) {
      return t && An(e.prototype, t), n && An(e, n), e;
    }

    function Rn(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function Nn(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function In(e, t, n) {
      return t && Nn(e.prototype, t), n && Nn(e, n), e;
    }

    function xn(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function Mn(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function Ln(e, t, n) {
      return t && Mn(e.prototype, t), n && Mn(e, n), e;
    }

    function jn() {
      return jn = Object.assign || function (e) {
        for (var t = 1; t < arguments.length; t++) {
          var n = arguments[t];

          for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);
        }

        return e;
      }, jn.apply(this, arguments);
    }

    function Dn(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function Bn(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function Un(e, t, n) {
      return t && Bn(e.prototype, t), n && Bn(e, n), e;
    }

    function Fn(e, t, n) {
      return t in e ? Object.defineProperty(e, t, {
        value: n,
        enumerable: !0,
        configurable: !0,
        writable: !0
      }) : e[t] = n, e;
    }

    function Vn() {
      return Vn = Object.assign || function (e) {
        for (var t = 1; t < arguments.length; t++) {
          var n = arguments[t];

          for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);
        }

        return e;
      }, Vn.apply(this, arguments);
    }

    function Hn(e) {
      "function" == typeof e && (Ws = e);
    }

    function Gn(e, t) {
      var n = qn(),
          r = e.spec,
          i = e.node[pa] || Ws;
      return Object.defineProperty(e.node, pa, {
        value: function () {
          return zn(e, t, i);
        }
      }), r.connections && r.connections.in ? Vn(r.connections.in, n.in) : r.connections ? Vn(r.connections, n) : r.connections = n, va.set(e.node, e.node[pa]()), e;
    }

    function qn() {
      return {
        in: Fn({}, fa, {
          bind: pa
        })
      };
    }

    function Wn(e, t) {
      return t.node.style.visibility = e ? "initial" : "hidden", !!e;
    }

    function zn(e, t, n) {
      var r = t.featureFlagCollection,
          i = t.ComponentConnector,
          o = r.value(e.spec.featureFlag),
          a = n.call(e.node, o, e) !== !1,
          s = e.spec.connections;
      if (a) i._updateInConnections(e.node, s.in);else if (i.subscriptors.has(e.node)) {
        var u = Object.keys(s.in).filter(function (e) {
          return e !== fa;
        });
        i.unsubscribe(u, e.node);
      }
      return va.set(e.node, a), a;
    }

    function Kn(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function Yn(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function Jn(e, t, n) {
      return t && Yn(e.prototype, t), n && Yn(e, n), e;
    }

    function Qn(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function $n(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function Xn(e, t, n) {
      return t && $n(e.prototype, t), n && $n(e, n), e;
    }

    function Zn(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function er(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function tr(e, t, n) {
      return t && er(e.prototype, t), n && er(e, n), e;
    }

    function nr(e, t, n, r, i, o, a) {
      try {
        var s = e[o](a),
            u = s.value;
      } catch (e) {
        return void n(e);
      }

      s.done ? t(u) : Promise.resolve(u).then(r, i);
    }

    function rr(e) {
      return function () {
        var t = this,
            n = arguments;
        return new Promise(function (r, i) {
          function o(e) {
            nr(s, r, i, o, a, "next", e);
          }

          function a(e) {
            nr(s, r, i, o, a, "throw", e);
          }

          var s = e.apply(t, n);
          o(void 0);
        });
      };
    }

    function ir() {
      return ir = Object.assign || function (e) {
        for (var t = 1; t < arguments.length; t++) {
          var n = arguments[t];

          for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);
        }

        return e;
      }, ir.apply(this, arguments);
    }

    function or(e) {
      "@babel/helpers - typeof";

      return (or = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
        return typeof e;
      } : function (e) {
        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
      })(e);
    }

    function ar(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function sr(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function ur(e, t, n) {
      return t && sr(e.prototype, t), n && sr(e, n), e;
    }

    function cr(e) {
      "@babel/helpers - typeof";

      return (cr = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
        return typeof e;
      } : function (e) {
        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
      })(e);
    }

    function lr(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function hr(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function fr(e, t, n) {
      return t && hr(e.prototype, t), n && hr(e, n), e;
    }

    function pr(e, t) {
      if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
      e.prototype = Object.create(t && t.prototype, {
        constructor: {
          value: e,
          writable: !0,
          configurable: !0
        }
      }), t && vr(e, t);
    }

    function vr(e, t) {
      return (vr = Object.setPrototypeOf || function (e, t) {
        return e.__proto__ = t, e;
      })(e, t);
    }

    function dr(e) {
      var t = mr();
      return function () {
        var n,
            r = br(e);

        if (t) {
          var i = br(this).constructor;
          n = Reflect.construct(r, arguments, i);
        } else n = r.apply(this, arguments);

        return gr(this, n);
      };
    }

    function gr(e, t) {
      return !t || "object" !== cr(t) && "function" != typeof t ? yr(e) : t;
    }

    function yr(e) {
      if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return e;
    }

    function mr() {
      if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
      if (Reflect.construct.sham) return !1;
      if ("function" == typeof Proxy) return !0;

      try {
        return Date.prototype.toString.call(Reflect.construct(Date, [], function () {})), !0;
      } catch (e) {
        return !1;
      }
    }

    function br(e) {
      return (br = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {
        return e.__proto__ || Object.getPrototypeOf(e);
      })(e);
    }

    function _r(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function Er(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function kr(e, t, n) {
      return t && Er(e.prototype, t), n && Er(e, n), e;
    }

    function Cr(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function wr(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function Sr(e, t, n) {
      return t && wr(e.prototype, t), n && wr(e, n), e;
    }

    function Tr(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function Pr(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function Ar(e, t, n) {
      return t && Pr(e.prototype, t), n && Pr(e, n), e;
    }

    function Or(e) {
      "@babel/helpers - typeof";

      return (Or = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
        return typeof e;
      } : function (e) {
        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
      })(e);
    }

    function Rr() {
      return Rr = Object.assign || function (e) {
        for (var t = 1; t < arguments.length; t++) {
          var n = arguments[t];

          for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);
        }

        return e;
      }, Rr.apply(this, arguments);
    }

    function Nr(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function Ir(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function xr(e, t, n) {
      return t && Ir(e.prototype, t), n && Ir(e, n), e;
    }

    function Mr(e, t, n) {
      return (Mr = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function (e, t, n) {
        var r = Lr(e, t);

        if (r) {
          var i = Object.getOwnPropertyDescriptor(r, t);
          return i.get ? i.get.call(n) : i.value;
        }
      })(e, t, n || e);
    }

    function Lr(e, t) {
      for (; !Object.prototype.hasOwnProperty.call(e, t) && (e = Hr(e), null !== e););

      return e;
    }

    function jr(e, t) {
      if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
      e.prototype = Object.create(t && t.prototype, {
        constructor: {
          value: e,
          writable: !0,
          configurable: !0
        }
      }), t && Dr(e, t);
    }

    function Dr(e, t) {
      return (Dr = Object.setPrototypeOf || function (e, t) {
        return e.__proto__ = t, e;
      })(e, t);
    }

    function Br(e) {
      var t = Vr();
      return function () {
        var n,
            r = Hr(e);

        if (t) {
          var i = Hr(this).constructor;
          n = Reflect.construct(r, arguments, i);
        } else n = r.apply(this, arguments);

        return Ur(this, n);
      };
    }

    function Ur(e, t) {
      return !t || "object" !== Or(t) && "function" != typeof t ? Fr(e) : t;
    }

    function Fr(e) {
      if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return e;
    }

    function Vr() {
      if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
      if (Reflect.construct.sham) return !1;
      if ("function" == typeof Proxy) return !0;

      try {
        return Date.prototype.toString.call(Reflect.construct(Date, [], function () {})), !0;
      } catch (e) {
        return !1;
      }
    }

    function Hr(e) {
      return (Hr = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {
        return e.__proto__ || Object.getPrototypeOf(e);
      })(e);
    }

    function Gr(e) {
      "@babel/helpers - typeof";

      return (Gr = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
        return typeof e;
      } : function (e) {
        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
      })(e);
    }

    function qr(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function Wr(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function zr(e, t, n) {
      return t && Wr(e.prototype, t), n && Wr(e, n), e;
    }

    function Kr(e, t) {
      if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
      e.prototype = Object.create(t && t.prototype, {
        constructor: {
          value: e,
          writable: !0,
          configurable: !0
        }
      }), t && Yr(e, t);
    }

    function Yr(e, t) {
      return (Yr = Object.setPrototypeOf || function (e, t) {
        return e.__proto__ = t, e;
      })(e, t);
    }

    function Jr(e) {
      var t = Xr();
      return function () {
        var n,
            r = Zr(e);

        if (t) {
          var i = Zr(this).constructor;
          n = Reflect.construct(r, arguments, i);
        } else n = r.apply(this, arguments);

        return Qr(this, n);
      };
    }

    function Qr(e, t) {
      return !t || "object" !== Gr(t) && "function" != typeof t ? $r(e) : t;
    }

    function $r(e) {
      if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return e;
    }

    function Xr() {
      if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
      if (Reflect.construct.sham) return !1;
      if ("function" == typeof Proxy) return !0;

      try {
        return Date.prototype.toString.call(Reflect.construct(Date, [], function () {})), !0;
      } catch (e) {
        return !1;
      }
    }

    function Zr(e) {
      return (Zr = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {
        return e.__proto__ || Object.getPrototypeOf(e);
      })(e);
    }

    function ei(e) {
      "@babel/helpers - typeof";

      return (ei = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
        return typeof e;
      } : function (e) {
        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
      })(e);
    }

    function ti(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function ni(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function ri(e, t, n) {
      return t && ni(e.prototype, t), n && ni(e, n), e;
    }

    function ii(e, t, n) {
      return (ii = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function (e, t, n) {
        var r = oi(e, t);

        if (r) {
          var i = Object.getOwnPropertyDescriptor(r, t);
          return i.get ? i.get.call(n) : i.value;
        }
      })(e, t, n || e);
    }

    function oi(e, t) {
      for (; !Object.prototype.hasOwnProperty.call(e, t) && (e = fi(e), null !== e););

      return e;
    }

    function ai(e, t) {
      if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
      e.prototype = Object.create(t && t.prototype, {
        constructor: {
          value: e,
          writable: !0,
          configurable: !0
        }
      }), t && si(e, t);
    }

    function si(e, t) {
      return (si = Object.setPrototypeOf || function (e, t) {
        return e.__proto__ = t, e;
      })(e, t);
    }

    function ui(e) {
      var t = hi();
      return function () {
        var n,
            r = fi(e);

        if (t) {
          var i = fi(this).constructor;
          n = Reflect.construct(r, arguments, i);
        } else n = r.apply(this, arguments);

        return ci(this, n);
      };
    }

    function ci(e, t) {
      return !t || "object" !== ei(t) && "function" != typeof t ? li(e) : t;
    }

    function li(e) {
      if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return e;
    }

    function hi() {
      if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
      if (Reflect.construct.sham) return !1;
      if ("function" == typeof Proxy) return !0;

      try {
        return Date.prototype.toString.call(Reflect.construct(Date, [], function () {})), !0;
      } catch (e) {
        return !1;
      }
    }

    function fi(e) {
      return (fi = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {
        return e.__proto__ || Object.getPrototypeOf(e);
      })(e);
    }

    function pi(e) {
      "@babel/helpers - typeof";

      return (pi = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
        return typeof e;
      } : function (e) {
        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
      })(e);
    }

    function vi() {
      return vi = Object.assign || function (e) {
        for (var t = 1; t < arguments.length; t++) {
          var n = arguments[t];

          for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);
        }

        return e;
      }, vi.apply(this, arguments);
    }

    function di(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
    }

    function gi(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    function yi(e, t, n) {
      return t && gi(e.prototype, t), n && gi(e, n), e;
    }

    function mi(e, t, n) {
      return (mi = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function (e, t, n) {
        var r = bi(e, t);

        if (r) {
          var i = Object.getOwnPropertyDescriptor(r, t);
          return i.get ? i.get.call(n) : i.value;
        }
      })(e, t, n || e);
    }

    function bi(e, t) {
      for (; !Object.prototype.hasOwnProperty.call(e, t) && (e = Ti(e), null !== e););

      return e;
    }

    function _i(e, t) {
      if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
      e.prototype = Object.create(t && t.prototype, {
        constructor: {
          value: e,
          writable: !0,
          configurable: !0
        }
      }), t && Ei(e, t);
    }

    function Ei(e, t) {
      return (Ei = Object.setPrototypeOf || function (e, t) {
        return e.__proto__ = t, e;
      })(e, t);
    }

    function ki(e) {
      var t = Si();
      return function () {
        var n,
            r = Ti(e);

        if (t) {
          var i = Ti(this).constructor;
          n = Reflect.construct(r, arguments, i);
        } else n = r.apply(this, arguments);

        return Ci(this, n);
      };
    }

    function Ci(e, t) {
      return !t || "object" !== pi(t) && "function" != typeof t ? wi(e) : t;
    }

    function wi(e) {
      if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return e;
    }

    function Si() {
      if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
      if (Reflect.construct.sham) return !1;
      if ("function" == typeof Proxy) return !0;

      try {
        return Date.prototype.toString.call(Reflect.construct(Date, [], function () {})), !0;
      } catch (e) {
        return !1;
      }
    }

    function Ti(e) {
      return (Ti = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {
        return e.__proto__ || Object.getPrototypeOf(e);
      })(e);
    }

    n.r(t);

    var Pi = (n(5), n(3)),
        Ai = n.n(Pi),
        Oi = 20,
        Ri = function (e) {
      function t() {
        return i(this, t), n.apply(this, arguments);
      }

      s(t, e);
      var n = c(t);
      return a(t, [{
        key: "listenToOnce",
        value: function (e, t, n) {
          e.addEventListener(t, function e(t) {
            n(), t.currentTarget.removeEventListener(t.type, e);
          });
        }
      }]), t;
    }(Ai.a),
        Ni = new Ri();

    Ni.setMaxListeners(Oi);

    var Ii,
        xi = Ni,
        Mi = {
      ALWAYS: "always",
      DELAYED: "delayed",
      UI: "ui",
      CURRENTVIEW: "currentview"
    },
        Li = {
      DEFAULT: Mi.ALWAYS,
      VALUES: Object.values(Mi)
    },
        ji = {
      PAGE_READY: "page-ready",
      PARSE_ROUTE: "parse-route",
      AFTER_PUBLISH: "after-publish",
      NAV_REQUEST: "nav-request",
      BEFORE_SET_ATTR_TO_NODE: "before-set-attr-to-node",
      AFTER_SET_ATTR_TO_NODE: "after-set-attr-to-node",
      BEFORE_CREATE_NODE: "before-create-node",
      AFTER_CREATE_NODE: "after-create-node",
      BEFORE_IMPORT: "before-import",
      AFTER_IMPORT: "after-import",
      PAGE_REQUEST: "page-request",
      PAGE_RESPONSE: "page-response",
      DATA_LOAD: "data-load",
      TEMPLATE_TRANSITION_END: "template-transition-end",
      TRACK_EVENT: "track-event",
      TEMPLATE_REGISTERED: "template-registered",
      ROUTER_BACKSTEP: "router-backstep",
      LOG_EVENT: "log-event"
    },
        Di = Object.values(ji),
        Bi = "./bower_components/",
        Ui = "./composerMocks/",
        Fi = "",
        Vi = "login",
        Hi = "core",
        Gi = "ether.cells",
        qi = {
      SEMAAS: {
        policy: "ei_bbva_es",
        mrId: Hi,
        nameSpace: Gi,
        identifier: "bridge",
        consumerId: "core@ether.cells"
      }
    },
        Wi = "./pages/",
        zi = {
      NONE: "none",
      DEFER: "defer",
      PROGRESSIVE: "progressive",
      HERO: "hero"
    },
        Ki = {
      DEFAULT: zi.DEFER,
      VALUES: Object.values(zi)
    },
        Yi = {
      WORKING: "working",
      REQUESTED: "requested"
    },
        Ji = {
      litElement: "litElement"
    },
        Qi = {
      bindingCodes: Mi,
      binding: Li,
      componentsPath: Bi,
      composerEndpoint: Ui,
      deployEndpoint: Fi,
      externalEvents: Di,
      externalEventsCodes: ji,
      initialTemplate: Vi,
      monitoring: qi,
      pagesPath: Wi,
      prplCodes: zi,
      prpl: Ki,
      preRenderState: Yi,
      renderEngines: Ji
    },
        $i = Qi.externalEventsCodes,
        Xi = function () {
      function e() {
        g(this, e);
      }

      return m(e, [{
        key: "createComponents",
        value: function (e) {
          var t = this;
          if (e) return e.map(function (e) {
            var n = t.createElement(e.tagName);
            return n.__zone = e.zone, n;
          });
        }
      }, {
        key: "setAttrs",
        value: function (e, t) {
          var n = $i.BEFORE_SET_ATTR_TO_NODE,
              r = $i.AFTER_SET_ATTR_TO_NODE;
          t && "object" === d(t) && (xi.emit(n, e.tagName), v(e, t), xi.emit(r, e));
        }
      }, {
        key: "createElement",
        value: function (e, t) {
          var n = $i.BEFORE_CREATE_NODE,
              r = $i.AFTER_CREATE_NODE;
          xi.emit(n, e);
          var i = document.createElement(e);
          return xi.emit(r, i), t && this.setAttrs(i, t), i;
        }
      }]), e;
    }(),
        Zi = Xi,
        eo = function () {
      function e() {
        _(this, e), this.dictionary = {};
      }

      return k(e, [{
        key: "getItem",
        value: function (e) {
          return this.dictionary[e] || null;
        }
      }, {
        key: "setItem",
        value: function (e, t) {
          this.dictionary[e] = t;
        }
      }]), e;
    }(),
        to = function () {
      function e(t) {
        _(this, e), this.prefix = "", this.persistent = !1, this.internalStorage = new eo(), b(this, t), this.persistent && this.clear();
      }

      return k(e, [{
        key: "getItem",
        value: function (e) {
          return JSON.parse(this.storage.getItem(this.prefix + e));
        }
      }, {
        key: "setItem",
        value: function (e, t) {
          this.storage.setItem(this.prefix + e, JSON.stringify(t, "", !0));
        }
      }, {
        key: "clear",
        value: function () {
          var e = new RegExp("^(" + this.prefix + ")");

          for (var t in this.storage) this.storage.hasOwnProperty(t) && e.test(t) && this.storage.removeItem(t);
        }
      }, {
        key: "storage",
        get: function () {
          var e;
          e = this.persistent ? window.localStorage : window.sessionStorage;

          try {
            e.setItem("_$_", {});
          } catch (t) {
            e = this.internalStorage;
          }

          return e;
        }
      }]), e;
    }(),
        no = function () {
      function e() {
        C(this, e);
      }

      return S(e, [{
        key: "_get",
        value: function (e, t) {
          return new Promise(function (n, r) {
            var i = new XMLHttpRequest();
            if (!e || !e.url) return void r(new Error("URL not defined"));
            var o = (e.method || "").toUpperCase() || "GET";
            i.addEventListener("load", function (e) {
              var i = e.target,
                  o = i.status;
              o >= 200 && o < 300 || 0 == o && i.responseText.length > 0 ? n("json" === t ? JSON.parse(i.response) : i.responseText) : r(new Error(i.statusText));
            }), i.addEventListener("error", function () {
              r(new Error("Network Error"));
            }), i.open(o, e.url);
            var a = e.headers;

            for (var s in a) a.hasOwnProperty(s) && i.setRequestHeader(s, a[s]);

            i.send(e.body);
          });
        }
      }, {
        key: "getJSON",
        value: function (e) {
          return this._get(e, "json");
        }
      }, {
        key: "getHTML",
        value: function (e) {
          return this._get(e, "html");
        }
      }]), e;
    }(),
        ro = function (e) {
      return e.trim().replace(/[_\s]+/g, "-").replace(/([A-Z])/g, "-$1").replace(/-+/g, "-").toLowerCase();
    },
        io = function (e) {
      return e.trim().replace(/(-|_|\s)+(.)?/g, function (e, t, n) {
        return n ? n.toUpperCase() : "";
      });
    },
        oo = function (e) {
      return "[object Object]" === Object.prototype.toString.call(e);
    },
        ao = function (e) {
      return function (t) {
        return t.map(uo(e)).flat();
      };
    },
        so = function (e) {
      return function (t) {
        return Object.entries(t).map(function (t) {
          var n = T(t, 2),
              r = n[0],
              i = n[1];
          return r === e ? [i] : uo(e)(i);
        }).flat();
      };
    },
        uo = function (e) {
      return function (t) {
        return oo(t) ? so(e)(t) : Array.isArray(t) ? ao(e)(t) : [];
      };
    },
        co = {
      dasherize: ro,
      camelize: io,
      findProperty: uo
    },
        lo = function (e) {
      var t = e.familyPath,
          n = e.tag,
          r = e.tagName,
          i = n || r,
          o = t || i;
      return "".concat(o, "/").concat(i, ".html");
    },
        ho = function () {
      function e() {
        U(this, e);
      }

      return V(e, [{
        key: "_buildConfig",
        value: function (e) {
          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "UI",
              n = e.type,
              r = e.tag,
              i = e.tagName,
              o = e.zone,
              a = e.fixed,
              s = e.container,
              u = e.priority,
              c = e.properties,
              l = e.render,
              h = e.featureFlag,
              f = lo(e),
              p = n ? n.toUpperCase() : t,
              v = {
            type: p,
            tagName: r || i,
            zone: o,
            fixed: a,
            container: s,
            priority: u,
            properties: c || {},
            path: f,
            render: l,
            featureFlag: h
          };
          return this._parseConnections(v);
        }
      }, {
        key: "parse",
        value: function (e) {
          var t = /^\/(\b)/,
              n = this._parseComponentsFromJson(e, "components", "UI"),
              r = e.template;

          r && (r = this._buildConfig(r, "TEMPLATE"));
          var i = {},
              o = e.pages;
          return o && Object.entries(o).forEach(function (e) {
            var n = x(e, 2),
                r = n[0],
                o = n[1].url;
            i[r] = "/" + o.replace(t, "");
          }), {
            page: e.page,
            currentPage: e.currentPage || {},
            template: r,
            components: n,
            pages: i
          };
        }
      }, {
        key: "_parseComponentsFromJson",
        value: function (e, t, n) {
          var r = this,
              i = Array.isArray(e[t]) ? e[t] : [];
          return i.map(function (e) {
            return r._buildConfig(e, n);
          });
        }
      }, {
        key: "_parseConnections",
        value: function (e) {
          var t = this._normalizeComponentDefinition(e),
              n = t.properties.cellsConnections;

          if (!n || !Object.keys(n).length > 0) return t;
          var r = I({}, t);

          if (n.params) {
            var i = this._parseConnectionsParams(n.params);

            n.in || (n.in = {}), n.out || (n.out = {}), I(n.in, i.in), I(n.out, i.out);
          }

          return r.connections = n, r;
        }
      }, {
        key: "_normalizeComponentDefinition",
        value: function (e) {
          return I({
            properties: {
              cellsConnections: {
                in: {},
                out: {}
              }
            }
          }, e);
        }
      }, {
        key: "_parseConnectionsParams",
        value: function (e) {
          var t = {
            in: {},
            out: {}
          };

          for (var n in e) if (e.hasOwnProperty(n)) {
            var r = e[n],
                i = ro(n) + "-changed";
            t.in[r] = this._createConnection(n), t.out[r] = this._createConnection(i);
          }

          return t;
        }
      }, {
        key: "_createConnection",
        value: function (e) {
          var t = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
          return {
            bind: e,
            global: t
          };
        }
      }, {
        key: "split",
        value: function (e) {
          var t;

          if (e) {
            t = {
              CC: [],
              UI: [],
              DM: []
            };

            for (var n = 0; n < e.length; n++) {
              var r = e[n];
              t[r.type].push(r);
            }
          }

          return t;
        }
      }]), e;
    }(),
        fo = Qi.externalEventsCodes,
        po = function () {
      function e(t) {
        G(this, e), this._initCellsPageManager(t);
      }

      return W(e, [{
        key: "_initCellsPageManager",
        value: function (e) {
          var t = e.htmlPagesPath,
              n = void 0 === t ? "./pages/" : t,
              r = e.htmlPages,
              i = e.templatesPath,
              o = e.composerEndpoint,
              a = e.remoteTemplates,
              s = e.appId,
              u = e.getPlatform,
              c = e.cache,
              l = e.storagePrefix,
              h = e.composerEngine,
              f = e.TemplateManager,
              p = new to({
            prefix: l,
            persistent: c
          }),
              v = new no(),
              d = new ho();
          H(this, {
            storage: p,
            htmlPagesPath: n,
            htmlPages: r,
            templatesPath: i,
            composerEndpoint: o,
            remoteTemplates: a,
            appId: s,
            getPlatform: u,
            cache: c,
            connector: v,
            sanitizer: d,
            composerEngine: h,
            TemplateManager: f
          });
        }
      }, {
        key: "_remoteTemplate",
        value: function (e) {
          var t = this.composerEndpoint.replace(/{appId}/, this.appId);
          return this.getPlatform && (t = t.replace(/{platform}/, this.getPlatform())), t = t.replace(/{page}/, e);
        }
      }, {
        key: "_localTemplate",
        value: function (e) {
          var t = this.templatesPath ? this.templatesPath : this.composerEndpoint;
          return "".concat(t).concat(e, ".json");
        }
      }, {
        key: "_isLocalComposer",
        value: function (e) {
          var t = !0,
              n = this.templatesPath && this.templatesPath.length > 0,
              r = this.remoteTemplates && this.remoteTemplates.length > 0,
              i = this.composerEndpoint && !n && !r;
          return t = i ? 0 !== this.composerEndpoint.indexOf("http") : !this.composerEndpoint || !this.remoteTemplates || this.remoteTemplates.indexOf(e) < 0;
        }
      }, {
        key: "_renderComposerEndpoint",
        value: function (e) {
          return this._isLocalComposer(e) ? this._localTemplate(e) : this._remoteTemplate(e);
        }
      }, {
        key: "generateRequestUrl",
        value: function (e) {
          return this.htmlPages && this.htmlPages.indexOf(e) >= 0 ? this.htmlPagesPath + e + ".html" : this._renderComposerEndpoint(e);
        }
      }, {
        key: "onPageDefinitionNotFound",
        value: function (e) {}
      }, {
        key: "clear",
        value: function () {
          this.storage.clear();
        }
      }, {
        key: "get",
        value: function (e, t, n) {
          var r,
              i = this.composerEngine && !this._isLocalComposer(e);
          return i ? (this.TemplateManager.removeTemplate(e), this._getFromComposerEngine(e, t)) : (r = this.storage.getItem(e), this.cache && r ? Promise.resolve(r) : this._getFromConnector(e, t, n));
        }
      }, {
        key: "_getFromComposerEngine",
        value: function (e, t) {
          var n = JSON.parse(this.composerEngine.getPage(e));
          return Promise.resolve(this._onResponse(e, t, n));
        }
      }, {
        key: "_getFromConnector",
        value: function (e, t, n) {
          var r = this,
              i = fo.PAGE_REQUEST;
          return t = t || {}, t.url = this.generateRequestUrl(e, t, n), xi.emit(i, t), this.connector.getJSON(t).then(function (n) {
            return r._onResponse(e, t, n);
          }).catch(function (t) {
            return r._onResponseFail(e), console.error(t), t.message;
          });
        }
      }, {
        key: "getPage",
        value: function (e, t) {
          var n = this,
              r = fo.PAGE_REQUEST;
          return t = t || {}, t.url = this.generateRequestUrl(e), xi.emit(r, t), this.connector.getHTML(t).then(function (r) {
            return n._onResponseHTML(e, t, r);
          }).catch(function (t) {
            return n._onResponseFail(e), console.error(t), t.message;
          });
        }
      }, {
        key: "_onResponse",
        value: function (e, t, n) {
          var r = fo.PAGE_RESPONSE,
              i = fo.DATA_LOAD;
          n.page = e, xi.emit(r, n);
          var o = this.sanitizer.parse(n);
          return this.storage.setItem(e, o), xi.emit(i, o), o;
        }
      }, {
        key: "_onResponseHTML",
        value: function (e, t, n) {
          var r = fo.PAGE_RESPONSE,
              i = fo.DATA_LOAD,
              o = {
            page: e,
            html: n
          };
          xi.emit(r, o);
          var a = {
            page: e,
            currentPage: {},
            template: {},
            components: [],
            pages: [],
            html: n
          };
          return this.storage.setItem(e, a), xi.emit(i, a), a;
        }
      }, {
        key: "_onResponseFail",
        value: function (e) {
          return this.onPageDefinitionNotFound && this.onPageDefinitionNotFound(e), Promise.reject(new Error("Definition file for page '".concat(e, "' not found.")));
        }
      }]), e;
    }(),
        vo = function (e, t) {
      return (vo = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (e, t) {
        e.__proto__ = t;
      } || function (e, t) {
        for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
      })(e, t);
    },
        go = !1,
        yo = {
      Promise: void 0,

      set useDeprecatedSynchronousErrorHandling(e) {
        if (e) {
          var t = new Error();
          console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n" + t.stack);
        } else go && console.log("RxJS: Back to a better error behavior. Thank you. <3");

        go = e;
      },

      get useDeprecatedSynchronousErrorHandling() {
        return go;
      }

    },
        mo = {
      closed: !0,
      next: function (e) {},
      error: function (e) {
        if (yo.useDeprecatedSynchronousErrorHandling) throw e;
        Y(e);
      },
      complete: function () {}
    },
        bo = function () {
      return Array.isArray || function (e) {
        return e && "number" == typeof e.length;
      };
    }(),
        _o = function () {
      function e(e) {
        return Error.call(this), this.message = e ? e.length + " errors occurred during unsubscription:\n" + e.map(function (e, t) {
          return t + 1 + ") " + e.toString();
        }).join("\n  ") : "", this.name = "UnsubscriptionError", this.errors = e, this;
      }

      return e.prototype = Object.create(Error.prototype), e;
    }(),
        Eo = _o,
        ko = function () {
      function e(e) {
        this.closed = !1, this._parentOrParents = null, this._subscriptions = null, e && (this._unsubscribe = e);
      }

      return e.prototype.unsubscribe = function () {
        var t;

        if (!this.closed) {
          var n = this,
              r = n._parentOrParents,
              i = n._unsubscribe,
              o = n._subscriptions;
          if (this.closed = !0, this._parentOrParents = null, this._subscriptions = null, r instanceof e) r.remove(this);else if (null !== r) for (var a = 0; a < r.length; ++a) {
            var s = r[a];
            s.remove(this);
          }
          if (K(i)) try {
            i.call(this);
          } catch (e) {
            t = e instanceof Eo ? Q(e.errors) : [e];
          }
          if (bo(o)) for (var a = -1, u = o.length; ++a < u;) {
            var c = o[a];
            if (J(c)) try {
              c.unsubscribe();
            } catch (e) {
              t = t || [], e instanceof Eo ? t = t.concat(Q(e.errors)) : t.push(e);
            }
          }
          if (t) throw new Eo(t);
        }
      }, e.prototype.add = function (t) {
        var n = t;
        if (!t) return e.EMPTY;

        switch (typeof t) {
          case "function":
            n = new e(t);

          case "object":
            if (n === this || n.closed || "function" != typeof n.unsubscribe) return n;
            if (this.closed) return n.unsubscribe(), n;

            if (!(n instanceof e)) {
              var r = n;
              n = new e(), n._subscriptions = [r];
            }

            break;

          default:
            throw new Error("unrecognized teardown " + t + " added to Subscription.");
        }

        var i = n._parentOrParents;
        if (null === i) n._parentOrParents = this;else if (i instanceof e) {
          if (i === this) return n;
          n._parentOrParents = [i, this];
        } else {
          if (i.indexOf(this) !== -1) return n;
          i.push(this);
        }
        var o = this._subscriptions;
        return null === o ? this._subscriptions = [n] : o.push(n), n;
      }, e.prototype.remove = function (e) {
        var t = this._subscriptions;

        if (t) {
          var n = t.indexOf(e);
          n !== -1 && t.splice(n, 1);
        }
      }, e.EMPTY = function (e) {
        return e.closed = !0, e;
      }(new e()), e;
    }(),
        Co = function () {
      return "function" == typeof Symbol ? Symbol("rxSubscriber") : "@@rxSubscriber_" + Math.random();
    }(),
        wo = function (e) {
      function t(n, r, i) {
        var o = e.call(this) || this;

        switch (o.syncErrorValue = null, o.syncErrorThrown = !1, o.syncErrorThrowable = !1, o.isStopped = !1, arguments.length) {
          case 0:
            o.destination = mo;
            break;

          case 1:
            if (!n) {
              o.destination = mo;
              break;
            }

            if ("object" == typeof n) {
              n instanceof t ? (o.syncErrorThrowable = n.syncErrorThrowable, o.destination = n, n.add(o)) : (o.syncErrorThrowable = !0, o.destination = new So(o, n));
              break;
            }

          default:
            o.syncErrorThrowable = !0, o.destination = new So(o, n, r, i);
        }

        return o;
      }

      return z(t, e), t.prototype[Co] = function () {
        return this;
      }, t.create = function (e, n, r) {
        var i = new t(e, n, r);
        return i.syncErrorThrowable = !1, i;
      }, t.prototype.next = function (e) {
        this.isStopped || this._next(e);
      }, t.prototype.error = function (e) {
        this.isStopped || (this.isStopped = !0, this._error(e));
      }, t.prototype.complete = function () {
        this.isStopped || (this.isStopped = !0, this._complete());
      }, t.prototype.unsubscribe = function () {
        this.closed || (this.isStopped = !0, e.prototype.unsubscribe.call(this));
      }, t.prototype._next = function (e) {
        this.destination.next(e);
      }, t.prototype._error = function (e) {
        this.destination.error(e), this.unsubscribe();
      }, t.prototype._complete = function () {
        this.destination.complete(), this.unsubscribe();
      }, t.prototype._unsubscribeAndRecycle = function () {
        var e = this._parentOrParents;
        return this._parentOrParents = null, this.unsubscribe(), this.closed = !1, this.isStopped = !1, this._parentOrParents = e, this;
      }, t;
    }(ko),
        So = function (e) {
      function t(t, n, r, i) {
        var o = e.call(this) || this;
        o._parentSubscriber = t;
        var a,
            s = o;
        return K(n) ? a = n : n && (a = n.next, r = n.error, i = n.complete, n !== mo && (s = Object.create(n), K(s.unsubscribe) && o.add(s.unsubscribe.bind(s)), s.unsubscribe = o.unsubscribe.bind(o))), o._context = s, o._next = a, o._error = r, o._complete = i, o;
      }

      return z(t, e), t.prototype.next = function (e) {
        if (!this.isStopped && this._next) {
          var t = this._parentSubscriber;
          yo.useDeprecatedSynchronousErrorHandling && t.syncErrorThrowable ? this.__tryOrSetError(t, this._next, e) && this.unsubscribe() : this.__tryOrUnsub(this._next, e);
        }
      }, t.prototype.error = function (e) {
        if (!this.isStopped) {
          var t = this._parentSubscriber,
              n = yo.useDeprecatedSynchronousErrorHandling;
          if (this._error) n && t.syncErrorThrowable ? (this.__tryOrSetError(t, this._error, e), this.unsubscribe()) : (this.__tryOrUnsub(this._error, e), this.unsubscribe());else if (t.syncErrorThrowable) n ? (t.syncErrorValue = e, t.syncErrorThrown = !0) : Y(e), this.unsubscribe();else {
            if (this.unsubscribe(), n) throw e;
            Y(e);
          }
        }
      }, t.prototype.complete = function () {
        var e = this;

        if (!this.isStopped) {
          var t = this._parentSubscriber;

          if (this._complete) {
            var n = function () {
              return e._complete.call(e._context);
            };

            yo.useDeprecatedSynchronousErrorHandling && t.syncErrorThrowable ? (this.__tryOrSetError(t, n), this.unsubscribe()) : (this.__tryOrUnsub(n), this.unsubscribe());
          } else this.unsubscribe();
        }
      }, t.prototype.__tryOrUnsub = function (e, t) {
        try {
          e.call(this._context, t);
        } catch (e) {
          if (this.unsubscribe(), yo.useDeprecatedSynchronousErrorHandling) throw e;
          Y(e);
        }
      }, t.prototype.__tryOrSetError = function (e, t, n) {
        if (!yo.useDeprecatedSynchronousErrorHandling) throw new Error("bad call");

        try {
          t.call(this._context, n);
        } catch (t) {
          return yo.useDeprecatedSynchronousErrorHandling ? (e.syncErrorValue = t, e.syncErrorThrown = !0, !0) : (Y(t), !0);
        }

        return !1;
      }, t.prototype._unsubscribe = function () {
        var e = this._parentSubscriber;
        this._context = null, this._parentSubscriber = null, e.unsubscribe();
      }, t;
    }(wo),
        To = function () {
      return "function" == typeof Symbol && Symbol.observable || "@@observable";
    }(),
        Po = function () {
      function e(e) {
        this._isScalar = !1, e && (this._subscribe = e);
      }

      return e.prototype.lift = function (t) {
        var n = new e();
        return n.source = this, n.operator = t, n;
      }, e.prototype.subscribe = function (e, t, n) {
        var r = this.operator,
            i = X(e, t, n);
        if (r ? i.add(r.call(i, this.source)) : i.add(this.source || yo.useDeprecatedSynchronousErrorHandling && !i.syncErrorThrowable ? this._subscribe(i) : this._trySubscribe(i)), yo.useDeprecatedSynchronousErrorHandling && i.syncErrorThrowable && (i.syncErrorThrowable = !1, i.syncErrorThrown)) throw i.syncErrorValue;
        return i;
      }, e.prototype._trySubscribe = function (e) {
        try {
          return this._subscribe(e);
        } catch (t) {
          yo.useDeprecatedSynchronousErrorHandling && (e.syncErrorThrown = !0, e.syncErrorValue = t), $(e) ? e.error(t) : console.warn(t);
        }
      }, e.prototype.forEach = function (e, t) {
        var n = this;
        return new (t = te(t))(function (t, r) {
          var i;
          i = n.subscribe(function (t) {
            try {
              e(t);
            } catch (e) {
              r(e), i && i.unsubscribe();
            }
          }, r, t);
        });
      }, e.prototype._subscribe = function (e) {
        var t = this.source;
        return t && t.subscribe(e);
      }, e.prototype[To] = function () {
        return this;
      }, e.prototype.pipe = function () {
        for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];

        return 0 === e.length ? this : ee(e)(this);
      }, e.prototype.toPromise = function (e) {
        var t = this;
        return new (e = te(e))(function (e, n) {
          var r;
          t.subscribe(function (e) {
            return r = e;
          }, function (e) {
            return n(e);
          }, function () {
            return e(r);
          });
        });
      }, e.create = function (t) {
        return new e(t);
      }, e;
    }(),
        Ao = function () {
      function e(e, t) {
        this.project = e, this.thisArg = t;
      }

      return e.prototype.call = function (e, t) {
        return t.subscribe(new Oo(e, this.project, this.thisArg));
      }, e;
    }(),
        Oo = function (e) {
      function t(t, n, r) {
        var i = e.call(this, t) || this;
        return i.project = n, i.count = 0, i.thisArg = r || i, i;
      }

      return z(t, e), t.prototype._next = function (e) {
        var t;

        try {
          t = this.project.call(this.thisArg, e, this.count++);
        } catch (e) {
          return void this.destination.error(e);
        }

        this.destination.next(t);
      }, t;
    }(wo),
        Ro = (function () {
      return Object.prototype.toString;
    }(), function () {
      function e(e, t) {
        this.predicate = e, this.thisArg = t;
      }

      return e.prototype.call = function (e, t) {
        return t.subscribe(new No(e, this.predicate, this.thisArg));
      }, e;
    }()),
        No = function (e) {
      function t(t, n, r) {
        var i = e.call(this, t) || this;
        return i.predicate = n, i.thisArg = r, i.count = 0, i;
      }

      return z(t, e), t.prototype._next = function (e) {
        var t;

        try {
          t = this.predicate.call(this.thisArg, e, this.count++);
        } catch (e) {
          return void this.destination.error(e);
        }

        t && this.destination.next(e);
      }, t;
    }(wo),
        Io = function () {
      function e() {
        return Error.call(this), this.message = "object unsubscribed", this.name = "ObjectUnsubscribedError", this;
      }

      return e.prototype = Object.create(Error.prototype), e;
    }(),
        xo = Io,
        Mo = function (e) {
      function t(t, n) {
        var r = e.call(this) || this;
        return r.subject = t, r.subscriber = n, r.closed = !1, r;
      }

      return z(t, e), t.prototype.unsubscribe = function () {
        if (!this.closed) {
          this.closed = !0;
          var e = this.subject,
              t = e.observers;

          if (this.subject = null, t && 0 !== t.length && !e.isStopped && !e.closed) {
            var n = t.indexOf(this.subscriber);
            n !== -1 && t.splice(n, 1);
          }
        }
      }, t;
    }(ko),
        Lo = function (e) {
      function t(t) {
        var n = e.call(this, t) || this;
        return n.destination = t, n;
      }

      return z(t, e), t;
    }(wo),
        jo = function (e) {
      function t() {
        var t = e.call(this) || this;
        return t.observers = [], t.closed = !1, t.isStopped = !1, t.hasError = !1, t.thrownError = null, t;
      }

      return z(t, e), t.prototype[Co] = function () {
        return new Lo(this);
      }, t.prototype.lift = function (e) {
        var t = new Do(this, this);
        return t.operator = e, t;
      }, t.prototype.next = function (e) {
        if (this.closed) throw new xo();
        if (!this.isStopped) for (var t = this.observers, n = t.length, r = t.slice(), i = 0; i < n; i++) r[i].next(e);
      }, t.prototype.error = function (e) {
        if (this.closed) throw new xo();
        this.hasError = !0, this.thrownError = e, this.isStopped = !0;

        for (var t = this.observers, n = t.length, r = t.slice(), i = 0; i < n; i++) r[i].error(e);

        this.observers.length = 0;
      }, t.prototype.complete = function () {
        if (this.closed) throw new xo();
        this.isStopped = !0;

        for (var e = this.observers, t = e.length, n = e.slice(), r = 0; r < t; r++) n[r].complete();

        this.observers.length = 0;
      }, t.prototype.unsubscribe = function () {
        this.isStopped = !0, this.closed = !0, this.observers = null;
      }, t.prototype._trySubscribe = function (t) {
        if (this.closed) throw new xo();
        return e.prototype._trySubscribe.call(this, t);
      }, t.prototype._subscribe = function (e) {
        if (this.closed) throw new xo();
        return this.hasError ? (e.error(this.thrownError), ko.EMPTY) : this.isStopped ? (e.complete(), ko.EMPTY) : (this.observers.push(e), new Mo(this, e));
      }, t.prototype.asObservable = function () {
        var e = new Po();
        return e.source = this, e;
      }, t.create = function (e, t) {
        return new Do(e, t);
      }, t;
    }(Po),
        Do = function (e) {
      function t(t, n) {
        var r = e.call(this) || this;
        return r.destination = t, r.source = n, r;
      }

      return z(t, e), t.prototype.next = function (e) {
        var t = this.destination;
        t && t.next && t.next(e);
      }, t.prototype.error = function (e) {
        var t = this.destination;
        t && t.error && this.destination.error(e);
      }, t.prototype.complete = function () {
        var e = this.destination;
        e && e.complete && this.destination.complete();
      }, t.prototype._subscribe = function (e) {
        var t = this.source;
        return t ? this.source.subscribe(e) : ko.EMPTY;
      }, t;
    }(jo),
        Bo = function (e) {
      function t(t, n) {
        return e.call(this) || this;
      }

      return z(t, e), t.prototype.schedule = function (e, t) {
        return void 0 === t && (t = 0), this;
      }, t;
    }(ko),
        Uo = function (e) {
      function t(t, n) {
        var r = e.call(this, t, n) || this;
        return r.scheduler = t, r.work = n, r.pending = !1, r;
      }

      return z(t, e), t.prototype.schedule = function (e, t) {
        if (void 0 === t && (t = 0), this.closed) return this;
        this.state = e;
        var n = this.id,
            r = this.scheduler;
        return null != n && (this.id = this.recycleAsyncId(r, n, t)), this.pending = !0, this.delay = t, this.id = this.id || this.requestAsyncId(r, this.id, t), this;
      }, t.prototype.requestAsyncId = function (e, t, n) {
        return void 0 === n && (n = 0), setInterval(e.flush.bind(e, this), n);
      }, t.prototype.recycleAsyncId = function (e, t, n) {
        return void 0 === n && (n = 0), null !== n && this.delay === n && this.pending === !1 ? t : void clearInterval(t);
      }, t.prototype.execute = function (e, t) {
        if (this.closed) return new Error("executing a cancelled action");
        this.pending = !1;

        var n = this._execute(e, t);

        return n ? n : void (this.pending === !1 && null != this.id && (this.id = this.recycleAsyncId(this.scheduler, this.id, null)));
      }, t.prototype._execute = function (e, t) {
        var n = !1,
            r = void 0;

        try {
          this.work(e);
        } catch (e) {
          n = !0, r = !!e && e || new Error(e);
        }

        if (n) return this.unsubscribe(), r;
      }, t.prototype._unsubscribe = function () {
        var e = this.id,
            t = this.scheduler,
            n = t.actions,
            r = n.indexOf(this);
        this.work = null, this.state = null, this.pending = !1, this.scheduler = null, r !== -1 && n.splice(r, 1), null != e && (this.id = this.recycleAsyncId(t, e, null)), this.delay = null;
      }, t;
    }(Bo),
        Fo = function (e) {
      function t(t, n) {
        var r = e.call(this, t, n) || this;
        return r.scheduler = t, r.work = n, r;
      }

      return z(t, e), t.prototype.schedule = function (t, n) {
        return void 0 === n && (n = 0), n > 0 ? e.prototype.schedule.call(this, t, n) : (this.delay = n, this.state = t, this.scheduler.flush(this), this);
      }, t.prototype.execute = function (t, n) {
        return n > 0 || this.closed ? e.prototype.execute.call(this, t, n) : this._execute(t, n);
      }, t.prototype.requestAsyncId = function (t, n, r) {
        return void 0 === r && (r = 0), null !== r && r > 0 || null === r && this.delay > 0 ? e.prototype.requestAsyncId.call(this, t, n, r) : t.flush(this);
      }, t;
    }(Uo),
        Vo = function () {
      function e(t, n) {
        void 0 === n && (n = e.now), this.SchedulerAction = t, this.now = n;
      }

      return e.prototype.schedule = function (e, t, n) {
        return void 0 === t && (t = 0), new this.SchedulerAction(this, e).schedule(n, t);
      }, e.now = function () {
        return Date.now();
      }, e;
    }(),
        Ho = function (e) {
      function t(n, r) {
        void 0 === r && (r = Vo.now);
        var i = e.call(this, n, function () {
          return t.delegate && t.delegate !== i ? t.delegate.now() : r();
        }) || this;
        return i.actions = [], i.active = !1, i.scheduled = void 0, i;
      }

      return z(t, e), t.prototype.schedule = function (n, r, i) {
        return void 0 === r && (r = 0), t.delegate && t.delegate !== this ? t.delegate.schedule(n, r, i) : e.prototype.schedule.call(this, n, r, i);
      }, t.prototype.flush = function (e) {
        var t = this.actions;
        if (this.active) return void t.push(e);
        var n;
        this.active = !0;

        do if (n = e.execute(e.state, e.delay)) break; while (e = t.shift());

        if (this.active = !1, n) {
          for (; e = t.shift();) e.unsubscribe();

          throw n;
        }
      }, t;
    }(Vo),
        Go = function (e) {
      function t() {
        return null !== e && e.apply(this, arguments) || this;
      }

      return z(t, e), t;
    }(Ho),
        qo = new Go(Fo),
        Wo = qo,
        zo = new Po(function (e) {
      return e.complete();
    }),
        Ko = function (e) {
      return function (t) {
        for (var n = 0, r = e.length; n < r && !t.closed; n++) t.next(e[n]);

        t.complete();
      };
    };

    !function (e) {
      e.NEXT = "N", e.ERROR = "E", e.COMPLETE = "C";
    }(Ii || (Ii = {}));

    var Yo = function () {
      function e(e, t, n) {
        this.kind = e, this.value = t, this.error = n, this.hasValue = "N" === e;
      }

      return e.prototype.observe = function (e) {
        switch (this.kind) {
          case "N":
            return e.next && e.next(this.value);

          case "E":
            return e.error && e.error(this.error);

          case "C":
            return e.complete && e.complete();
        }
      }, e.prototype.do = function (e, t, n) {
        var r = this.kind;

        switch (r) {
          case "N":
            return e && e(this.value);

          case "E":
            return t && t(this.error);

          case "C":
            return n && n();
        }
      }, e.prototype.accept = function (e, t, n) {
        return e && "function" == typeof e.next ? this.observe(e) : this.do(e, t, n);
      }, e.prototype.toObservable = function () {
        var e = this.kind;

        switch (e) {
          case "N":
            return ve(this.value);

          case "E":
            return de(this.error);

          case "C":
            return ce();
        }

        throw new Error("unexpected notification kind value");
      }, e.createNext = function (t) {
        return "undefined" != typeof t ? new e("N", t) : e.undefinedValueNotification;
      }, e.createError = function (t) {
        return new e("E", void 0, t);
      }, e.createComplete = function () {
        return e.completeNotification;
      }, e.completeNotification = new e("C"), e.undefinedValueNotification = new e("N", void 0), e;
    }(),
        Jo = (function () {
      function e(e, t) {
        void 0 === t && (t = 0), this.scheduler = e, this.delay = t;
      }

      return e.prototype.call = function (e, t) {
        return t.subscribe(new Jo(e, this.scheduler, this.delay));
      }, e;
    }(), function (e) {
      function t(t, n, r) {
        void 0 === r && (r = 0);
        var i = e.call(this, t) || this;
        return i.scheduler = n, i.delay = r, i;
      }

      return z(t, e), t.dispatch = function (e) {
        var t = e.notification,
            n = e.destination;
        t.observe(n), this.unsubscribe();
      }, t.prototype.scheduleMessage = function (e) {
        var n = this.destination;
        n.add(this.scheduler.schedule(t.dispatch, this.delay, new Qo(e, this.destination)));
      }, t.prototype._next = function (e) {
        this.scheduleMessage(Yo.createNext(e));
      }, t.prototype._error = function (e) {
        this.scheduleMessage(Yo.createError(e)), this.unsubscribe();
      }, t.prototype._complete = function () {
        this.scheduleMessage(Yo.createComplete()), this.unsubscribe();
      }, t;
    }(wo)),
        Qo = function () {
      function e(e, t) {
        this.notification = e, this.destination = t;
      }

      return e;
    }(),
        $o = function (e) {
      function t(t, n, r) {
        void 0 === t && (t = Number.POSITIVE_INFINITY), void 0 === n && (n = Number.POSITIVE_INFINITY);
        var i = e.call(this) || this;
        return i.scheduler = r, i._events = [], i._infiniteTimeWindow = !1, i._bufferSize = t < 1 ? 1 : t, i._windowTime = n < 1 ? 1 : n, n === Number.POSITIVE_INFINITY ? (i._infiniteTimeWindow = !0, i.next = i.nextInfiniteTimeWindow) : i.next = i.nextTimeWindow, i;
      }

      return z(t, e), t.prototype.nextInfiniteTimeWindow = function (t) {
        var n = this._events;
        n.push(t), n.length > this._bufferSize && n.shift(), e.prototype.next.call(this, t);
      }, t.prototype.nextTimeWindow = function (t) {
        this._events.push(new Xo(this._getNow(), t)), this._trimBufferThenGetEvents(), e.prototype.next.call(this, t);
      }, t.prototype._subscribe = function (e) {
        var t,
            n = this._infiniteTimeWindow,
            r = n ? this._events : this._trimBufferThenGetEvents(),
            i = this.scheduler,
            o = r.length;
        if (this.closed) throw new xo();
        if (this.isStopped || this.hasError ? t = ko.EMPTY : (this.observers.push(e), t = new Mo(this, e)), i && e.add(e = new Jo(e, i)), n) for (var a = 0; a < o && !e.closed; a++) e.next(r[a]);else for (var a = 0; a < o && !e.closed; a++) e.next(r[a].value);
        return this.hasError ? e.error(this.thrownError) : this.isStopped && e.complete(), t;
      }, t.prototype._getNow = function () {
        return (this.scheduler || Wo).now();
      }, t.prototype._trimBufferThenGetEvents = function () {
        for (var e = this._getNow(), t = this._bufferSize, n = this._windowTime, r = this._events, i = r.length, o = 0; o < i && !(e - r[o].time < n);) o++;

        return i > t && (o = Math.max(o, i - t)), o > 0 && r.splice(0, o), r;
      }, t;
    }(jo),
        Xo = function () {
      function e(e, t) {
        this.time = e, this.value = t;
      }

      return e;
    }(),
        Zo = function () {
      var e = new $o(1),
          t = e.next.bind(e);
      return e.next = function (e) {
        e.uuid || (e.uuid = ye()), e.time || (e.time = new Date().getTime()), t(e);
      }, e.hasObservers = function () {
        if (this.closed) throw new Error();
        return this.observers.length > 0;
      }, e.complete = function () {}, e.error = function (e) {
        this.observers.forEach(function (t) {
          t.isStopped = !1, t.onError(e);
        });
      }, e.unsubscribe = function (e) {
        this.observers.splice(e, 1);
      }, e.unsubscribeAll = function () {
        this.observers.splice(0, this.observers.length);
      }, e.clean = function () {
        this._events = [], this.observers = [];
      }, e.dispose = function () {
        this.unsubscribe();
      }, e;
    },
        ea = Zo,
        ta = function () {
      function e(t) {
        me(this, e), this.node = t, this.subscriptions = [], this.publications = new ko();
      }

      return _e(e, [{
        key: "hasSubscription",
        value: function (e) {
          return this.subscriptions.filter(function (t) {
            return t.channel === e;
          }).length > 0;
        }
      }, {
        key: "publish",
        value: function (e) {
          this.publications.add(e);
        }
      }, {
        key: "makeCallbackWithNoReplay",
        value: function (e, t) {
          t.node.intervals || (t.node.intervals = []), t.node.ids || (t.node.ids = []);

          var n = function (t) {
            return t.intervals[e.name];
          },
              r = function (t, n) {
            t.intervals[e.name] = n;
          },
              i = function (e) {
            return e._events.length > 0 ? e._events[0].time : 1;
          },
              o = function (t) {
            return t.ids[e.name];
          },
              a = function (t, n) {
            t.ids[e.name] = n;
          },
              s = function (e) {
            return e._events.length > 0 ? e._events[0].uuid : null;
          },
              u = function () {
            var u = i(e),
                c = n(t.node),
                l = s(e),
                h = o(t.node);
            return !c || c < u || c === u && h != l ? (r(t.node, u), a(t.node, l), t.apply(this, arguments)) : void r(t.node, u);
          }.bind(this);

          return u.node = t.node, u;
        }
      }, {
        key: "subscribe",
        value: function (e, t, n) {
          if (!this.hasSubscription(e)) {
            var r,
                i = t;
            n === !1 && (i = this.makeCallbackWithNoReplay(e, t));

            var o = this._firstInstanceOfObserver(i.node, e);

            o === -1 ? (r = e.subscribe(i), o = e.observers.length - 1) : r = e.observers[o], r.node = i.node;
            var a = {
              channel: e,
              observer: r,
              subscription: r
            };
            this.subscriptions.push(a);
          }
        }
      }, {
        key: "unsubscribe",
        value: function (e) {
          this.subscriptions.forEach(function (t) {
            var n = t.channel,
                r = t.observer,
                i = n.observers.indexOf(r);
            i >= 0 && (e !== !0 && n.name.match(/\b__bridge_/) || n.unsubscribe(i));
          }), this.publications.unsubscribe();
        }
      }, {
        key: "_firstInstanceOfObserver",
        value: function (e, t) {
          return t.observers.findIndex(function (t) {
            return t.node === e;
          });
        }
      }]), e;
    }(),
        na = function (e) {
      return e.toLowerCase().replace(/-(.)/g, function (e, t) {
        return t.toUpperCase();
      });
    },
        ra = function () {
      function e(t) {
        ke(this, e), this.componentConnector = t;
      }

      return we(e, [{
        key: "isUnresolved",
        value: function (e) {
          var t = e.tagName.includes("-"),
              n = this._isPolymerElement(e);

          return t && !n;
        }
      }, {
        key: "isInstance",
        value: function (e) {
          var t = e.tagName.includes("-");
          return t && !this.isUnresolved(e);
        }
      }, {
        key: "isEventAtTarget",
        value: function (e) {
          var t;

          if (Polymer && Polymer.Settings && (Polymer.Settings.hasShadow === !1 || Polymer.Settings.useShadow === !1)) {
            var n = Polymer.dom(e);
            t = n.localTarget === e.currentTarget;
          } else {
            var r = Event.AT_TARGET || Event.prototype.AT_TARGET;
            t = e.eventPhase === r;
          }

          return t;
        }
      }, {
        key: "dispatchActionFunction",
        value: function (e, t, n) {
          var r,
              i = this._getPropertyChangedName(e.type);

          r = i && e.detail && e.detail.hasOwnProperty("value") ? Polymer && Polymer.dom(e).rootTarget ? Polymer.dom(e).rootTarget[i] : e.detail.value : e.detail, "function" == typeof n ? n(r) : t[n](r);
        }
      }, {
        key: "dispatchActionProperty",
        value: function (e, t, n) {
          var r,
              i = this._parseActionInEvent(e, n, t);

          if (t && t.constructor._finalize) {
            var o = t.constructor.properties[i.property];
            return o ? void (t[i.property] = i.value) : this._handleAttribute(t, i);
          }

          return (t && t.getPropertyInfo || void 0 !== Polymer.Element && t instanceof Polymer.Element == !1) && (r = t.getPropertyInfo ? t.getPropertyInfo(i.property) : this._getTargetProperties(t)[i.property], r && r.defined && !r.readOnly && !r.computed) ? t.set(i.path, i.value) : (t && void 0 === t.getPropertyInfo || void 0 !== Polymer.Element && t instanceof Polymer.Element == !1) && (r = void 0 !== this._getTargetProperties(t) ? this._getTargetProperties(t)[i.property] : void 0, r && !r.readOnly && !r.computed) ? t.set(i.path, i.value) : this._handleAttribute(t, i);
        }
      }, {
        key: "processFirstTimeConnections",
        value: function (e, t) {
          if (e && t && !e.__isCellsConnected) {
            if (t.in) for (var n in t.in) t.in.hasOwnProperty(n) && this.componentConnector.manager.get(n)._events[0] && (t.ignoreAttr ? t.ignoreAttr.push(t.in[n].bind) : t.ignoreAttr = [t.in[n].bind]);
            if (t.out) for (var r in t.out) if (t.out.hasOwnProperty(r)) {
              var i = this._getPropertyChangedName(t.out[r].bind),
                  o = this._whichPolymerVersion(e);

              if (2 === o) {
                if (i && e.__data && !this.componentConnector.manager.get(r)._events[0] && e && e._hasReadOnlyEffect && !e._hasReadOnlyEffect(i) && !e._hasComputedEffect(i)) {
                  var a = e[i];
                  e.__data[i] = void 0, e[i] = a;
                }
              } else if (i && e.__data__ && !this.componentConnector.get(r)._events[0] && e && e.getPropertyInfo) {
                var s = e.getPropertyInfo(i);

                if (s.defined && !s.readOnly && !s.computed) {
                  var u = e[i];
                  e.__data__[i] = void 0, e[i] = u;
                }
              }
            }
            e.__isCellsConnected = !0;
          }
        }
      }, {
        key: "_whichPolymerVersion",
        value: function (e) {
          var t = -1,
              n = function () {},
              r = window.Polymer || {},
              i = r.Element,
              o = void 0 === i ? n : i,
              a = r.ElementMixin,
              s = void 0 === a ? n : a,
              u = r.LegacyElementMixin,
              c = void 0 === u ? n : u,
              l = e.__isPolymerInstance__ === !0,
              h = e instanceof o || e instanceof s || e instanceof c || void 0 !== e.is && void 0 !== e.ready && void 0 !== e.notifyPath;

          return h ? t = 2 : l && (t = 1), t;
        }
      }, {
        key: "_isPolymerElement",
        value: function (e) {
          return this._whichPolymerVersion(e) > 0;
        }
      }, {
        key: "_getTargetProperties",
        value: function (e) {
          var t;
          return e.constructor.config ? t = e.constructor.config.properties : e.constructor._properties && (t = e.constructor._properties), t;
        }
      }, {
        key: "_handleAttribute",
        value: function (e, t) {
          var n = t.value,
              r = t.path;
          return "boolean" != typeof n || n ? e.setAttribute(r, n) : e.removeAttribute(r);
        }
      }, {
        key: "_getPropertyChangedName",
        value: function (e) {
          var t,
              n = "-changed";
          return e.indexOf(n, e.length - n.length) !== -1 && (t = e.slice(0, -n.length), t = na(t)), t;
        }
      }, {
        key: "_parseActionInEvent",
        value: function (e, t, n) {
          var r,
              i,
              o = this._getPropertyChangedName(e.type);

          return o && e.detail && e.detail.hasOwnProperty("value") ? (i = e.detail.value, t = t || o, r = e.detail.path ? e.detail.path.replace(o, t) : t) : (r = t, i = e.detail), void 0 !== n && void 0 === n.is && "object" === Ee(i) && (Polymer && void 0 === Polymer.Element ? i = JSON.stringify(i) : (Polymer && n instanceof Polymer.Element) === !1 && (i = JSON.stringify(i))), {
            path: r,
            value: i,
            property: t
          };
        }
      }]), e;
    }(),
        ia = function (e) {
      return e.toLowerCase().replace(/-(.)/g, function (e, t) {
        return t.toUpperCase();
      });
    },
        oa = function () {
      function e(t) {
        var n = this;
        Se(this, e), this._parseActionInEvent = function (e, t, r) {
          var i,
              o,
              a = n._getProperyChangedName(e.type);

          return a && e.detail && e.detail.hasOwnProperty("value") ? (i = e.detail.value, t = t || a, o = e.detail.path ? e.detail.path.replace(a, t) : t) : (o = t, i = e.detail), {
            path: o,
            value: i,
            property: t
          };
        }, this.componentConnector = t;
      }

      return Pe(e, [{
        key: "isUnresolved",
        value: function (e) {
          var t = e.tagName.includes("-"),
              n = e.updateComplete instanceof Promise && "function" == typeof e.render;
          return t && !n;
        }
      }, {
        key: "isInstance",
        value: function (e) {
          var t = e.tagName.includes("-");
          return t && !this.isUnresolved(e);
        }
      }, {
        key: "isEventAtTarget",
        value: function (e) {
          var t = Event.AT_TARGET || Event.prototype.AT_TARGET;
          return e.eventPhase === t;
        }
      }, {
        key: "dispatchActionFunction",
        value: function (e, t, n) {
          var r = e.detail;
          "function" == typeof n ? n(r) : t[n](r);
        }
      }, {
        key: "dispatchActionProperty",
        value: function (e, t, n) {
          var r = this._parseActionInEvent(e, n, t);

          return t[r.property] = r.value;
        }
      }, {
        key: "processFirstTimeConnections",
        value: function (e, t) {
          if (e && t && !e.__isCellsConnected) {
            if (t.in) for (var n in t.in) t.in.hasOwnProperty(n) && this.componentConnector.manager.get(n)._events[0] && (t.ignoreAttr ? t.ignoreAttr.push(t.in[n].bind) : t.ignoreAttr = [t.in[n].bind]);
            e.__isCellsConnected = !0;
          }
        }
      }, {
        key: "_getProperyChangedName",
        value: function (e) {
          var t,
              n = "-changed";
          return e.indexOf(n, e.length - n.length) !== -1 && (t = e.slice(0, -n.length), t = ia(t)), t;
        }
      }]), e;
    }(),
        aa = function (e) {
      return e.toLowerCase().replace(/-(.)/g, function (e, t) {
        return t.toUpperCase();
      });
    },
        sa = function () {
      function e(t) {
        Oe(this, e), this.componentConnector = t;
      }

      return Ne(e, [{
        key: "isUnresolved",
        value: function (e) {
          return !1;
        }
      }, {
        key: "isInstance",
        value: function (e) {
          var t = e.tagName.includes("-");
          return Boolean(!t || customElements.get(e.tagName.toLowerCase()));
        }
      }, {
        key: "isEventAtTarget",
        value: function (e) {
          return e.eventPhase === Event.AT_TARGET;
        }
      }, {
        key: "dispatchActionFunction",
        value: function (e, t, n) {
          var r = e.detail;
          "function" == typeof n ? n(r) : t[n](r);
        }
      }, {
        key: "dispatchActionProperty",
        value: function (e, t, n) {
          var r = this._parseActionInEvent(e, n, t);

          return t[r.property] = r.value;
        }
      }, {
        key: "processFirstTimeConnections",
        value: function (e, t) {
          if (e && t && !e.__isCellsConnected) {
            if (t.in) for (var n in t.in) t.in.hasOwnProperty(n) && this.componentConnector.manager.get(n)._events[0] && (t.ignoreAttr ? t.ignoreAttr.push(t.in[n].bind) : t.ignoreAttr = [t.in[n].bind]);
            e.__isCellsConnected = !0;
          }
        }
      }, {
        key: "_getProperyChangedName",
        value: function (e) {
          var t,
              n = "-changed";
          return e.indexOf(n, e.length - n.length) !== -1 && (t = e.slice(0, -n.length), t = aa(t)), t;
        }
      }, {
        key: "_parseActionInEvent",
        value: function (e, t, n) {
          var r,
              i,
              o = this._getProperyChangedName(e.type);

          return o && e.detail && e.detail.hasOwnProperty("value") ? (r = e.detail.value, t = t || o, i = e.detail.path ? e.detail.path.replace(o, t) : t) : (i = t, r = e.detail), void 0 !== n && void 0 === n.is && "object" === Ae(r) && (r = JSON.stringify(r)), {
            path: i,
            value: r,
            property: t
          };
        }
      }]), e;
    }(),
        ua = 0,
        ca = 1,
        la = 2,
        ha = function () {
      function e(t) {
        Ie(this, e), this.adapters = new Array(2), this.adapters[ua] = new ra(t), this.adapters[ca] = new oa(t), this.adapters[la] = new sa(t);
      }

      return Me(e, [{
        key: "getNodeAdapter",
        value: function (e) {
          return this.adapters.find(function (t) {
            return t.isInstance(e);
          }) || this.adapters[ua];
        }
      }, {
        key: "getAdapterByName",
        value: function (e) {
          var t;

          switch (e) {
            case "polymer":
              t = ua;
              break;

            case "litElement":
              t = ca;
              break;

            case "vanilla":
              t = la;
              break;

            default:
              t = ua;
          }

          return this.adapters[t];
        }
      }, {
        key: "getComponentAdapter",
        value: function (e) {
          var t = e.spec && e.spec.render;
          return this.getAdapterByName(t);
        }
      }]), e;
    }(),
        fa = "__bridge_ch_featureflag",
        pa = "featureFlagChangedCallback",
        va = new Map(),
        da = function () {
      function e(t) {
        Ge(this, e), this._featureCollection = {}, this._conector = t.ComponentConnector;
      }

      return We(e, [{
        key: "add",
        value: function (e) {
          this._featureCollection[e.key] = e;
        }
      }, {
        key: "value",
        value: function (e) {
          var t = e.key,
              n = e.defaultValue,
              r = e.value,
              i = this._featureCollection;
          return i.hasOwnProperty(t) && i[t].hasOwnProperty("value") ? i[t].value : i.hasOwnProperty(t) && i[t].hasOwnProperty("defaultValue") ? i[t].defaultValue : void 0 !== r ? r : n;
        }
      }, {
        key: "extend",
        value: function (e) {
          return He(this._featureCollection, e), this._publish();
        }
      }, {
        key: "register",
        value: function (e) {
          var t = this;
          return Object.entries(e).map(function (e) {
            var t = je(e, 2),
                n = t[0],
                r = t[1].defaultValue;
            return Le({}, n, r);
          }).forEach(function (e) {
            return He(t._featureCollection, e);
          }), this._publish();
        }
      }, {
        key: "update",
        value: function (e) {
          return this.extend(e.features);
        }
      }, {
        key: "subscribe",
        value: function (e) {
          var t = this;
          return "function" == typeof e && this._conector.manager.get(fa).subscribe(function () {
            return e(t);
          }), this;
        }
      }, {
        key: "_publish",
        value: function () {
          var e = this._conector.manager.get(fa);

          return e.next(new CustomEvent(fa, {
            detail: this.collection
          })), this;
        }
      }, {
        key: "collection",
        get: function () {
          return JSON.parse(JSON.stringify(this._featureCollection));
        }
      }]), e;
    }(),
        ga = function () {
      function e() {
        ze(this, e), this.channels = {};
      }

      return Ye(e, [{
        key: "get",
        value: function (e) {
          var t = this.channels[e];
          return null == t && (t = this.create(e)), t;
        }
      }, {
        key: "getUnsafe",
        value: function (e) {
          return this.channels[e];
        }
      }, {
        key: "create",
        value: function (e) {
          var t = ea();
          return t.name = e, this.channels[e] = t, t;
        }
      }, {
        key: "remove",
        value: function (e) {
          delete this.channels[e];
        }
      }, {
        key: "unregisterAllSubscriptors",
        value: function () {
          this.ComponentConnector.subscriptors.forEach(function (e) {
            e.subscriptions.forEach(function (e) {
              return e.subscription.unsubscribe();
            });
          });
        }
      }, {
        key: "cleanAllChannels",
        value: function () {
          for (var e in this.channels) this.channels.hasOwnProperty(e) && this.channels[e].clean();
        }
      }, {
        key: "removeAllChannels",
        value: function () {
          for (var e in this.channels) this.channels.hasOwnProperty(e) && delete this.channels[e];
        }
      }, {
        key: "has",
        value: function (e) {
          return null != this.channels[e];
        }
      }]), e;
    }(),
        ya = Qi.externalEventsCodes,
        ma = function () {
      function e(t) {
        nt(this, e), this.adapterResolver = new ha(this), this.manager = new ga(), this.subscriptors = new Map(), this.bridgeChannelsPrefix = /__bridge_(?!ch)/, this.bridge = t;
      }

      return it(e, [{
        key: "getSubscriptor",
        value: function (e) {
          var t = this.subscriptors.get(e);
          return t || (t = new ta(e), this.subscriptors.set(e, t)), t;
        }
      }, {
        key: "registerComponent",
        value: function (e) {
          var t = e.node,
              n = e.connections,
              r = this.adapterResolver.getComponentAdapter(e);
          t && n && (this._registerOutConnections(t, n.out), this._registerInConnections(t, n.in)), r.processFirstTimeConnections(t, n);
        }
      }, {
        key: "progressiveRegisterConnections",
        value: function (e, t) {
          e && t && (this._registerOutConnections(e, t.out), this._updateInConnections(e, t.in));
        }
      }, {
        key: "_registerInConnections",
        value: function (e) {
          var t = this,
              n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
          Object.entries(n).forEach(function (n) {
            var r = Qe(n, 2),
                i = r[0],
                o = r[1],
                a = o.bind,
                s = o.previousState,
                u = void 0 !== s && s;
            t.addSubscription(i, e, a, u);
          });
        }
      }, {
        key: "addSubscription",
        value: function (e, t, n) {
          var r = arguments.length > 3 && void 0 !== arguments[3] && arguments[3],
              i = this._wrapCallbackWithNode(t, n),
              o = this.manager.get(e);

          o && this.getSubscriptor(t).subscribe(o, i, r);
        }
      }, {
        key: "_updateInConnections",
        value: function (e) {
          var t = this,
              n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
          Object.entries(n).forEach(function (n) {
            var r = Qe(n, 2),
                i = r[0],
                o = r[1],
                a = o.bind,
                s = o.previousState,
                u = void 0 !== s && s;
            t.updateSubscription(i, e, a, u);
          });
        }
      }, {
        key: "updateSubscription",
        value: function (e, t, n) {
          var r = arguments.length > 3 && void 0 !== arguments[3] && arguments[3],
              i = this.getSubscriptor(t);

          if (this.isActiveBridgeChannel(e) || !this.isActiveBridgeChannel(e) && !this.hasSubscriptions(i, e)) {
            var o = this.manager.get(e),
                a = this._wrapCallbackWithNode(t, n);

            i.subscribe(o, a, r);
          }
        }
      }, {
        key: "_wrapCallbackWithNode",
        value: function (e, t) {
          var n = this.wrapCallback(e, t);
          return n.node = e, n;
        }
      }, {
        key: "wrapCallback",
        value: function (e, t) {
          var n = this,
              r = function (e) {
            setTimeout(function () {
              "requestIdleCallback" in window ? window.requestIdleCallback(e) : setTimeout(e, 1);
            }, 100);
          };

          return function (i) {
            var o = n.adapterResolver.getNodeAdapter(e),
                a = function n(a, s) {
              o.isUnresolved(e) ? r(n) : ("function" == typeof t || "function" == typeof e[t] ? o.dispatchActionFunction(i, e, t) : o.dispatchActionProperty(i, e, t), s && s.disconnect());
            };

            if (o.isUnresolved(e)) {
              var s = new MutationObserver(a),
                  u = {
                attributes: !1,
                childList: !0,
                characterData: !0
              };
              s.observe(e, u), r(a, 100);
            } else a();
          };
        }
      }, {
        key: "_hasPublisher",
        value: function (e, t, n, r) {
          var i = e.publications;
          return Boolean((i._subscriptions || []).find(function (e) {
            return e.node === t && e.channelName === n && e.eventName === r;
          }));
        }
      }, {
        key: "_registerOutConnections",
        value: function (e) {
          var t = this,
              n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
          Object.entries(n).forEach(function (n) {
            var r = Qe(n, 2),
                i = r[0],
                o = r[1];
            return t.addPublication(i, e, o.bind, o);
          });
        }
      }, {
        key: "addPublication",
        value: function (e, t, n, r) {
          if (this.isBridgeChannel(e)) console.warn("Forbidden operation. You are trying to write to a private channel (".concat(e, ")."));else {
            var i = this.getSubscriptor(t),
                o = this._hasPublisher(i, t, e, n);

            if (!o) {
              var a = this.manager.get(e);
              i.publish(this.wrapEvent(t, n, a, r));
            }
          }
        }
      }, {
        key: "publish",
        value: function (e, t) {
          if (this.isBridgeChannel(e)) console.warn("Forbidden operation. You are trying to write to a private channel (".concat(e, ")."));else {
            var n = this.manager.get(e),
                r = "".concat(e, "-publish");
            n.next(new CustomEvent(r, {
              detail: t
            }));
          }
        }
      }, {
        key: "unsubscribe",
        value: function (e, t) {
          if (e && t) {
            var n = Array.isArray(e) ? e : [e],
                r = this.subscriptors.get(t),
                i = function (e) {
              return n.includes(e.channel.name);
            },
                o = function (e) {
              return !(i(e) && !e.subscription.unsubscribe());
            };

            r.subscriptions = r.subscriptions.filter(o);
          }
        }
      }, {
        key: "unregisterComponent",
        value: function (e, t) {
          if (e) {
            var n = this.subscriptors.get(e);
            n && (n.unsubscribe(t), this.subscriptors.delete(e));
          }
        }
      }, {
        key: "unregisterAllSubscriptors",
        value: function (e) {
          this.subscriptors.forEach(function (t) {
            t.subscriptions.forEach(function (t) {
              return t.subscription.unsubscribe(e);
            });
          });
        }
      }, {
        key: "wrapEvent",
        value: function (e, t, n, r) {
          var i = this,
              o = ya.AFTER_PUBLISH,
              a = ya.NAV_REQUEST,
              s = ya.ROUTER_BACKSTEP,
              u = ya.TRACK_EVENT,
              c = ya.LOG_EVENT,
              l = function (e) {
            return i.bridge.featureFlagCollection.value(Je({
              defaultValue: !0
            }, e));
          },
              h = re(e, t);

          va.has(e) && (h = h.pipe(ue(function () {
            return va.get(e);
          })));
          var f = h.subscribe(function (t) {
            var h = i.adapterResolver.getNodeAdapter(e);

            if (h.isEventAtTarget(t)) {
              if (n.next(t), xi.emit(o, t), r && r.link && l(r.link.featureFlag)) {
                var f = Je({}, r.link);
                r.link.page && r.link.page.hasOwnProperty("bind") && (f.page = t.detail[r.link.page.bind]), xi.emit(a, {
                  event: t,
                  detail: f
                });
              }

              r && r.backStep && l(r.backStep.featureFlag) && xi.emit(s, {
                event: t,
                detail: {}
              }), r && r.analytics && l(r.analytics.featureFlag) && xi.emit(u, {
                event: t,
                detail: r.analytics
              }), r && r.log && l(r.log.featureFlag) && xi.emit(c, {
                event: t,
                detail: r.log
              }), i.wrapEventHandler && i.wrapEventHandler(t, r, n);
            }
          });
          return f.node = e, f.eventName = t, f.channelName = n.name, f;
        }
      }, {
        key: "createEvent",
        value: function (e, t) {
          var n = new Event(e);
          return n.detail = {
            value: t
          }, n;
        }
      }, {
        key: "isActiveBridgeChannel",
        value: function (e) {
          return this.isBridgeChannel(e) && this.manager.getUnsafe(e);
        }
      }, {
        key: "isBridgeChannel",
        value: function (e) {
          return this.bridgeChannelsPrefix.test(e);
        }
      }, {
        key: "hasSubscriptions",
        value: function (e, t) {
          return Boolean(e.subscriptions.find(function (e) {
            return e.channel.name === t;
          }));
        }
      }]), e;
    }(),
        ba = function () {
      function e(t, n) {
        ot(this, e), this.name = "", this.pattern = "", this.regexp = null, this.redirectPage = null, this.isAccessible = !0, this.name = t, this.pattern = n;
        var r = n.replace(e.PARAM, "([^/]+)").replace(e.TRAILING_SLASHES, "/*");
        this.regexp = new RegExp("^" + r + "$");

        for (var i, o = []; null !== (i = e.PARAM.exec(n));) o.push(i[1]);

        this.keys = o;
      }

      return st(e, [{
        key: "path",
        value: function t(n) {
          n = n || {}, this.params = {};

          for (var r, t = this.pattern; null !== (r = e.PARAM.exec(this.pattern));) t = t.replace(r[0], n[r[1]]), this.params[r[1]] = n[r[1]];

          var i = [];

          for (var o in n) this.params.hasOwnProperty(o) || i.push(o + "=" + encodeURIComponent(n[o]));

          return i.length && (t += "?" + i.join("&")), t;
        }
      }, {
        key: "matchPath",
        value: function (e) {
          return e.match(this.regexp);
        }
      }, {
        key: "parsePath",
        value: function (t) {
          var n = this.matchPath(t);
          if (this.params = {}, n) for (var r, i = 1; null !== (r = e.PARAM.exec(this.pattern));) this.params[r[1]] = this._parseParam(n[i]), i++;
        }
      }, {
        key: "parseQuery",
        value: function (e) {
          this.query = e;

          for (var t in this.query) this.query.hasOwnProperty(t) && (this.params[t] = this.query[t]);
        }
      }, {
        key: "is404",
        value: function () {
          return this.name === e._404_PAGE_NAME;
        }
      }, {
        key: "_isNumber",
        value: function (e) {
          return parseInt(e) + "" === e || parseFloat(e) + "" === e;
        }
      }, {
        key: "_parseParam",
        value: function (e) {
          return this._isNumber(e) && (e = +e), e;
        }
      }, {
        key: "handler",
        value: function () {}
      }]), e;
    }();

    ba.PARAM = /(?::([^/]+))/g, ba.TRAILING_SLASHES = /\/*$/, ba._404_PAGE_NAME = "404";

    var _a,
        Ea,
        ka,
        Ca = function (e) {
      function t(t, n, r) {
        var i = e.call(this) || this;
        return i.parent = t, i.outerValue = n, i.outerIndex = r, i.index = 0, i;
      }

      return z(t, e), t.prototype._next = function (e) {
        this.parent.notifyNext(this.outerValue, e, this.outerIndex, this.index++, this);
      }, t.prototype._error = function (e) {
        this.parent.notifyError(e, this), this.unsubscribe();
      }, t.prototype._complete = function () {
        this.parent.notifyComplete(this), this.unsubscribe();
      }, t;
    }(wo),
        wa = function (e) {
      return function (t) {
        return e.then(function (e) {
          t.closed || (t.next(e), t.complete());
        }, function (e) {
          return t.error(e);
        }).then(null, Y), t;
      };
    },
        Sa = ut(),
        Ta = function (e) {
      return function (t) {
        for (var n = e[Sa]();;) {
          var r = void 0;

          try {
            r = n.next();
          } catch (e) {
            return t.error(e), t;
          }

          if (r.done) {
            t.complete();
            break;
          }

          if (t.next(r.value), t.closed) break;
        }

        return "function" == typeof n.return && t.add(function () {
          n.return && n.return();
        }), t;
      };
    },
        Pa = function (e) {
      return function (t) {
        var n = e[To]();
        if ("function" != typeof n.subscribe) throw new TypeError("Provided object does not correctly implement Symbol.observable");
        return n.subscribe(t);
      };
    },
        Aa = function (e) {
      return e && "number" == typeof e.length && "function" != typeof e;
    },
        Oa = function (e) {
      if (e && "function" == typeof e[To]) return Pa(e);
      if (Aa(e)) return Ko(e);
      if (ct(e)) return wa(e);
      if (e && "function" == typeof e[Sa]) return Ta(e);
      var t = J(e) ? "an invalid object" : "'" + e + "'",
          n = "You provided " + t + " where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";
      throw new TypeError(n);
    },
        Ra = function (e) {
      function t() {
        return null !== e && e.apply(this, arguments) || this;
      }

      return z(t, e), t.prototype.notifyNext = function (e, t, n, r, i) {
        this.destination.next(t);
      }, t.prototype.notifyError = function (e, t) {
        this.destination.error(e);
      }, t.prototype.notifyComplete = function (e) {
        this.destination.complete();
      }, t;
    }(wo),
        Na = function () {
      function e(e, t) {
        void 0 === t && (t = Number.POSITIVE_INFINITY), this.project = e, this.concurrent = t;
      }

      return e.prototype.call = function (e, t) {
        return t.subscribe(new Ia(e, this.project, this.concurrent));
      }, e;
    }(),
        Ia = function (e) {
      function t(t, n, r) {
        void 0 === r && (r = Number.POSITIVE_INFINITY);
        var i = e.call(this, t) || this;
        return i.project = n, i.concurrent = r, i.hasCompleted = !1, i.buffer = [], i.active = 0, i.index = 0, i;
      }

      return z(t, e), t.prototype._next = function (e) {
        this.active < this.concurrent ? this._tryNext(e) : this.buffer.push(e);
      }, t.prototype._tryNext = function (e) {
        var t,
            n = this.index++;

        try {
          t = this.project(e, n);
        } catch (e) {
          return void this.destination.error(e);
        }

        this.active++, this._innerSub(t, e, n);
      }, t.prototype._innerSub = function (e, t, n) {
        var r = new Ca(this, t, n),
            i = this.destination;
        i.add(r);
        var o = lt(this, e, void 0, void 0, r);
        o !== r && i.add(o);
      }, t.prototype._complete = function () {
        this.hasCompleted = !0, 0 === this.active && 0 === this.buffer.length && this.destination.complete(), this.unsubscribe();
      }, t.prototype.notifyNext = function (e, t, n, r, i) {
        this.destination.next(t);
      }, t.prototype.notifyComplete = function (e) {
        var t = this.buffer;
        this.remove(e), this.active--, t.length > 0 ? this._next(t.shift()) : 0 === this.active && this.hasCompleted && this.destination.complete();
      }, t;
    }(Ra),
        xa = function () {
      function e(e, t) {
        this.compare = e, this.keySelector = t;
      }

      return e.prototype.call = function (e, t) {
        return t.subscribe(new Ma(e, this.compare, this.keySelector));
      }, e;
    }(),
        Ma = function (e) {
      function t(t, n, r) {
        var i = e.call(this, t) || this;
        return i.keySelector = r, i.hasKey = !1, "function" == typeof n && (i.compare = n), i;
      }

      return z(t, e), t.prototype.compare = function (e, t) {
        return e === t;
      }, t.prototype._next = function (e) {
        var t;

        try {
          var n = this.keySelector;
          t = n ? n(e) : e;
        } catch (e) {
          return this.destination.error(e);
        }

        var r = !1;
        if (this.hasKey) try {
          var i = this.compare;
          r = i(this.key, t);
        } catch (e) {
          return this.destination.error(e);
        } else this.hasKey = !0;
        r || (this.key = t, this.destination.next(e));
      }, t;
    }(wo),
        La = function () {
      function e() {
        St(this, e), this.navStack = [], this.skipNav = {};
      }

      return Pt(e, [{
        key: "addSkipNavigation",
        value: function (e) {
          e.skipHistory !== !0 && e.skipHistory !== !1 || (this.skipNav["".concat(e.from, ":").concat(e.to)] = e.skipHistory);
        }
      }, {
        key: "_reverseNavigation",
        value: function (e) {
          return {
            from: e.to,
            to: e.from
          };
        }
      }, {
        key: "isSkipNavigation",
        value: function (e) {
          return this.skipNav["".concat(e.from, ":").concat(e.to)] === !0;
        }
      }, {
        key: "lastNavigation",
        value: function () {
          var e,
              t,
              n = this.navStack.length;
          return 1 === n ? t = this.navStack[0] : n > 1 && (t = this.navStack[n - 1], e = this.navStack[n - 2]), this.createNavigation(e, t);
        }
      }, {
        key: "createRoute",
        value: function (e) {
          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
          return {
            page: e,
            params: t
          };
        }
      }, {
        key: "createNavigation",
        value: function (e, t) {
          return {
            from: e ? e.page : void 0,
            to: t ? t.page : void 0
          };
        }
      }, {
        key: "push",
        value: function (e) {
          this.top() && this.top().page === e.page || this.navStack.push(e);
        }
      }, {
        key: "replace",
        value: function (e) {
          this.top() && this.top().page === e.page || (this.navStack[this.navStack.length - 1] = e);
        }
      }, {
        key: "pop",
        value: function () {
          return this.navStack.pop();
        }
      }, {
        key: "top",
        value: function () {
          return this.navStack.length > 0 ? this.navStack[this.navStack.length - 1] : void 0;
        }
      }, {
        key: "isBackwardNavigation",
        value: function (e) {
          var t = this.lastNavigation();
          return t && e.from === t.to && e.to === t.from;
        }
      }, {
        key: "update",
        value: function (e, t) {
          var n = this.createNavigation(e, t);

          if (this.isBackwardNavigation(n)) {
            for (; this.isSkipNavigation(this._reverseNavigation(this.lastNavigation()));) this.pop();

            this.pop();
          } else this.push(t);

          return this.top();
        }
      }, {
        key: "clear",
        value: function () {
          this.navStack = [];
        }
      }, {
        key: "replaceRoute",
        value: function (e) {
          this.navStack.length > 0 ? this.navStack[this.navStack.length - 1] = e : this.push(e);
        }
      }, {
        key: "clearUntil",
        value: function (e) {
          if (this.navStack.find(function (t) {
            return t.page === e;
          })) {
            var t = null;

            do t = this.navStack.pop(); while (t && t.page != e);
          }
        }
      }, {
        key: "length",
        get: function () {
          return this.navStack.length;
        }
      }]), e;
    }(),
        ja = ko.EMPTY,
        Da = Qi.externalEventsCodes,
        Ba = null,
        Ua = !1,
        Fa = {},
        Va = function (e) {
      function t() {
        var e;
        return Lt(this, t), e = n.call(this), e._currentSubscription = ja, e;
      }

      Ft(t, e);
      var n = Ht(t);
      return Dt(t, [{
        key: "add",
        value: function (e) {
          this.closed || ("function" == typeof e && (e = new ko(e)), this._currentSubscription && (this.remove(this._currentSubscription), this._currentSubscription.unsubscribe(), this._currentSubscription = null), Bt(zt(t.prototype), "add", this).call(this, this._currentSubscription = e));
        }
      }]), t;
    }(ko),
        Ha = function () {
      function e() {
        var t = this;
        Lt(this, e);
        var n = Da.TEMPLATE_TRANSITION_END;
        return Ba || (Ba = this), this.navigationStack = this._createNavigationStack(), xi.on(n, function () {
          t.isNavigationInProgress = !1;
        }), Ba;
      }

      return Dt(e, [{
        key: "_createNavigationStack",
        value: function () {
          return new La();
        }
      }, {
        key: "handler",
        value: function (e) {}
      }, {
        key: "addRoute",
        value: function (e, t) {
          return this.routes[e] = new ba(e, t), this.routes[e];
        }
      }, {
        key: "addRoutes",
        value: function (e) {
          var t = {};

          for (var n in e) e.hasOwnProperty(n) && (t[n] = this.addRoute(n, e[n]));

          return t;
        }
      }, {
        key: "addSkipNavigations",
        value: function (e) {
          for (var t = 0; t < e.length; t++) this.navigationStack.addSkipNavigation(e[t]);
        }
      }, {
        key: "_getHashPath",
        value: function () {
          return location.hash.replace(e.HASH_PREFIX, "/").replace(e.EMPTY, "/");
        }
      }, {
        key: "_observeHashChange",
        value: function () {
          return re(window, "hashchange").pipe(ne(this._getHashPath), Ct(this._getHashPath()));
        }
      }, {
        key: "_getURLPath",
        value: function () {
          return location.pathname.replace(e.PATH_PREFIX, "/");
        }
      }, {
        key: "_observeStateChange",
        value: function () {
          return _t(re(window, "popstate"), re(window, "pushstate")).pipe(ne(this._getURLPath), Ct(this._getURLPath()));
        }
      }, {
        key: "matchRoute",
        value: function (e) {
          var t,
              n = e.split("?"),
              r = At(n, 2),
              i = r[0],
              o = r[1];
          o = this._parseQuery(o);

          for (var a in this.routes) if (this.routes.hasOwnProperty(a) && (t = this.routes[a], (!t.is404() || t.isAccessible) && t.matchPath(i))) return t.parsePath(i), t.parseQuery(o), t;
        }
      }, {
        key: "_parseQuery",
        value: function (e) {
          var t = {};

          if (e) {
            var n = e.split("&");

            if (n) {
              var r,
                  i,
                  o,
                  a = n.length;

              for (o = 0; o < a; o++) {
                var s = n[o].split("="),
                    u = At(s, 2);
                r = u[0], i = u[1], t[r] = decodeURIComponent(i);
              }
            }
          }

          return t;
        }
      }, {
        key: "_setup404",
        value: function () {
          var e = this.routes[ba._404_PAGE_NAME];

          if (e && "" !== e.pattern) {
            var t = this.getRouteWithPattern(e.pattern);
            e.redirectPage = t ? t.name : e.name, e.isAccessible = !t;
          }

          return e;
        }
      }, {
        key: "getRouteWithPattern",
        value: function (e) {
          for (var t in this.routes) if (this.routes.hasOwnProperty(t)) {
            var n = this.routes[t];
            if (!n.is404() && n.pattern === e) return n;
          }

          return null;
        }
      }, {
        key: "start",
        value: function () {
          var e = this;

          if (!_a) {
            var t = new Va();
            ka = this._setup404();
            var n = this.useHistory ? this._observeStateChange() : this._observeHashChange(),
                r = n.pipe(wt(), ne(this.matchRoute.bind(this)));
            r.forEach(function (n) {
              if (e.hashIsDirty) e.hashIsDirty = !1;else if (n) {
                var r = e.currentRoute ? e.currentRoute.name : void 0,
                    i = e.currentRoute ? e.currentRoute.params : void 0,
                    o = e.navigationStack.createRoute(r, i),
                    a = e.navigationStack.createRoute(n.name, n.params),
                    s = e.navigationStack.update(o, a).page;
                if (s !== a.page) return void e.go(s, void 0, !1);
                Ea = n;
                var u = new ko(function () {
                  return e.currentRoute;
                });
                t.add(u), e.currentRoute.handler(), e.handler(e.currentRoute);
              } else ka && ka.redirectPage && e.goReplacing(ka.redirectPage);
            }), _a = new ko(r, t);
          }

          return _a;
        }
      }, {
        key: "stop",
        value: function () {
          _a && (_a.unsubscribe(), _a = null), this.isNavigationInProgress = !1;
        }
      }, {
        key: "destroy",
        value: function () {
          this.stop(), this.routes = {};
        }
      }, {
        key: "getPath",
        value: function (e, t) {
          var n = this.routes[e];
          return n ? n.path(t) : void console.error("Wrong route name: %s, valid route names: %s", e, Object.keys(this.routes).join(", "));
        }
      }, {
        key: "newNavigation",
        value: function (e) {
          return {
            from: this.currentRoute ? this.currentRoute.name : void 0,
            to: e
          };
        }
      }, {
        key: "reverseNavigation",
        value: function (e) {
          return {
            from: e.to,
            to: e.from
          };
        }
      }, {
        key: "go",
        value: function (t, n, r, i) {
          if (!this.isNavigationInProgress) {
            if (void 0 !== i) {
              var o = this.newNavigation(t),
                  a = this.reverseNavigation(o);
              a.skipHistory = i, this.navigationStack.addSkipNavigation(a);
            }

            var s = t.replace(e.LTRIM_SLASH, ""),
                u = this.getPath(s, n);
            u !== this._getHashPath() && (this.isNavigationInProgress = !0, this.updatePathInBrowser(u, r));
          }
        }
      }, {
        key: "back",
        value: function () {
          var e = {};

          if (this.navigationStack.length > 1) {
            for (var t = this.navigationStack.pop(), n = t, r = this.getLastRoute(); this.navigationStack.isSkipNavigation({
              from: n.page,
              to: r.page
            }) && this.navigationStack.length > 1;) n = this.navigationStack.pop(), this.navigationStack.length > 0 && (r = this.getLastRoute());

            var i = r.page,
                o = r.params;
            e.from = t, e.to = r, this.go(i, o);
          } else e.from = this.getLastRoute(), e.to = this.getLastRoute();

          return e;
        }
      }, {
        key: "updatePathInBrowser",
        value: function (e, t) {
          this.useHistory ? t ? this.historyReplaceState(e) : this.historyPushState(e) : t ? this.locationReplace(e) : this.locationHash(e);
        }
      }, {
        key: "goReplacing",
        value: function (e, t) {
          this.go(e, t, !0);
        }
      }, {
        key: "historyReplaceState",
        value: function (e) {
          history.replaceState(null, null, e);
        }
      }, {
        key: "historyPushState",
        value: function (e) {
          history.pushState(null, null, e);
        }
      }, {
        key: "locationReplace",
        value: function (e) {
          location.replace("#!" + e);
        }
      }, {
        key: "locationHash",
        value: function (e) {
          location.hash = "#!" + e;
        }
      }, {
        key: "getLastRoute",
        value: function () {
          return this.navigationStack.top();
        }
      }, {
        key: "init",
        value: function () {
          this._clearStack();
        }
      }, {
        key: "_clearStack",
        value: function () {
          this.navigationStack.clear();
        }
      }, {
        key: "clearStackUntil",
        value: function (e) {
          this.navigationStack.clearUntil(e);
        }
      }, {
        key: "useHistory",
        set: function (t) {
          e.SUPPORTS_HISTORY_API && (Ua = t);
        },
        get: function () {
          return Ua;
        }
      }, {
        key: "routes",
        set: function (e) {
          Fa = e;
        },
        get: function () {
          return Fa;
        }
      }, {
        key: "currentRoute",
        get: function () {
          return Ea;
        },
        set: function (e) {
          Ea = e;
        }
      }]), e;
    }();

    Ha.SUPPORTS_HISTORY_API = window.history && "pushState" in window.history, Ha.PARAM = /(?::([^/]+))/g, Ha.LTRIM_SLASH = /^\/(\b)/, Ha.EMPTY = /^$/, Ha.HASH_PREFIX = /^#!?\/*/, Ha.PATH_PREFIX = /^\/*/, Ha.isNavigationInProgress = !1, Ha.hashIsDirty = !1;

    var Ga = Qi.externalEventsCodes,
        qa = function (e, t) {
      return function () {
        if (--e < 1) return t();
      };
    },
        Wa = function () {
      function e() {
        Kt(this, e);
      }

      return Jt(e, [{
        key: "_importElement",
        value: function (e, t, n) {
          var r = document.createElement("link");
          r.rel = "import", r.href = e + t, r.onload = n, r.onerror = n, r.setAttribute("async", ""), document.head.appendChild(r);
        }
      }, {
        key: "_importElementPromise",
        value: function (e, t) {
          var n = this;
          return new Promise(function (r) {
            n._importElement(e, t, r);
          });
        }
      }, {
        key: "loadBundleForLitElementPage",
        value: function (e) {
          return window.loadCellsPage(e);
        }
      }, {
        key: "loadBundleForTemplate",
        value: function (e, t, n) {
          var r = this;
          return new Promise(function (i) {
            var o = function () {
              n && n.call(r), i();
            };

            r._importElement(e, t + ".html", o);
          });
        }
      }, {
        key: "loadComponent",
        value: function (e, t, n) {
          var r = this,
              i = Ga.BEFORE_IMPORT,
              o = Ga.AFTER_IMPORT;
          return new Promise(function (a) {
            var s = function () {
              n && n.call(r), a();
            },
                u = e;

            if (Array.isArray(u) || (u = [e]), 0 === u.length) return void s();
            xi.emit(i);

            for (var c = qa(u.length, function () {
              xi.emit(o), s();
            }), l = 0; l < u.length; l++) {
              var h = u[l];

              r._importElement(t, h.spec.path, c);
            }
          });
        }
      }, {
        key: "loadComponentByPriority",
        value: function (e, t, n) {
          var r = this,
              i = Ga.BEFORE_IMPORT,
              o = Ga.AFTER_IMPORT,
              a = e;
          if (Array.isArray(a) || (a = [e]), 0 === a.length) return void (n && n.call(this));

          var s = this._createPriorityLists(a);

          xi.emit(i), this._chainElementLoading(t, s, 0).then(function () {
            xi.emit(o), n && n.call(r);
          });
        }
      }, {
        key: "_createSortedArratByPriorityAndUniqueElements",
        value: function (e) {
          return e.sort(function (e, t) {
            var n = e.priority || 1e3,
                r = t.priority || 1e3;
            return n === r ? e.spec.path <= t.spec.path ? -1 : 1 : n - r;
          }), e.filter(function (e, t, n) {
            return 0 === t || e.spec.path !== n[t - 1].spec.path;
          });
        }
      }, {
        key: "_createPriorityLists",
        value: function (e) {
          for (var t = this._createSortedArratByPriorityAndUniqueElements(e), n = t[0].priority, r = [[]], i = 0, o = 0; o < t.length; o++) {
            var a = t[o];
            a.priority === n ? r[i].push(a) : (n = a.priority, r.push([]), i = r.length - 1, r[i].push(a));
          }

          return r;
        }
      }, {
        key: "_chainElementLoading",
        value: function (e, t, n) {
          var r = this,
              i = [];
          if (t.length === n) return Promise.resolve();

          for (var o = 0; o < t[n].length; o++) i.push(this._importElementPromise(e, t[n][o].spec.path));

          var a = n + 1;
          return Promise.all(i).then(function () {
            return r._chainElementLoading(e, t, a);
          });
        }
      }]), e;
    }(),
        za = Wa,
        Ka = function (e) {
      function t(e) {
        var r;
        return $t(this, t), r = n.call(this), r.spec = e, r.spec.node = r.spec.node ? r.spec.node : r.createElement(r.spec.tagName), r;
      }

      en(t, e);
      var n = nn(t);
      return Zt(t, [{
        key: "setProps",
        value: function () {
          var e = this.spec;
          if (e.connections && e.connections.ignoreAttr) for (var t = 0; t < e.connections.ignoreAttr.length; t++) {
            var n = e.connections.ignoreAttr[t];
            delete e.properties[n];
          }
          this.setAttrs(this.node, e.properties);
        }
      }, {
        key: "type",
        get: function () {
          return this.spec.type;
        },
        set: function (e) {
          this.spec.type = e;
        }
      }, {
        key: "zone",
        get: function () {
          return this.spec.zone;
        },
        set: function (e) {
          this.spec.zone = e;
        }
      }, {
        key: "fixed",
        get: function () {
          return this.spec.fixed;
        },
        set: function (e) {
          this.spec.fixed = e;
        }
      }, {
        key: "container",
        get: function () {
          return this.spec.container;
        },
        set: function (e) {
          this.spec.container = e;
        }
      }, {
        key: "priority",
        get: function () {
          return this.spec.priority;
        },
        set: function (e) {
          this.spec.priority = e;
        }
      }, {
        key: "node",
        get: function () {
          return this.spec.node;
        },
        set: function (e) {
          this.spec.node = e;
        }
      }, {
        key: "connections",
        get: function () {
          return this.spec.connections;
        },
        set: function (e) {
          this.spec.connections = e;
        }
      }]), t;
    }(Zi),
        Ya = function (e) {
      function t() {
        var e, r;
        cn(this, t);

        for (var i = arguments.length, o = new Array(i), a = 0; a < i; a++) o[a] = arguments[a];

        return dn(r, (e = r = n.call.apply(n, [this].concat(o)), r.children = [], r.fixedChildren = [], r.type = "TEMPLATE", e));
      }

      fn(t, e);
      var n = vn(t);
      return hn(t, [{
        key: "getZone",
        value: function (e) {
          var t,
              n = this.node;
          return t = e ? n.$ && n.$[e] ? n.$[e] : n.querySelector("#" + e) : n, t || n;
        }
      }, {
        key: "cache",
        value: function () {
          this._setAttribute("state", "cached");
        }
      }, {
        key: "activate",
        value: function () {
          this._setAttribute("state", "active");
        }
      }, {
        key: "deactivate",
        value: function () {
          this._setAttribute("state", "inactive");
        }
      }, {
        key: "native",
        value: function () {
          this._setAttribute("state", "native");
        }
      }, {
        key: "resetNextNavigation",
        value: function () {
          this._getTemplate(this.node)._nextNavigation = void 0;
        }
      }, {
        key: "_setAttribute",
        value: function (e, t) {
          var n = this._getTemplate(this.node);

          n.setAttribute(e, t);
        }
      }, {
        key: "_getTemplate",
        value: function (e) {
          var t = e.tagName,
              n = t.toLowerCase().endsWith("-page");
          return n ? this._getCellsTemplateFromShadowRootChildNodes(e) : e;
        }
      }, {
        key: "_getCellsTemplateFromShadowRootChildNodes",
        value: function (e) {
          return Array.from(e.shadowRoot && e.shadowRoot.childNodes || []).find(function (e) {
            return e && e.tagName && e.tagName.toLowerCase().indexOf("cells-template") !== -1;
          });
        }
      }, {
        key: "_getContainerAndSlot",
        value: function (e) {
          var t = e,
              n = e;

          if (e) {
            var r = e.split(".");
            2 === r.length && (t = r[0], n = r[1]);
          }

          return {
            container: t,
            slot: n
          };
        }
      }, {
        key: "append",
        value: function (e) {
          if (e) {
            void 0 === e.length && (e = [e]);
            var t = e.filter(function (e) {
              return e.fixed !== !0;
            }),
                n = e.filter(function (e) {
              return e.fixed === !0;
            });
            this.fixedChildren = this.fixedChildren.concat(n), this.children = this.children.concat(e);

            for (var r = [], i = 0; i < t.length; i++) {
              var o = t[i],
                  a = this._getContainerAndSlot(o.zone),
                  s = a.container,
                  u = a.slot;

              o.node.setAttribute("data-select", u), o.node.setAttribute("slot", u), "object" !== un(r[s]) && (r[s] = this.getZone(s)), r[s].appendChild(o.node);
            }
          }
        }
      }, {
        key: "config",
        value: function (e) {
          var t = e.name,
              n = e.template,
              r = n.id,
              i = n.name;
          this.name = t, this.node.id = r, this.node.name = i, this.setProps();
        }
      }]), t;
    }(Ka),
        Ja = Qi.bindingCodes,
        Qa = Qi.externalEventsCodes,
        $a = function () {
      function e() {
        var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
        bn(this, e), this.cache = {}, this.templates = {}, this.selected = "", this.locations = [], this.size = 0, this.fixedTemplates = ["__cross"];
        var n = t.persistentPages || [];
        this.viewLimit = t.viewLimit && t.viewLimit >= 1 ? t.viewLimit : 3, this.fixedTemplates = this.fixedTemplates.concat(n), this.maxSize = this.viewLimit + this.fixedTemplates.length;
      }

      return En(e, [{
        key: "createTemplate",
        value: function (e, t) {
          var n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2],
              r = this.get(e);
          return r || (r = this._createCellsTemplate(e, t), this._storeTemplate(e, r, n)), r;
        }
      }, {
        key: "_createCellsTemplate",
        value: function (e, t) {
          var n = new Ya(t),
              r = this._createCellsTemplateConfig(e);

          return n.config(r), n;
        }
      }, {
        key: "_createCellsTemplateConfig",
        value: function (e) {
          return {
            name: e,
            template: {
              id: this.computeTemplateId(e),
              name: e
            }
          };
        }
      }, {
        key: "_storeTemplate",
        value: function (e, t, n) {
          var r = t.node;

          if (n) {
            var i = this.fixedTemplates.indexOf(e) === -1;

            if (i) {
              this.fixedTemplates.push(e), this.maxSize++;
              var o = this.maxSize === this.fixedTemplates.length;
              o && (this.maxSize += this.viewLimit);
            }
          }

          if (this.size >= this.maxSize) {
            var a = this._getOlderRemovableTemplate();

            a ? this.removeTemplate(a) : console.warn("No space left in template cache for template ", e);
          }

          this.locations.push(e), this.cache[e] = t, this.templates[e] = r, this.size++;
        }
      }, {
        key: "_getOlderRemovableTemplate",
        value: function () {
          for (var e, t = !1, n = 0; !t && n < this.locations.length; n++) {
            var r = this.fixedTemplates.indexOf(this.locations[n]) == -1;
            r && (e = this.locations[n], t = !0);
          }

          return e;
        }
      }, {
        key: "get",
        value: function (e) {
          return this.cache[e];
        }
      }, {
        key: "getNode",
        value: function (e) {
          return this.templates[e];
        }
      }, {
        key: "parseTemplateName",
        value: function (e) {
          return e;
        }
      }, {
        key: "computeTemplateId",
        value: function (e) {
          return "cells-template-" + e.replace(/\./g, "-");
        }
      }, {
        key: "select",
        value: function (e) {
          var t,
              n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : void 0,
              r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "always",
              i = Qa.TEMPLATE_TRANSITION_END,
              o = Ja.CURRENTVIEW,
              a = Ja.UI,
              s = this.get(e),
              u = this.cache;

          for (var c in u) u.hasOwnProperty(c) && (c === this.selected ? (t = c, u[c].deactivate()) : e !== c && u[c].cache());

          this.selected = e, s.activate(), n && r !== o && r !== a && (n.updateAppContext(t, e), n.initPrivateChannel(t, e)), xi.emit(i, s);
        }
      }, {
        key: "removeTemplate",
        value: function (e) {
          if (this.templates[e]) {
            var t = document.querySelector("#" + this.templates[e].id),
                n = this.locations.indexOf(e);
            this.locations.splice(n, 1), t.parentNode.removeChild(t), delete this.templates[e], delete this.cache[e], this.size--;
          }
        }
      }, {
        key: "removeTemplates",
        value: function (e, t) {
          for (var n in this.templates) this.templates.hasOwnProperty(n) && n !== e && n !== t && this.removeTemplate(n);
        }
      }, {
        key: "removeTemplateChildrens",
        value: function (e) {
          var t = this.templates[e];
          if (t) for (; t.firstChild;) t.removeChild(t.firstChild);
        }
      }]), e;
    }(),
        Xa = function () {
      function e() {
        return Error.call(this), this.message = "no elements in sequence", this.name = "EmptyError", this;
      }

      return e.prototype = Object.create(Error.prototype), e;
    }(),
        Za = Xa,
        es = function () {
      function e() {
        return Error.call(this), this.message = "argument out of range", this.name = "ArgumentOutOfRangeError", this;
      }

      return e.prototype = Object.create(Error.prototype), e;
    }(),
        ts = es,
        ns = function () {
      function e(e) {
        if (this.total = e, this.total < 0) throw new ts();
      }

      return e.prototype.call = function (e, t) {
        return t.subscribe(new rs(e, this.total));
      }, e;
    }(),
        rs = function (e) {
      function t(t, n) {
        var r = e.call(this, t) || this;
        return r.total = n, r.count = 0, r;
      }

      return z(t, e), t.prototype._next = function (e) {
        var t = this.total,
            n = ++this.count;
        n <= t && (this.destination.next(e), n === t && (this.destination.complete(), this.unsubscribe()));
      }, t;
    }(wo),
        is = function () {
      function e(e) {
        this.defaultValue = e;
      }

      return e.prototype.call = function (e, t) {
        return t.subscribe(new os(e, this.defaultValue));
      }, e;
    }(),
        os = function (e) {
      function t(t, n) {
        var r = e.call(this, t) || this;
        return r.defaultValue = n, r.isEmpty = !0, r;
      }

      return z(t, e), t.prototype._next = function (e) {
        this.isEmpty = !1, this.destination.next(e);
      }, t.prototype._complete = function () {
        this.isEmpty && this.destination.next(this.defaultValue), this.destination.complete();
      }, t;
    }(wo),
        as = function () {
      function e(e) {
        this.errorFactory = e;
      }

      return e.prototype.call = function (e, t) {
        return t.subscribe(new ss(e, this.errorFactory));
      }, e;
    }(),
        ss = function (e) {
      function t(t, n) {
        var r = e.call(this, t) || this;
        return r.errorFactory = n, r.hasValue = !1, r;
      }

      return z(t, e), t.prototype._next = function (e) {
        this.hasValue = !0, this.destination.next(e);
      }, t.prototype._complete = function () {
        if (this.hasValue) return this.destination.complete();
        var e = void 0;

        try {
          e = this.errorFactory();
        } catch (t) {
          e = t;
        }

        this.destination.error(e);
      }, t;
    }(wo),
        us = function () {
      function e(t) {
        Pn(this, e), this.componentConnector = t.ComponentConnector, this.privateChannels = new Set();
      }

      return On(e, [{
        key: "getAppContextChannelName",
        value: function () {
          return "__bridge_app";
        }
      }, {
        key: "getCancelledBackNavigationChannelName",
        value: function () {
          return "__bridge_cancelled_back_navigation";
        }
      }, {
        key: "getPrivateChannelPrefix",
        value: function () {
          return "__bridge_page_";
        }
      }, {
        key: "getEventChannelPrefix",
        value: function () {
          return "__bridge_evt_";
        }
      }, {
        key: "getBridgeChannelPrefix",
        value: function () {
          return "__bridge_ch_";
        }
      }, {
        key: "getPostMessageChannelPrefix",
        value: function () {
          return "__bridge_post_message_";
        }
      }, {
        key: "getBridgeChannel",
        value: function (e) {
          return this.componentConnector.manager.get(this.getBridgeChannelPrefix() + e);
        }
      }, {
        key: "getIdleCallbackChannel",
        value: function () {
          var e = Po.create(function (e) {
            return e.next(!0);
          });
          return e.pipe(Tn());
        }
      }, {
        key: "getAppContextChannel",
        value: function () {
          return this.componentConnector.manager.get(this.getAppContextChannelName());
        }
      }, {
        key: "getCancelledBackNavigationChannel",
        value: function () {
          return this.componentConnector.manager.get(this.getCancelledBackNavigationChannelName());
        }
      }, {
        key: "getPrivate",
        value: function (e) {
          var t = this.getPrivateChannelPrefix() + e,
              n = this.componentConnector.manager.get(t);
          return this.privateChannels.add(t), n;
        }
      }, {
        key: "getPostMessageChannel",
        value: function (e) {
          var t = this.getPostMessageChannelPrefix() + e;
          return this.componentConnector.manager.get(t);
        }
      }, {
        key: "initAppContextChannel",
        value: function () {
          this.getAppContextChannel();
        }
      }, {
        key: "initCancelledBackNavigationChannel",
        value: function () {
          this.getCancelledBackNavigationChannel();
        }
      }, {
        key: "initPrivateChannel",
        value: function (e, t) {
          this.publishPrivatePageStatus(t, !0), e && this.publishPrivatePageStatus(e, !1);
        }
      }, {
        key: "publishPrivatePageStatus",
        value: function (e, t) {
          var n = this.getPrivate(e),
              r = this.componentConnector.createEvent("page-load", t);
          n.next(r);
        }
      }, {
        key: "updateAppContext",
        value: function (e, t) {
          var n = this.componentConnector.createEvent("app-context", {
            currentPage: t,
            fromPage: e
          });
          this.getAppContextChannel().next(n);
        }
      }, {
        key: "publishCancelledBackNavigation",
        value: function (e) {
          var t = this.componentConnector.createEvent("back-nav-cancelled", e);
          this.getCancelledBackNavigationChannel().next(t);
        }
      }, {
        key: "isPrivateChannel",
        value: function (e) {
          return 0 === e.indexOf(this.getPrivateChannelPrefix());
        }
      }, {
        key: "isActivePrivateChannel",
        value: function (e) {
          return this.privateChannels.has(e);
        }
      }, {
        key: "resetBridgeChannels",
        value: function (e, t) {
          var n = this,
              r = Object.keys(this.componentConnector.manager.channels);
          r.forEach(function (e) {
            var t = n.componentConnector.manager.get(e);
            t.clean(), t.unsubscribeAll();
          }), this.componentConnector.unregisterComponent(e, t), this.componentConnector.unregisterAllSubscriptors(t), this.componentConnector.manager.cleanAllChannels();
        }
      }, {
        key: "initEventChannels",
        value: function (e, t) {
          var n = this;
          t.forEach(function (t) {
            var r = n.getEventChannelPrefix(),
                i = r + t,
                o = n.componentConnector.manager.get(i),
                a = re(e, t);
            a.subscribe(function (e) {
              return o.next(e);
            });
          });
        }
      }, {
        key: "subscribeToEvent",
        value: function (e, t, n) {
          var r = this.getEventChannelPrefix(),
              i = r + t,
              o = this.componentConnector.getSubscriptor(e),
              a = this.componentConnector.manager.get(i);
          n.node = e, o.subscribe(a, n);
        }
      }]), e;
    }(),
        cs = Qi.externalEventsCodes,
        ls = function () {
      function e(t) {
        Rn(this, e), this.bridge = t, this.PageManager = t.PageManager, this.ChannelManager = t.BridgeChannelManager, this.TemplateManager = t.TemplateManager;
      }

      return In(e, [{
        key: "subscribeAll",
        value: function () {
          var e = this;
          this.ChannelManager.getBridgeChannel("config").subscribe(function (t) {
            return e._configSubscriptor(t);
          }), this.ChannelManager.getBridgeChannel("locales").subscribe(function (t) {
            return e._localesSubscriptor(t);
          }), this.ChannelManager.getBridgeChannel("logout").subscribe(function (t) {
            return e._logoutSubscriptor(t);
          });
        }
      }, {
        key: "updateProperty",
        value: function (e, t) {
          this.isAllowedProperty(e) && (this.bridge[e] = t, window.AppConfig && (window.AppConfig[e] = t));
        }
      }, {
        key: "isAllowedProperty",
        value: function (e) {
          return "function" != typeof this.bridge[e];
        }
      }, {
        key: "_configSubscriptor",
        value: function (e) {
          var t = this,
              n = cs.TEMPLATE_REGISTERED,
              r = this.TemplateManager.selected;

          if (e.detail) {
            for (var i in e.detail) e.detail.hasOwnProperty(i) && this.updateProperty(i, e.detail[i]);

            (e.detail.app || e.detail.pagesPath) && (this.PageManager.clear(), this.TemplateManager.removeTemplates(r, this.bridge.crossContainerId), xi.once(n, function () {
              return t.TemplateManager.removeTemplate(r);
            }));
          }
        }
      }, {
        key: "_localesSubscriptor",
        value: function (e) {
          window.I18nMsg && e.detail && e.detail.lang && (window.I18nMsg.lang = e.detail.lang);
        }
      }, {
        key: "_logoutSubscriptor",
        value: function () {
          this.bridge.logout();
        }
      }]), e;
    }(),
        hs = function () {
      function e(t, n) {
        xn(this, e), this.componentConnector = t, this.composerEngine = n, this.segments = [], this.customGroups = [], this.normalizedCustomGroups = [];
      }

      return Ln(e, [{
        key: "init",
        value: function () {
          var e = this,
              t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
          this.initialParams = t, this.addParams(this.initialParams), this.componentConnector.get(this.getComposerEngineChannelName()).subscribe(function (t) {
            return e.handleFeatureFlags(t);
          });
        }
      }, {
        key: "getComposerEngineChannelName",
        value: function () {
          return "__composer_engine";
        }
      }, {
        key: "handleFeatureFlags",
        value: function (e) {
          var t = e.detail;
          this.addParams(t);
        }
      }, {
        key: "addParams",
        value: function (e) {
          this.addSegments(e.segments), this.addCustomGroups(e.customGroups);
        }
      }, {
        key: "addSegments",
        value: function () {
          var e = this,
              t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
          t.filter(function (t) {
            return !e.segments.includes(t);
          }).forEach(function (t) {
            return e.segments.push(t);
          });
        }
      }, {
        key: "addCustomGroups",
        value: function () {
          var e = this,
              t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
          t.forEach(function (t) {
            var n = e.customGroups.find(function (e) {
              return e.name === t.name;
            });
            n ? n.isConstant || (n.value = t.value) : e.customGroups.push(t);
          }), this.normalizedCustomGroups = this.normalizeCustomGroups(this.customGroups);
        }
      }, {
        key: "normalizeCustomGroups",
        value: function (e) {
          var t = this;
          return e.map(function (e) {
            return t.composerEngine.customGroup(e.name, JSON.stringify(e.value));
          });
        }
      }, {
        key: "getPage",
        value: function (e) {
          return this.composerEngine.getPageForAll(e, this.segments, this.normalizedCustomGroups);
        }
      }, {
        key: "reset",
        value: function () {
          this.segments = [], this.customGroups = [], this.init(this.initialParams);
        }
      }]), e;
    }(),
        fs = n(4),
        ps = n.n(fs),
        vs = n(1),
        ds = n.n(vs),
        gs = ds.a.get,
        ys = ds.a.set,
        ms = Qi.monitoring.SEMAAS,
        bs = ms.mrId,
        _s = ms.nameSpace,
        Es = ms.identifier,
        ks = ms.consumerId,
        Cs = ms.policy,
        ws = Qi.externalEventsCodes,
        Ss = ws.PAGE_READY,
        Ts = ws.PARSE_ROUTE,
        Ps = ws.AFTER_PUBLISH,
        As = ws.NAV_REQUEST,
        Os = ws.BEFORE_SET_ATTR_TO_NODE,
        Rs = ws.AFTER_SET_ATTR_TO_NODE,
        Ns = ws.BEFORE_CREATE_NODE,
        Is = ws.AFTER_CREATE_NODE,
        xs = ws.BEFORE_IMPORT,
        Ms = ws.AFTER_IMPORT,
        Ls = ws.PAGE_REQUEST,
        js = ws.PAGE_RESPONSE,
        Ds = ws.DATA_LOAD,
        Bs = ws.TEMPLATE_TRANSITION_END,
        Us = ws.TRACK_EVENT,
        Fs = ws.TEMPLATE_REGISTERED,
        Vs = ws.ROUTER_BACKSTEP,
        Hs = ws.LOG_EVENT,
        Gs = function () {
      function e(t) {
        Dn(this, e), this.bridge = null, this.application = null;
        var n = t.semaas,
            r = void 0 === n ? {} : n,
            i = t.logs;

        if (i) {
          var o = !1,
              a = this.getApplicationConfiguration(r);

          if (this.application = this.initilizeSEMaaSAdapter(a), o) {
            var s = this.getBridgeConfiguration(r);
            this.bridge = this.initilizeSEMaaSAdapter(s);
          }
        }
      }

      return Un(e, [{
        key: "getBridgeConfiguration",
        value: function (e) {
          var t = e.tsec2JWTEndpoint,
              n = e.region,
              r = e.dnsTld,
              i = e.version;
          return {
            policy: Cs,
            mrId: bs,
            nameSpace: _s,
            identifier: Es,
            consumerId: ks,
            tsec2JWTEndpoint: t,
            region: n,
            dnsTld: r,
            version: i
          };
        }
      }, {
        key: "getApplicationConfiguration",
        value: function (e) {
          var t = e.tsec2JWTEndpoint,
              n = e.policy,
              r = e.mrId,
              i = e.nameSpace,
              o = e.consumerId,
              a = e.region,
              s = e.dnsTld,
              u = e.version;
          return {
            policy: n,
            mrId: r,
            nameSpace: i,
            identifier: "application",
            consumerId: o,
            tsec2JWTEndpoint: t,
            region: a,
            dnsTld: s,
            version: u
          };
        }
      }, {
        key: "initilizeSEMaaSAdapter",
        value: function (e) {
          return new ps.a(e);
        }
      }, {
        key: "logBridge",
        value: function (e) {
          this.bridge.log(e);
        }
      }, {
        key: "logApplication",
        value: function (e) {
          this.application.log(e);
        }
      }, {
        key: "ingest",
        value: function (e) {
          this.application.ingest(e);
        }
      }, {
        key: "createSpan",
        value: function (e) {
          return this.application && this.application.createSpan(e);
        }
      }, {
        key: "createUUID",
        value: function () {
          return this.application && this.application.createUUID();
        }
      }, {
        key: "hasBridgeLoggingEnabled",
        value: function () {
          return !!this.bridge;
        }
      }, {
        key: "hasApplicationLoggingEnabled",
        value: function () {
          return !!this.application;
        }
      }, {
        key: "buildLog",
        value: function (e, t) {
          var n = t.detail,
              r = {
            message: "cells-bridge::".concat(e),
            properties: {}
          },
              i = jn({}, n, r);

          switch (e) {
            case Ss:
              var o = t.page,
                  a = t.components;
              i.properties = {
                page: o,
                components: a
              };
              break;

            case Ts:
              var s = t.name,
                  u = t.params,
                  c = t.pattern;
              i.properties = {
                route: s,
                params: u,
                pattern: c
              };
              break;

            case As:
              var l = t.event,
                  h = t.detail,
                  f = h.page,
                  p = l.detail;
              i.properties = {
                page: f,
                params: p
              };
              break;

            case Ls:
              var v = t.params,
                  d = t.url;
              i.properties = {
                params: v,
                url: d
              };
              break;

            case js:
              i.properties = jn({}, t);
              break;

            case Hs:
              var g = t.detail,
                  y = t.event,
                  m = g.message,
                  b = g.properties,
                  _ = y.detail;
              i.message = m, i.properties = this.unflattenData(b, _);
              break;

            case Ps:
            case Os:
            case Rs:
            case Ns:
            case Is:
            case xs:
            case Ms:
            case Ds:
            case Bs:
            case Us:
            case Fs:
            case Vs:
          }

          return i;
        }
      }, {
        key: "isBridgeLoggableEvent",
        value: function (e) {
          var t = [Ss, Ts, As, Ls, js];
          return t.includes(e);
        }
      }, {
        key: "unflattenData",
        value: function (e, t) {
          var n = {};
          return Object.keys(e).forEach(function (r) {
            var i = e[r],
                o = null;

            if (i instanceof Object) {
              var a = i.bind;
              o = gs(t, a);
            } else o = i;

            ys(n, r, o);
          }), n;
        }
      }]), e;
    }(),
        qs = {
      extend: Gn,
      defaultChangedCallback: Hn,
      BRIDGE_CHANNEL_KEY: fa
    },
        Ws = Wn,
        zs = function () {
      function e(t) {
        Kn(this, e), t.postMessageTargetOrigin ? "*" === t.postMessageTargetOrigin ? (this.enabled = !1, console.warn("For security reasons postMessageTargetOrigin can't be the wildcard '*'. See docs for more info. ")) : (this.enabled = !0, this.postMessageTargetOrigin = t.postMessageTargetOrigin) : this.enabled = !1, this.componentConnector = t.ComponentConnector, this.bridgeChannelManager = t.BridgeChannelManager;
      }

      return Jn(e, [{
        key: "setupPostMessages",
        value: function () {
          var e = this;
          this.enabled && (window.addEventListener("message", function (t) {
            var n = t.data;

            if (n.event) {
              var r = e.bridgeChannelManager.getPostMessageChannel(n.event),
                  i = e.componentConnector.createEvent(n.event, n.detail);
              r.next(i);
            }
          }), this._sendPostMessage({
            event: "__bridge-ready"
          }), this.bridgeChannelManager.getBridgeChannel("send_post_message").subscribe(function (t) {
            return e._sendPostMessage(t.detail);
          }));
        }
      }, {
        key: "_sendPostMessage",
        value: function (e) {
          window.parent && window.parent.postMessage({
            eventName: e.event,
            eventDetail: e.detail
          }, this.postMessageTargetOrigin);
        }
      }]), e;
    }(),
        Ks = zs,
        Ys = "__app_",
        Js = "config",
        Qs = function () {
      function e(t) {
        var n = t.ActionChannelManager;
        Qn(this, e), this.ActionChannelManager = n, this.storage = this._getAppConfigStorage();
      }

      return Xn(e, [{
        key: "_getAppConfigStorage",
        value: function () {
          return new to({
            prefix: Ys,
            persistent: !1
          });
        }
      }, {
        key: "saveAppConfig",
        value: function (e) {
          var t = {};

          for (var n in e) e.hasOwnProperty(n) && this.ActionChannelManager.isAllowedProperty(n) && (t[n] = e[n]);

          Object.keys(t).length > 0 && this.storage.setItem(Js, t);
        }
      }, {
        key: "loadAppConfig",
        value: function () {
          var e = this.storage.getItem(Js);

          for (var t in e) e.hasOwnProperty(t) && this.ActionChannelManager.updateProperty(t, e[t]);
        }
      }]), e;
    }(),
        $s = Qs,
        Xs = "__app_",
        Zs = "state",
        eu = function () {
      function e(t) {
        var n = t.ComponentConnector;
        Zn(this, e), this.ComponentConnector = n, this.storage = this._getAppStateStorage();
      }

      return tr(e, [{
        key: "_getAppStateStorage",
        value: function () {
          return new to({
            prefix: Xs,
            persistent: !1
          });
        }
      }, {
        key: "saveAppState",
        value: function (e, t) {
          var n = this.storage.getItem(Zs) || {};
          n[e] = t, this.storage.setItem(Zs, n);
        }
      }, {
        key: "loadAppState",
        value: function () {
          var e = this.storage.getItem(Zs);

          for (var t in e) this.ComponentConnector.publish(t, e[t]);
        }
      }]), e;
    }(),
        tu = eu,
        nu = co.dasherize,
        ru = co.camelize,
        iu = co.findProperty,
        ou = Qi.bindingCodes,
        au = Qi.binding,
        su = Qi.componentsPath,
        uu = Qi.composerEndpoint,
        cu = Qi.externalEvents,
        lu = Qi.externalEventsCodes,
        hu = Qi.initialTemplate,
        fu = Qi.pagesPath,
        pu = Qi.prplCodes,
        vu = Qi.prpl,
        du = Qi.preRenderState,
        gu = (Qi.renderEngines, au.DEFAULT),
        yu = vu.DEFAULT,
        mu = 0,
        bu = {},
        _u = function () {
      function e(t) {
        var n = this;
        ar(this, e), this.ComponentConnector = null, this.DomManager = null, this.ImportManager = null, this.PageManager = null, this.Router = null, this.TemplateManager = null, this.Sanitizer = null, this.BridgeChannelManager = null, this.binding = gu, this.prplLevel = yu, this.cache = !0, this.channel = "global", this.componentsPath = su, this.templatesPath = "", this.crossContainerId = "__cross", this.debug = !0, this.preCache = !1, this.preRender = !1, this.storagePrefix = "__bridge-", this.version = "3.13.2", this.viewLimit = 1e3, this.initialTemplate = hu, this.__mainNodeElement = null, this.externalEvents = cu, this.pages = [], this.pagesPath = fu, this.remoteTemplates = [], this.useComposerEngine = !1, this.appJson = "", this.appId = "", this.composerEndpoint = uu, this.templatesPath = "", this.monitoring = null, this.logs = !1, this.navRequestListener = null;
        var r = lu.NAV_REQUEST,
            i = lu.ROUTER_BACKSTEP;
        t && "object" === or(t) || (t = {}), t.prplLevel = this._normalizePrplLevel(t.prplLevel), this.preRenderingPages = {};
        var o = t.dependencies;
        delete t.dependencies, ir(this, t), this._initDependencies(o), "global" === this.channel && (this.ComponentConnector.manager.channels = bu), this.useComposerEngine && this._initComposerEngine(), this.mainNode ? this._plugExternalEvents() : console.warn("You should indicate the main node of your app"), t.featureFlag && (t.featureFlag.subscribe && this.featureFlagCollection.subscribe(t.featureFlag.subscribe), t.featureFlag.defaultChangedCallback && qs.defaultChangedCallback(t.featureFlag.defaultChangedCallback), t.featureFlag.defaultFeatures && this.featureFlagCollection.update({
          features: t.featureFlag.defaultFeatures
        }), t.featureFlag.src && fetch(t.featureFlag.src).then(function (e) {
          return e.json();
        }).then(function (e) {
          return n.featureFlagCollection.update(e);
        })), this.id = mu++, this._initCrossComponents(), this.cache && (this.PageManager.persistent = !0), this.generateRequestUrl && (console.assert("function" == typeof this.generateRequestUrl, "generateRequestUrl has to be a function"), this.PageManager.generateRequestUrl = this.generateRequestUrl), this.onPageDefinitionNotFound && (console.assert("function" == typeof this.onPageDefinitionNotFound, "onPageDefinitionNotFound has to be a function"), this.PageManager.onPageDefinitionNotFound = this.onPageDefinitionNotFound), this._sanitizePages(), window.$core = window.$core || [], this.debug ? (window.$core.push(this), this.printDebugInfo()) : window.$core.push({
          log: function (e) {
            return n.log(e);
          },
          ingest: function (e) {
            return n.ingest(e);
          },
          createSpan: function (e) {
            return n.createSpan(e);
          },
          createUUID: function () {
            return n.createUUID();
          },
          logout: function () {
            return n.logout();
          },
          subscribeToEvent: function (e, t) {
            return n.subscribeToEvent(e, t);
          },
          registerInConnection: function (e, t, r) {
            return n.registerInConnection(e, t, r);
          },
          unsubscribe: function (e, t) {
            return n.unsubscribe(e, t);
          },
          registerOutConnection: function (e, t, r) {
            return n.registerOutConnection(e, t, r);
          },
          publish: function (e, t, r) {
            return n.publish(e, t, r);
          },
          navigate: function (e, t) {
            return n.navigate(e, t);
          },
          updateApplicationConfig: function (e, t) {
            return n.updateApplicationConfig(e, t);
          },
          trackEvent: function (e) {
            return n.trackEvent(e);
          },
          navigateToNative: function (e, t) {
            return n.navigateToNative(e, t);
          },
          backStep: function () {
            return n.backStep();
          }
        }), window.cells = window.$core[0], this.BridgeChannelManager.initAppContextChannel(), this.BridgeChannelManager.getCancelledBackNavigationChannel(), this.ActionChannelManager.subscribeAll(), this._executePendingBridgeQueue(), this.ApplicationConfigManager.loadAppConfig(), this.ApplicationStateManager.loadAppState(), this.logs && this._logBridgeReady(), this.Router.handler = function () {
          return n.routeHandler();
        }, this.Router.addRoutes(this.routes), this._initSkipNavigations(), this.Router.start(), this.navRequestListener = function (e) {
          n.Router.hashIsDirty && (window.location.hash = "#!");
          var r = e.event,
              i = e.detail,
              o = i.page,
              a = i.params,
              s = i.skipHistory,
              u = i.cleanUntil,
              c = i.replace || !1,
              l = {};
          if (!o && i.paramPage && r.detail && (o = r.detail[i.paramPage]), r.detail && a) for (var h in a) a.hasOwnProperty(h) && (l[a[h]] = r.detail[h]);
          u && n.Router.clearStackUntil(u), n.Router.go(o, l, c, s), ir(n, t);
        }, xi.on(r, this.navRequestListener), xi.on(i, function (e) {
          return n.handleBack(e);
        }), this.PostMessageManager.setupPostMessages();
      }

      return ur(e, [{
        key: "_sanitizePages",
        value: function () {
          if (this.pages && !this.pageDefinitions) for (var e = 0; e < this.pages.length; e++) this.pages[e] = {
            name: this.pages[e],
            adapter: this.onlyLitElements ? "litElement" : "polymer"
          };else if (this.pages && this.pageDefinitions) for (var t = 0; t < this.pages.length; t++) this.pages[t] = this.pageDefinitions[t];
        }
      }, {
        key: "goBack",
        value: function () {
          return this.Router.back();
        }
      }, {
        key: "handleBack",
        value: function () {
          this.goBack();
        }
      }, {
        key: "_executePendingBridgeQueue",
        value: function () {
          var e = this;
          Array.isArray(window.cellsBridgeQueue) && (window.cellsBridgeQueue.forEach(function (t) {
            var n = t.command,
                r = t.parameters,
                i = e[n];
            return i ? (console.log("Executing queued command ".concat(n, ".")), void i.apply(e, r)) : void console.log("WARNING: Invalid cells bridge command execution: ".concat(n, " (QUEUE)."));
          }), delete window.cellsBridgeQueue);
        }
      }, {
        key: "_logBridgeReady",
        value: function () {
          var e = this.appId,
              t = this.version,
              n = this.binding,
              r = this.prplLevel,
              i = this.cache,
              o = this.preCache,
              a = this.preRender,
              s = "cells-bridge::ready",
              u = {
            appId: e,
            version: t,
            binding: n,
            href: window.location.href,
            prplLevel: r,
            cache: i,
            preCache: o,
            preRender: a
          },
              c = {
            message: s,
            properties: u
          };
          this.logBridge(c);
        }
      }, {
        key: "_initSkipNavigations",
        value: function () {
          if (this.skipNavigations && this.skipNavigations.length > 0) {
            for (var e = 0; e < this.skipNavigations.length; e++) this.skipNavigations[e].skipHistory = !0;

            this.Router.addSkipNavigations(this.skipNavigations);
          }
        }
      }, {
        key: "_normalizePrplLevel",
        value: function (e) {
          var t,
              n = vu.VALUES;
          return t = n.indexOf(e) > -1 ? e : n[e] || yu;
        }
      }, {
        key: "_dispatchEvent",
        value: function (e, t) {
          var n = this.getMainNode(),
              r = t ? new CustomEvent(e, {
            detail: t
          }) : new CustomEvent(e);
          n.dispatchEvent(r);
        }
      }, {
        key: "_plugExternalEvents",
        value: function () {
          var e = this,
              t = this.externalEvents.length,
              n = this.getMainNode();

          if (n) {
            for (var r = function (t) {
              var n = e.externalEvents[t];
              xi.on(n, function (t) {
                e._dispatchEvent(n, t), e.logs && e.monitor(n, t);
              });
            }, i = 0; i < t; i++) r(i);

            this._initEventChannels();
          } else console.warn("The defined main node does not exist");
        }
      }, {
        key: "trackEvent",
        value: function (e) {
          var t = lu.TRACK_EVENT;
          xi.emit(t, {
            detail: e
          });
        }
      }, {
        key: "monitor",
        value: function (e, t) {
          var n = lu.LOG_EVENT,
              r = e === n,
              i = r || this.isBridgeLoggableEvent(e);

          if (i) {
            var o = this.monitoring.buildLog(e, t),
                a = r ? "log" : "logBridge";
            this[a](o);
          }
        }
      }, {
        key: "isBridgeLoggableEvent",
        value: function (e) {
          return this.monitoring.isBridgeLoggableEvent(e);
        }
      }, {
        key: "log",
        value: function (e) {
          this.hasApplicationLoggingEnabled() && this.monitoring.logApplication(e);
        }
      }, {
        key: "logBridge",
        value: function (e) {
          this.hasBridgeLoggingEnabled() && this.monitoring.logBridge(e);
        }
      }, {
        key: "ingest",
        value: function (e) {
          this.hasApplicationLoggingEnabled() && this.monitoring.ingest(e);
        }
      }, {
        key: "createSpan",
        value: function (e) {
          return this.hasApplicationLoggingEnabled() ? this.monitoring.createSpan(e) : {
            start: function () {},
            finish: function () {}
          };
        }
      }, {
        key: "createUUID",
        value: function () {
          return this.monitoring.createUUID();
        }
      }, {
        key: "hasBridgeLoggingEnabled",
        value: function () {
          return this.monitoring.hasBridgeLoggingEnabled();
        }
      }, {
        key: "hasApplicationLoggingEnabled",
        value: function () {
          return this.monitoring.hasApplicationLoggingEnabled();
        }
      }, {
        key: "_initEventChannels",
        value: function () {
          var e = this.getMainNode();
          this.BridgeChannelManager.initEventChannels(e, this.externalEvents), this._addInitialSubscribersToEvents();
        }
      }, {
        key: "_addInitialSubscribersToEvents",
        value: function () {
          this.eventSubscriptions && this.eventSubscriptions.length > 0 && this._subscribeToEvents(this.eventSubscriptions);
        }
      }, {
        key: "_subscribeToEvents",
        value: function (e) {
          var t = this;
          e.forEach(function (e) {
            var n = e.event,
                r = e.callback;
            t.subscribeToEvent(n, r);
          });
        }
      }, {
        key: "_initCrossComponents",
        value: function () {
          var e = this.TemplateManager.computeTemplateId(this.crossContainerId),
              t = this.TemplateManager.get(e),
              n = document.getElementById(e);
          t || (n ? this.TemplateManager.createTemplate(this.crossContainerId, {
            node: n
          }) : (t = this.TemplateManager.createTemplate(this.crossContainerId, {
            tagName: "div"
          }), document.body.appendChild(t.node)));
        }
      }, {
        key: "_initDependencies",
        value: function (e) {
          e = ir({
            ComponentConnector: ma,
            DomManager: Zi,
            ImportManager: za,
            TemplateManager: $a,
            PageManager: po,
            Router: Ha,
            Sanitizer: ho,
            BridgeChannelManager: us,
            ActionChannelManager: ls,
            monitoring: Gs,
            featureFlagCollection: da,
            PostMessageManager: Ks,
            ApplicationConfigManager: $s,
            ApplicationStateManager: tu
          }, e);

          for (var t in e) e.hasOwnProperty(t) && (this[t] = new e[t](this));
        }
      }, {
        key: "_initComposerEngine",
        value: function () {
          this.composerEngine = new hs(this.ComponentConnector.manager, composerEngine), this.composerEngine.init(), this.PageManager.composerEngine = this.composerEngine;
        }
      }, {
        key: "_createCellsComponent",
        value: function (e, t) {
          var n = new Ka(e, t);
          return e.featureFlag && qs.extend(n, this), n;
        }
      }, {
        key: "createCCComponent",
        value: function (e) {
          var t = this.TemplateManager.get(this.crossContainerId),
              n = t.node.querySelector(e.tagName);

          if (!n) {
            var r = this._createCellsComponent(e, this);

            return r.__parentTemplate = t, this.ComponentConnector.registerComponent(r), r;
          }

          this.ComponentConnector.progressiveRegisterConnections(n, e.connections);
        }
      }, {
        key: "createUIComponent",
        value: function (e) {
          var t = ou.ALWAYS,
              n = ou.DELAYED,
              r = ou.UI,
              i = this.binding,
              o = this._createCellsComponent(e, this);

          return i !== t && i !== n && i !== r || this.ComponentConnector.registerComponent(o), o;
        }
      }, {
        key: "createDMComponent",
        value: function (e) {
          var t = ou.ALWAYS,
              n = ou.DELAYED,
              r = this.binding,
              i = this._createCellsComponent(e, this);

          return r !== t && r !== n || this.ComponentConnector.registerComponent(i), i;
        }
      }, {
        key: "createComponentsByType",
        value: function (e, t) {
          var n = this;
          return [].concat(e.CC.map(function (e) {
            return n.createCCComponent(e);
          })).concat(e.UI.map(function (e) {
            return n.createUIComponent(e);
          })).concat(e.DM.map(function (e) {
            return n.createDMComponent(e);
          })).filter(function (e) {
            return void 0 != e;
          }).map(function (e) {
            return e.__parentTemplate = e.__parentTemplate || t, e;
          });
        }
      }, {
        key: "_insideLayout",
        value: function (e) {
          return void 0 != e && 2 === e.split(".").length;
        }
      }, {
        key: "_createComponents",
        value: function (e, t) {
          var n = this,
              r = arguments.length > 2 && void 0 !== arguments[2] && arguments[2],
              i = lu.PAGE_READY,
              o = e.page,
              a = this,
              s = this.Sanitizer.split(e.components),
              u = this.createComponentsByType(s, t),
              c = [],
              l = [],
              h = iu("featureFlag");
          u.map(function (e) {
            return h(e.spec.connections);
          }).forEach(this.featureFlagCollection.add, this.featureFlagCollection);
          var f = u.filter(function (e) {
            return n._insideLayout(e.zone);
          });
          u = u.filter(function (e) {
            return !n._insideLayout(e.zone);
          }), u = u.concat(f);

          for (var p = 0, v = u.length; p < v; p++) {
            u[p].setProps();
            var d = u[p],
                g = d.__parentTemplate.name;
            l[g] || (l[g] = this.TemplateManager.get(g)), l[g].append(d);
            var y = this.ComponentConnector.adapterResolver.getComponentAdapter(d);
            y.isUnresolved(d.node) && c.push(d);
          }

          switch (xi.emit(i, {
            page: o,
            components: e.components.map(function (e) {
              return e.tagName;
            }).join(", ")
          }), this.prplLevel) {
            case pu.NONE:
            case pu.DEFER:
              this.ImportManager.loadComponent(c, a.componentsPath).then(function () {
                n.selectTemplate(o, r);
              });
              break;

            case pu.PROGRESSIVE:
              this.ImportManager.loadComponent(c, a.componentsPath);
              break;

            case pu.HERO:
              this.selectTemplate(o, r), this.ImportManager.loadComponentByPriority(c, a.componentsPath);
          }
        }
      }, {
        key: "createPageFromWebComponent",
        value: function (e) {
          var t = e.name,
              n = "".concat(t, "-page"),
              r = this.TemplateManager.getNode(t);

          if (this.BridgeChannelManager.getPrivate(t), !r) {
            r = this.TemplateManager.createTemplate(t, {
              tagName: n
            });
            var i = this.ComponentConnector.adapterResolver.getAdapterByName(e.adapter);

            if (i.isUnresolved(r.node)) {
              if ("polymer" === e.adapter) return this.loadPolymerWebComponent(t);
              if (window.loadCellsPage) return this.ImportManager.loadBundleForLitElementPage(t);
            }
          }

          return Promise.resolve();
        }
      }, {
        key: "_isLocalTemplate",
        value: function (e) {
          var t = !0;
          return this.composerEndpoint && this.remoteTemplates && (t = this.remoteTemplates.indexOf(e) === -1), t;
        }
      }, {
        key: "createTemplate",
        value: function (e) {
          var t = this,
              n = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
              r = e,
              i = e.page,
              o = this.TemplateManager.getNode(i),
              a = this.composerEngine && !this.PageManager._isLocalComposer(i);
          if (this.BridgeChannelManager.getPrivate(i), !n && this.preRenderingPages[i]) return void (this.preRenderingPages[i] = du.REQUESTED);
          if (o && !a) this.selectTemplate(i, n);else if (r && r.template) if (this.prplLevel === pu.DEFER && this._isLocalTemplate(i)) {
            if (this.onlyLitElements) {
              var s = this.initialBundle.map(function (e) {
                return e.replace("-page.html", "").replace(".json", "").replace("-page.js", "");
              }),
                  u = s.indexOf(i) > -1,
                  c = !u && r.components.filter(function (e) {
                return "litElement" === e.render;
              }).length > 0,
                  l = r.components.filter(function (e) {
                return "polymer" === e.render;
              }).length > 0;
              window.loadCellsPage && c && l ? window.loadCellsPage(i).then(function () {
                t.ImportManager.loadBundleForTemplate(t.componentsPath, i).then(function () {
                  t._createTemplateFromSpec(i, r, n);
                });
              }) : window.loadCellsPage && c && !l ? window.loadCellsPage(i).then(function () {
                return t._createTemplateFromSpec(i, r, n);
              }) : this.ImportManager.loadBundleForTemplate(this.componentsPath, i).then(function () {
                t._createTemplateFromSpec(i, r, n);
              });
            } else this.ImportManager.loadBundleForTemplate(this.componentsPath, i).then(function () {
              t._createTemplateFromSpec(i, r, n);
            });
          } else this._createTemplateFromSpec(i, r, n);

          this._preRender(e, n);
        }
      }, {
        key: "_preRender",
        value: function (e, t) {
          var n = this;
          if ((this.preCache === !0 || this.preRender === !0) && e.pages) for (var r in e.pages) if (e.pages.hasOwnProperty(r)) {
            var i = r === name || this.TemplateManager.cache[r];
            if (i) continue;
            this.preRender && t === !1 && (this.preRenderingPages[r] = du.WORKING), this.loadTemplate(r).then(function (e) {
              if (n.preRender && t === !1) {
                var r = !0;
                e.page ? n._idleCallback(function () {
                  return n.createTemplate(e, r);
                }) : console.warn("Missing page. ", e);
              }
            });
          }
        }
      }, {
        key: "_createTemplateFromSpec",
        value: function (e, t) {
          var n = this,
              r = arguments.length > 2 && void 0 !== arguments[2] && arguments[2],
              i = this.TemplateManager.createTemplate(e, t.template, r);
          this.prplLevel === pu.PROGRESSIVE && this.selectTemplate(e, r), this.ComponentConnector.registerComponent(i), t.pages && this.Router.addRoutes(t.pages);
          var o = this.ComponentConnector.adapterResolver.getComponentAdapter(i);
          if (o.isUnresolved(i.node)) switch (this.prplLevel) {
            case pu.NONE:
            case pu.DEFER:
              this.ImportManager.loadComponent(i, this.componentsPath).then(function () {
                n._createComponents(t, i, r);
              });
              break;

            case pu.PROGRESSIVE:
            case pu.HERO:
              this._createComponents(t, i, r);

          } else this._createComponents(t, i, r);
        }
      }, {
        key: "computeTemplateId",
        value: function (e) {
          return "cells-template-" + e.replace(/\./g, "-");
        }
      }, {
        key: "parse",
        value: function (e, t) {
          return e = ru("parse-" + e), "function" == typeof this[e] ? this[e](t) : t;
        }
      }, {
        key: "printDebugInfo",
        value: function () {
          var e = function (e, t) {
            var n = e ? t : "#b0bec5";
            return "background:".concat(n, "; color:#fff; padding:2px 4px; margin-right: 5px;");
          };

          console.log("%cbridge version: ".concat(this.version, " %cbinding: ").concat(this.binding, " %cprplLevel: ").concat(this.prplLevel, " %ccache: ").concat(this.cache, " %cpreCache: ").concat(this.preCache, " %cpreRender: ").concat(this.preRender, " %clogs: ").concat(this.logs), e(this.version, "#003f8d"), e(this.binding, "#0065ba"), e(this.prplLevel, "#008ff2"), e(this.cache, "#0093e2"), e(this.preCache, "#00aeeb"), e(this.preRender, "#41cef8"), e(this.logs, "#0025ad")), this.id > 0 && console.log("%cWARNING: There are ".concat(this.id + 1, " simultaneous instances of the Bridge running."), e(this.id, "#FF0000"));
        }
      }, {
        key: "routeHandler",
        value: function () {
          var e = lu.PARSE_ROUTE,
              t = this.Router.currentRoute;
          xi.emit(e, t), this._handleRouteLoading(t);

          for (var n in t.params) if (t.params.hasOwnProperty(n)) {
            var r = {
              detail: {
                value: t.params[n]
              },
              type: nu(n) + "-changed"
            };
            this.ComponentConnector.manager.get(n).next(r);
          }
        }
      }, {
        key: "getRoutableComponent",
        value: function (e) {
          var t = this.pages.filter(Boolean).filter(function (t) {
            return t.name === e.name;
          });
          return t ? t[0] : void 0;
        }
      }, {
        key: "loadTemplate",
        value: function (e, t) {
          var n = this.cache,
              r = this.method,
              i = this.body,
              o = this.headers,
              a = this.app,
              s = this.templatesPath,
              u = {
            cache: n,
            params: t,
            method: r,
            body: i,
            headers: o
          },
              c = {
            app: a,
            templates: s
          };
          return this.PageManager.get(e, u, c);
        }
      }, {
        key: "loadPolymerWebComponent",
        value: function (e) {
          var t = Array(2).fill("".concat(e, "-page")).join("/"),
              n = {
            spec: {
              path: "".concat(t, ".html")
            }
          };
          return this.ImportManager.loadComponent(n, this.pagesPath);
        }
      }, {
        key: "_handleRouteLoading",
        value: function (e) {
          var t = this,
              n = this.getRoutableComponent(e);
          n ? this.createPageFromWebComponent(n).then(function () {
            return t.selectPage(e.name, e.params);
          }) : this.loadTemplate(e.name, e.params).then(function (e) {
            return t.createTemplate(e);
          });
        }
      }, {
        key: "registerCurrentTemplate",
        value: function (e, t) {
          var n = lu.TEMPLATE_REGISTERED,
              r = ou.UI,
              i = this;
          t && t !== e && this.unregisterChildren(t, i.binding === r ? "DM" : null), this.registerChildren(e, i.binding === r ? "DM" : null), this._updateChannels(t, e), xi.emit(n, {
            template: e.name
          });
        }
      }, {
        key: "_updateChannels",
        value: function (e, t) {
          if (this.BridgeChannelManager) {
            var n = e ? e.name : void 0;
            this.BridgeChannelManager.updateAppContext(n, t.name), this.BridgeChannelManager.initPrivateChannel(n, t.name);
          }
        }
      }, {
        key: "registerChildren",
        value: function (e, t) {
          for (var n = 0; n < e.children.length; n++) {
            var r = e.children[n];
            (t && t === r.type || !t) && this.ComponentConnector.registerComponent(r);
          }
        }
      }, {
        key: "unregisterChildren",
        value: function (e, t) {
          for (var n = 0; n < e.children.length; n++) {
            var r = e.children[n];
            (t && t === r.type || !t) && this.ComponentConnector.unregisterComponent(r.node);
          }
        }
      }, {
        key: "registerInConnection",
        value: function (e, t, n) {
          this.ComponentConnector.addSubscription(e, t, n);
        }
      }, {
        key: "registerOutConnection",
        value: function (e, t, n) {
          this.ComponentConnector.addPublication(e, t, n);
        }
      }, {
        key: "unsubscribe",
        value: function (e, t) {
          this.ComponentConnector.unsubscribe(e, t);
        }
      }, {
        key: "publish",
        value: function (e, t) {
          var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {},
              r = n.sessionStorage;
          this.ComponentConnector.publish(e, t), r === !0 && this.ApplicationStateManager.saveAppState(e, t);
        }
      }, {
        key: "updateApplicationConfig",
        value: function (e) {
          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
              n = t.sessionStorage,
              r = "__bridge_ch_config";
          this.publish(r, e), n === !0 && this.ApplicationConfigManager.saveAppConfig(e);
        }
      }, {
        key: "navigate",
        value: function (e, t) {
          this.Router.go(e, t);
        }
      }, {
        key: "navigateToNative",
        value: function (e, t) {}
      }, {
        key: "backStep",
        value: function () {}
      }, {
        key: "_waitRenderComplete",
        value: function (e) {
          return e.node.updateComplete || Promise.resolve();
        }
      }, {
        key: "selectPage",
        value: function (e, t) {
          var n = this,
              r = lu.TEMPLATE_REGISTERED,
              i = this.TemplateManager.get(e),
              o = this.TemplateManager.get(this.TemplateManager.selected),
              a = o ? o.name : null;
          this.onRender && this.onRender(i.node), rr(regeneratorRuntime.mark(function o() {
            return regeneratorRuntime.wrap(function (o) {
              for (;;) switch (o.prev = o.next) {
                case 0:
                  return o.next = 2, n._waitRenderComplete(i);

                case 2:
                  n._handleParams(i.node, t), n.TemplateManager.select(e, n.BridgeChannelManager, n.binding), n.BridgeChannelManager && (n.BridgeChannelManager.updateAppContext(a, e), n.BridgeChannelManager.initPrivateChannel(a, e)), xi.emit(r, {
                    template: e
                  });

                case 6:
                case "end":
                  return o.stop();
              }
            }, o);
          }))();
        }
      }, {
        key: "_handleParams",
        value: function (e, t) {
          var n = e.params && Object.keys(t).length > 0;
          n && (e.params = t);
        }
      }, {
        key: "selectTemplate",
        value: function (e) {
          var t = this,
              n = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
              r = lu.TEMPLATE_TRANSITION_END,
              i = ou.CURRENTVIEW,
              o = ou.UI,
              a = ou.DELAYED,
              s = this,
              u = this.TemplateManager.get(e),
              c = n !== !0 || this.preRenderingPages[e] === du.REQUESTED;

          if ((s.binding === i || s.binding === o) && c) {
            var l = this.TemplateManager.get(this.TemplateManager.selected),
                h = function () {
              return t.registerCurrentTemplate(u, l);
            };

            u.node.animationCompleteEvent ? xi.listenToOnce(u.node, u.node.animationCompleteEvent, h) : xi.once(r, h);
          }

          if (s.onRender && (u.fixedChildren.length > 0 ? s.onRender(u.node, u.fixedChildren) : s.onRender(u.node)), n && delete this.preRenderingPages[e], c) {
            var f = function () {
              return t.TemplateManager.select(e, t.BridgeChannelManager, s.binding);
            };

            s.binding === a ? this._idleCallback(f) : f();
          }
        }
      }, {
        key: "_idleCallback",
        value: function (e) {
          this.BridgeChannelManager.getIdleCallbackChannel().subscribe(e);
        }
      }, {
        key: "subscribeToEvent",
        value: function (e, t) {
          if (this.externalEvents.indexOf(e) < 0) return void console.warn("Trying to subscribe to a non existing event: ", e);
          if ("function" != typeof t) return void console.warn("You must provide a function callback to subscribe to the event: ", e);
          var n = this.getMainNode();
          this.BridgeChannelManager.subscribeToEvent(n, e, t);
        }
      }, {
        key: "getMainNode",
        value: function () {
          return this.__mainNodeElement || (this.__mainNodeElement = document.querySelector("#" + this.mainNode)), this.__mainNodeElement;
        }
      }, {
        key: "_resetBridgeChannels",
        value: function () {
          var e = !0;
          this.BridgeChannelManager.resetBridgeChannels(this.getMainNode(), e);
        }
      }, {
        key: "logout",
        value: function () {
          this.TemplateManager.selected !== this.initialTemplate && (this.BridgeChannelManager.publishPrivatePageStatus(this.TemplateManager.selected, !1), this._resetBridgeChannels(), this.TemplateManager.removeTemplateChildrens(this.crossContainerId), this.TemplateManager.removeTemplates(void 0, this.crossContainerId), this.ActionChannelManager.subscribeAll(), this._initEventChannels(), this.composerEngine && this.composerEngine.reset(), this.Router.init(), this.Router.go(this.initialTemplate));
        }
      }]), e;
    }(),
        Eu = {
      SYNC_CHANNELS_DATA: "channels",
      RESET_CHANNELS_DATA: "reset-channels",
      NATIVE: {
        BACK_STEP: "back",
        NAVIGATION: "nav",
        RESET_WEBVIEW: "reset-webview",
        LOGOUT: "logout",
        UPDATE_SKIP_NAVIGATIONS: "skip-nav"
      },
      HTML: {
        BACK_STEP: "pop",
        NAVIGATION: "push",
        NAVIGATION_AND_REPLACE: "popAndPush",
        BRIDGE_READY: "bridgeReady",
        PAGE_LOADED: "pageLoaded",
        PAGE_UNLOADED: "pageUnloaded"
      }
    },
        ku = {
      NATIVE_CHANNEL_SYNC: "native-channel-sync",
      NATIVE_BACKSTEP_REQUEST: "native-backstep-request",
      NATIVE_NAVIGATION_REQUEST: "native-nav-request",
      INTERNAL_ROUTER_NAVIGATION: "nav-request",
      INTERNAL_ROUTER_BACKSTEP: "backstep",
      INTERNAL_ROUTER_BACKSTEP_FROM_NATIVE: "backstep-from-native",
      ROUTER_BACKSTEP: "backstep-request",
      ROUTER_NAVIGATION: "external-nav-request",
      RESET_WEBVIEW: "reset-webview",
      NATIVE_LOGOUT: "native-logout",
      UPDATE_SKIP_NAVIGATIONS: "update-skip-navigations",
      SYNC_CHANNELS_DATA: "sync-channels-data",
      PRIVATE: {
        SYNC_CHANNELS_DATA: "__cells-data-sync",
        ROUTER_NAVIGATION: "__cells-nav-request"
      }
    },
        Cu = {
      NATIVE_CHANNEL: "NativeBridge",
      NATIVE_PLUGIN_CHANNEL: "PluginBridge"
    },
        wu = {
      NATIVE_ROUTE: "cells-native-route:",
      PRIVATE_CHANNEL: "__bridge_"
    },
        Su = {
      SUCCESS: 0,
      ERROR: 1
    },
        Tu = {
      SUCCESS_ACCESSOR: "success",
      FAIL_ACCESSOR: "fail"
    },
        Pu = ku.PRIVATE,
        Au = function (e) {
      function t() {
        return lr(this, t), n.apply(this, arguments);
      }

      pr(t, e);
      var n = dr(t);
      return fr(t, [{
        key: "handleI18n",
        value: function (e) {
          this.manager.get("".concat(this.getNativeEventChannelPrefix(), "locales")).subscribe(e);
        }
      }, {
        key: "handleConfig",
        value: function (e) {
          this.manager.get("".concat(this.getNativeEventChannelPrefix(), "config")).subscribe(e);
        }
      }, {
        key: "handleAppLoad",
        value: function (e) {
          this.manager.get("".concat(this.getNativeEventChannelPrefix(), "app_loaded")).subscribe(e);
        }
      }, {
        key: "handleAppContextChange",
        value: function (e) {
          this.manager.get(this.getAppContextChannelName()).subscribe(e);
        }
      }, {
        key: "getNativeEventChannelPrefix",
        value: function () {
          return "__native_bridge_evt_";
        }
      }, {
        key: "getAppContextChannelName",
        value: function () {
          return "__bridge_app";
        }
      }, {
        key: "getChannels",
        value: function () {
          var e = this._getPublicChannels(this.manager.channels);

          return e.filter(this._isValidChannel.bind(this));
        }
      }, {
        key: "getChannel",
        value: function (e) {
          return this._getChannel(e, this.manager.channels);
        }
      }, {
        key: "getAllChannels",
        value: function () {
          var e = this._getChannels(this.manager.channels);

          return e.filter(this._isValidChannel.bind(this));
        }
      }, {
        key: "_getChannels",
        value: function (e) {
          var t = this,
              n = Object.keys(e);
          return n.map(function (n) {
            return t._getChannel(n, e);
          });
        }
      }, {
        key: "_getPublicChannels",
        value: function (e) {
          var t = this,
              n = Object.keys(e),
              r = n.filter(this._isPublicChannel);
          return r.map(function (n) {
            return t._getChannel(n, e);
          });
        }
      }, {
        key: "_isPublicChannel",
        value: function (e) {
          return !e.startsWith(wu.PRIVATE_CHANNEL);
        }
      }, {
        key: "_getChannel",
        value: function (e, t) {
          var n = t[e];
          return {
            name: e,
            payload: this._getChannelPayload(n)
          };
        }
      }, {
        key: "_getChannelPayload",
        value: function (e) {
          return e._events[0] && e._events[0].detail;
        }
      }, {
        key: "_isValidChannel",
        value: function (e) {
          return this._hasPayload(e) && !this._hasForbiddenPayload(e) && this._hasContent(e) && !this._isHTMLElement(e);
        }
      }, {
        key: "_hasPayload",
        value: function (e) {
          return e.payload;
        }
      }, {
        key: "_hasContent",
        value: function (e) {
          return !e.payload.constructor === Object || Object.keys(e.payload).length > 0;
        }
      }, {
        key: "_hasForbiddenPayload",
        value: function (e) {
          var t = ["sourceEvent", "preventer"],
              n = Object.keys(e.payload);
          return Array.prototype.includes.apply(n, t);
        }
      }, {
        key: "_isHTMLElement",
        value: function (e) {
          return e.payload.node || e.payload instanceof HTMLElement;
        }
      }, {
        key: "syncChannels",
        value: function (e) {
          e.forEach(this._syncChannel.bind(this));
        }
      }, {
        key: "syncAllChannels",
        value: function () {
          this.getAllChannels().forEach(this._syncChannel.bind(this));
        }
      }, {
        key: "_syncChannel",
        value: function (e) {
          var t = e.name,
              n = e.payload,
              r = this.manager.get(t);
          r.next(new CustomEvent(Pu.SYNC_CHANNELS_DATA, {
            detail: n
          }));
        }
      }, {
        key: "wrapEventHandler",
        value: function (e, t, n) {
          t && (t.nativeLink && xi.emit(ku.NATIVE_NAVIGATION_REQUEST, {
            event: e,
            detail: t.nativeLink
          }), Object.prototype.hasOwnProperty.call(t, "forward-to-native") && xi.emit(ku.NATIVE_CHANNEL_SYNC, {
            event: e,
            detail: n.name
          }));
        }
      }]), t;
    }(ma),
        Ou = Au,
        Ru = function () {
      function e() {
        _r(this, e);
      }

      return kr(e, [{
        key: "execute",
        value: function (e, t) {
          var n = Eu.SYNC_CHANNELS_DATA,
              r = Eu.NATIVE,
              i = r.BACK_STEP,
              o = r.NAVIGATION,
              a = r.RESET_WEBVIEW,
              s = r.LOGOUT,
              u = r.UPDATE_SKIP_NAVIGATIONS;
          e && (e === n ? this._executeSyncChannelsData(t) : e === i ? this._executeBackStep(t) : e === o ? this._executeNavigation(t) : e === a ? this._executeResetWebview() : e === s ? this._executeLogout() : e === u ? this._executeUpdateSkipNavigations(t) : console.log("Unkown operation received from native message: ".concat(JSON.stringify({
            operation: e,
            payload: t
          }))));
        }
      }, {
        key: "_executeSyncChannelsData",
        value: function (e) {
          var t = this._getChannelsFromPayload(e);

          xi.emit(ku.SYNC_CHANNELS_DATA, {
            channels: t
          });
        }
      }, {
        key: "_getChannelsFromPayload",
        value: function (e) {
          var t = e.channels;
          return Array.isArray(t) || (t = [t]), t.map(this._mapChannel);
        }
      }, {
        key: "_mapChannel",
        value: function (e) {
          var t = e.channelName,
              n = e.channelPayload;
          return {
            name: t,
            payload: n
          };
        }
      }, {
        key: "_executeBackStep",
        value: function (e) {
          xi.emit(ku.ROUTER_BACKSTEP, e);
        }
      }, {
        key: "_executeNavigation",
        value: function (e) {
          xi.emit(ku.ROUTER_NAVIGATION, e);
        }
      }, {
        key: "_executeResetWebview",
        value: function () {
          xi.emit(ku.RESET_WEBVIEW);
        }
      }, {
        key: "_executeLogout",
        value: function () {
          xi.emit(ku.NATIVE_LOGOUT);
        }
      }, {
        key: "_executeUpdateSkipNavigations",
        value: function (e) {
          xi.emit(ku.UPDATE_SKIP_NAVIGATIONS, e);
        }
      }]), e;
    }(),
        Nu = Ru,
        Iu = function () {
      function e() {
        Cr(this, e), this._callbacks = {}, console.log("CellsPluginManager()"), this.init();
      }

      return Sr(e, [{
        key: "source",
        get: function () {
          return window[Cu.NATIVE_PLUGIN_CHANNEL];
        }
      }]), Sr(e, [{
        key: "init",
        value: function () {
          this._prepareCellsNativeBridgeNameSpace();
        }
      }, {
        key: "_prepareCellsNativeBridgeNameSpace",
        value: function () {
          window.CellsNativePlugins = window.CellsNativePlugins || {}, window.CellsNativePlugins.pluginManager = {
            execute: this._executePlugin.bind(this),
            pluginResponse: this._processPluginResponse.bind(this)
          };
        }
      }, {
        key: "_executePlugin",
        value: function (e, t, n, r, i) {
          var o = this._createUUID(),
              a = this._createPluginMessage(o, n, r, i);

          this._storeCallback(o, e, t), this._sendMessage(a);
        }
      }, {
        key: "_processPluginResponse",
        value: function (e, t) {
          var n = Su.SUCCESS,
              r = Tu.SUCCESS_ACCESSOR,
              i = Tu.FAIL_ACCESSOR,
              o = this._normalizePluginResponse(t),
              a = o.status,
              s = o.payload,
              u = a == n ? r : i,
              c = this._callbacks[e][u];

          c(s), delete this._callbacks[e];
        }
      }, {
        key: "_normalizePluginResponse",
        value: function (e) {
          return "string" == typeof e ? JSON.parse(e) : e;
        }
      }, {
        key: "_createUUID",
        value: function () {
          return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, function (e) {
            return (e ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> e / 4).toString(16);
          });
        }
      }, {
        key: "_createPluginMessage",
        value: function (e, t, n, r) {
          return {
            id: e,
            pluginId: t,
            actionId: n,
            payload: r
          };
        }
      }, {
        key: "_storeCallback",
        value: function (e, t, n) {
          this._callbacks[e] = {
            success: t,
            fail: n
          };
        }
      }, {
        key: "_sendMessage",
        value: function (e) {
          this.source.postMessage(JSON.stringify(e));
        }
      }]), e;
    }(),
        xu = Iu,
        Mu = function () {
      function e() {
        Tr(this, e), this.operationManager = null, this.pluginManager = null, console.log("CellsNativeManager()"), this.init();
      }

      return Ar(e, [{
        key: "source",
        get: function () {
          return window[Cu.NATIVE_CHANNEL];
        }
      }]), Ar(e, [{
        key: "init",
        value: function () {
          console.log("CellsNativeBridge::init(".concat(name, ")")), this.operationManager = new Nu(), this.pluginManager = new xu(), this._attachEventListeners();
        }
      }, {
        key: "_attachEventListeners",
        value: function () {
          window.addEventListener("message", this._processMessage.bind(this));
        }
      }, {
        key: "sendNavigationMessage",
        value: function (e, t) {
          var n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
          console.log("CellsNativeManager::sendNavigationMessage(".concat(e, ", ").concat(t, ", ").concat(n, ")"));

          var r = this._createNavigationMessage(e, t, n);

          this._sendMessage(r);
        }
      }, {
        key: "sendBackstepMessage",
        value: function () {
          console.log("CellsNativeManager::sendBackstepMessage()");

          var e = this._createBackStepMessage();

          this._sendMessage(e);
        }
      }, {
        key: "sendSyncChannelsDataMessage",
        value: function (e) {
          console.log("CellsNativeManager::sendSyncChannelsDataMessage with data = ", e);

          var t = e.map(this._mapChannel),
              n = this._createSyncChannelsDataMessage(t);

          this._sendMessage(n);
        }
      }, {
        key: "sendBridgeReadyMessage",
        value: function () {
          var e = this._createBridgeReadyMessage();

          this._sendMessage(e);
        }
      }, {
        key: "sendPageStatusMessage",
        value: function (e, t) {
          var n = this._createPageStatusMessage(e, t);

          this._sendMessage(n);
        }
      }, {
        key: "_mapChannel",
        value: function (e) {
          var t = e.name,
              n = e.payload;
          return {
            channelName: t,
            channelPayload: n
          };
        }
      }, {
        key: "resetChannels",
        value: function () {
          console.log("CellsNativeManager::resetChannels()");

          var e = this._createResetChannelsMessage();

          this._sendMessage(e);
        }
      }, {
        key: "_createBackStepMessage",
        value: function () {
          var e = Eu.HTML.BACK_STEP;
          return {
            op: e,
            payload: {}
          };
        }
      }, {
        key: "_createPageStatusMessage",
        value: function (e, t) {
          return {
            op: t ? Eu.HTML.PAGE_LOADED : Eu.HTML.PAGE_UNLOADED,
            payload: {
              page: e
            }
          };
        }
      }, {
        key: "_createNavigationMessage",
        value: function (e, t, n) {
          var r = Eu.HTML,
              i = r.NAVIGATION,
              o = r.NAVIGATION_AND_REPLACE;
          return {
            op: n ? o : i,
            payload: {
              page: e,
              params: t
            }
          };
        }
      }, {
        key: "_createSyncChannelsDataMessage",
        value: function (e) {
          var t = Eu.SYNC_CHANNELS_DATA;
          return {
            op: t,
            payloadChannel: e
          };
        }
      }, {
        key: "_createBridgeReadyMessage",
        value: function () {
          var e = Eu.HTML.BRIDGE_READY;
          return {
            op: e,
            payload: {}
          };
        }
      }, {
        key: "_createResetChannelsMessage",
        value: function () {
          var e = Eu.RESET_CHANNELS_DATA;
          return {
            op: e,
            payload: {}
          };
        }
      }, {
        key: "_sendMessage",
        value: function (e) {
          this.source && this.source.postMessage(JSON.stringify(e));
        }
      }, {
        key: "_processMessage",
        value: function (e) {
          var t = this._parseMessage(e.data),
              n = this._mapMessage(t),
              r = n.operation,
              i = n.payload;

          this.operationManager.execute(r, i);
        }
      }, {
        key: "_parseMessage",
        value: function (e) {
          var t = {};

          try {
            t = "string" == typeof e ? JSON.parse(e) : {};
          } catch (t) {
            console.error("Cannot parse native message '".concat(e, "'\n\t").concat(t.message));
          }

          return t;
        }
      }, {
        key: "_mapMessage",
        value: function (e) {
          var t = e.op,
              n = e.payload;
          return {
            operation: t,
            payload: n
          };
        }
      }]), e;
    }(),
        Lu = Mu,
        ju = function (e) {
      function t() {
        var e;
        return Nr(this, t), e = n.call(this), e.init(), e;
      }

      jr(t, e);
      var n = Br(t);
      return xr(t, [{
        key: "init",
        value: function () {
          var e = this.navigationStack.createRoute("".concat(wu.NATIVE_ROUTE, "init"));
          this._clearStack(), this.navigationStack.push(e);
        }
      }, {
        key: "manageStack",
        value: function (e) {
          var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
              n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2],
              r = {},
              i = e.page,
              o = e.options,
              a = void 0 === o ? {} : o,
              s = (this.getLastRoute() || {}).page,
              u = a.cleanNavigationStack || !1,
              c = a.cleanUntil || !1;

          if (r.from = this.getLastRoute(), r.to = e, i !== s) {
            var l = (n ? wu.NATIVE_ROUTE : "") + i,
                h = Rr({}, e, {
              page: l
            });
            u ? this._clearStack() : c && this.clearStackUntil(c), delete h.options, t ? this.navigationStack.replaceRoute(h) : this.navigationStack.push(h);
          } else console.log("manageStack::UPDATE PRIVATE CHANNEL. FROM WEB TO NATIVE. WEB PAGE MUST BE ????: ", s, "->", i);

          return r;
        }
      }, {
        key: "addSkipNavigation",
        value: function (e) {
          console.log("Router:addSkipNavigation", e), this.navigationStack.addSkipNavigation(e);
        }
      }, {
        key: "_wait",
        value: function (e) {
          var t = new Date(),
              n = null;

          do n = new Date(); while (n - t < e);
        }
      }, {
        key: "back",
        value: function () {
          var e = {};

          if (this.navigationStack.length > 1) {
            var n = this.navigationStack.pop(),
                r = n,
                i = this.getLastRoute();

            for (console.log("back::", n, i); this.navigationStack.isSkipNavigation({
              from: r.page,
              to: i.page
            }) && this.navigationStack.length > 1;) console.log("back::skipped -> ", r, i), r = this.navigationStack.pop(), this.navigationStack.length > 0 && (i = this.getLastRoute());

            var o = this.isNativeRoute(n),
                a = this.isNativeRoute(i),
                s = i.page.replace(wu.NATIVE_ROUTE, ""),
                u = i.params;
            e.from = n, e.to = i, a ? xi.emit(ku.NATIVE_BACKSTEP_REQUEST, {
              page: s
            }) : o && xi.emit(ku.INTERNAL_ROUTER_BACKSTEP_FROM_NATIVE, {
              page: s
            }), a ? this._wait(800) : Mr(Hr(t.prototype), "go", this).call(this, s, u);
          } else e.from = this.getLastRoute(), e.to = this.getLastRoute();

          return e;
        }
      }, {
        key: "isNativeRoute",
        value: function (e) {
          var t = e.page;
          return t && t.startsWith(wu.NATIVE_ROUTE);
        }
      }, {
        key: "invalidateLocationHash",
        value: function () {
          this.locationHash("");
        }
      }, {
        key: "locationHash",
        value: function (e) {
          console.log("locationHash: ", e), Promise.resolve().then(function () {
            return setTimeout(function () {
              console.log("pr locationHash: ", e), location.hash = "#!" + e;
            }, 100);
          });
        }
      }, {
        key: "createRoute",
        value: function (e) {
          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
          return {
            page: e,
            params: t
          };
        }
      }]), t;
    }(Ha),
        Du = ju,
        Bu = function (e) {
      function t() {
        return qr(this, t), n.apply(this, arguments);
      }

      Kr(t, e);
      var n = Jr(t);
      return zr(t, [{
        key: "cacheSelected",
        value: function () {
          var e = this.cache[this.selected],
              t = this.cache;

          if (e) {
            for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && n !== e.name && (t[n].cache(), t[n].resetNextNavigation());

            this.selected = null, e.native();
          }
        }
      }, {
        key: "selectTemplate",
        value: function (e) {
          var t = this.cache[e];
          t && "native" === t.node.getAttribute("state") && (this.selected = e, t.activate());
        }
      }]), t;
    }($a),
        Uu = Bu,
        Fu = function (e) {
      function t() {
        return ti(this, t), n.apply(this, arguments);
      }

      ai(t, e);
      var n = ui(t);
      return ri(t, [{
        key: "initPrivateChannel",
        value: function (e, n) {
          var r = e || "cells-native-route:init",
              i = n || "cells-native-route:init";
          r !== i && (this.appState && this.appState.from === r && this.appState.to === i || (ii(fi(t.prototype), "initPrivateChannel", this).call(this, e, n), this.appState = {
            from: r,
            to: i
          }));
        }
      }]), t;
    }(us),
        Vu = Fu,
        Hu = Qi.bindingCodes,
        Gu = Qi.externalEventsCodes,
        qu = ku.PRIVATE,
        Wu = 5e3,
        zu = function (e) {
      function t() {
        var e,
            r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
        return di(this, t), console.log("CellsNativeBridge()"), e = n.call(this, r), e._initialRouteHandled = !1, e._shouldInitPrivateEvents = !1, e._initEvents(), e._initComponentConnector(), e._doPreRender(r), e._notifyBridgeReady(), e._lastLogoutTime = 0, e;
      }

      _i(t, e);

      var n = ki(t);
      return yi(t, [{
        key: "_initDependencies",
        value: function (e) {
          console.log("CellsNativeBridge::_initDependencies()"), e = vi({
            NativeManager: Lu,
            ComponentConnector: Ou,
            Router: Du,
            TemplateManager: Uu,
            BridgeChannelManager: Vu
          }, e), mi(Ti(t.prototype), "_initDependencies", this).call(this, e);
        }
      }, {
        key: "publish",
        value: function (e, n) {
          var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
          mi(Ti(t.prototype), "publish", this).call(this, e, n);

          var i = this._parsePublishOptions(r),
              o = i.forwardToNative;

          o && this._handleSyncDataToNative({
            detail: e
          });
        }
      }, {
        key: "_parsePublishOptions",
        value: function (e) {
          var t = e.forwardToNative,
              n = void 0 !== t && t;
          return {
            forwardToNative: n
          };
        }
      }, {
        key: "navigateToNative",
        value: function (e, t) {
          var n = ku.NATIVE_NAVIGATION_REQUEST;
          xi.emit(n, {
            event: {},
            detail: {
              page: e,
              params: t
            }
          });
        }
      }, {
        key: "backStep",
        value: function () {
          var e = Gu.ROUTER_BACKSTEP;
          xi.emit(e, {
            event: {},
            detail: {}
          });
        }
      }, {
        key: "resetRouter",
        value: function () {
          var e = this;
          xi.removeListener("nav-request", this.navRequestListener), this.Router = new Du(this), this.Router.handler = function () {
            return e.routeHandler();
          }, this.Router.addRoutes(this.routes), this._initSkipNavigations(), this.Router.start(), this.Router.hashIsDirty = !1, xi.on("nav-request", this.navRequestListener);
        }
      }, {
        key: "routeHandler",
        value: function () {
          if (mi(Ti(t.prototype), "routeHandler", this).call(this), !this._initialRouteHandled) {
            var e = this.Router.currentRoute,
                n = e.name,
                r = e.params,
                i = this.Router.createRoute(n, r);
            this.handleForward(i), this._initialRouteHandled = !0, console.log("CellsNativeBridge::routeHandler()", i);
          }
        }
      }, {
        key: "_cacheSelected",
        value: function () {
          this.TemplateManager.cacheSelected(), this.Router.currentRoute = this.Router.navigationStack.createRoute(wu.NATIVE_ROUTE + "init");
        }
      }, {
        key: "resetWebView",
        value: function () {
          this._shouldInitPrivateEvents = !0, this.Router.init(), this._cacheSelected(), this._resetBridgeChannels(), this._removeTemplates(), this._resetEventSubscriptions();
        }
      }, {
        key: "canDoLogout",
        value: function () {
          var e = new Date().getTime(),
              t = this._lastLogoutTime > 0 ? e - this._lastLogoutTime : e;
          return t > Wu;
        }
      }, {
        key: "logoutDueToNativeRequest",
        value: function () {
          this.canDoLogout() && (this._lastLogoutTime = new Date().getTime(), this._resetBridgeChannels(), this._removeTemplates(), this.TemplateManager.selected = "", this._resetEventSubscriptions(), this.Router.invalidateLocationHash(), this.Router.hashIsDirty = !0, this._initialRouteHandled = !1, this._shouldInitPrivateEvents = !1, this._initComponentConnector(), this.preRenderConfig && this._preRender(this.preRenderConfig, !1), this.resetRouter());
        }
      }, {
        key: "logout",
        value: function () {
          var e = this.initialTemplate.indexOf(wu.NATIVE_ROUTE),
              t = 0 === e,
              n = t ? this.initialTemplate.substring(wu.NATIVE_ROUTE.length) : this.initialTemplate;

          if (this._resetBridgeChannels(), this._removeTemplates(), this.Router.init(), t) {
            var r = {
              page: n,
              options: {
                cleanNavigationStack: !0
              }
            };
            this._shouldInitPrivateEvents = !0, this.handleForward(r, !1, !0), this.NativeManager.sendNavigationMessage(r.page, {}, !0), this._cacheSelected();
          } else this.Router.go(n);

          this._resetEventSubscriptions(), this._initComponentConnector();
        }
      }, {
        key: "_removeTemplates",
        value: function () {
          this.TemplateManager.removeTemplateChildrens(this.crossContainerId), this.TemplateManager.removeTemplates(this.initialTemplate, this.crossContainerId), this.TemplateManager.removeTemplate(this.initialTemplate);
        }
      }, {
        key: "_resetEventSubscriptions",
        value: function () {
          this._addInitialSubscribersToEvents();
        }
      }, {
        key: "_onConfigChange",
        value: function (e) {
          if (window.AppConfig && e.detail) {
            for (var t in e.detail) Object.prototype.hasOwnProperty.call(e.detail, t) && ("config" === t ? window.AppConfig.app = e.detail[t] : window.AppConfig[t] = e.detail[t]);

            this.PageManager.storage.clear(), this._removeTemplates(), this.routeHandler();
          }
        }
      }, {
        key: "_onLocaleChange",
        value: function (e) {
          window.I18nMsg && e.detail && e.detail.lang && (window.I18nMsg.lang = e.detail.lang);
        }
      }, {
        key: "_initEvents",
        value: function () {
          var e = this;
          xi.on(ku.SYNC_CHANNELS_DATA, function (t) {
            return e._handleNativeSyncChannelsData(t);
          }), xi.on(ku.ROUTER_NAVIGATION, function (t) {
            return e._handleNavigationRequest(t);
          }), xi.on(ku.ROUTER_BACKSTEP, function (t) {
            return e._handleBackRequest(t);
          }), xi.on(ku.RESET_WEBVIEW, function () {
            return e.resetWebView();
          }), xi.on(ku.NATIVE_LOGOUT, function () {
            return e.logoutDueToNativeRequest();
          }), xi.on(ku.UPDATE_SKIP_NAVIGATIONS, function (t) {
            return e.updateSkipNavigations(t);
          }), xi.on(ku.INTERNAL_ROUTER_NAVIGATION, function (t) {
            return e._handleNavigationStack(t);
          }), xi.on(ku.INTERNAL_ROUTER_BACKSTEP, function () {
            return e.handleBack({
              type: ku.INTERNAL_ROUTER_BACKSTEP
            });
          }), xi.on(ku.INTERNAL_ROUTER_BACKSTEP_FROM_NATIVE, function (t) {
            return e._handleBackRequestFromNative(t);
          }), xi.on(ku.NATIVE_NAVIGATION_REQUEST, function (t) {
            return e._handleNativeNavRequest(t);
          }), xi.on(ku.NATIVE_BACKSTEP_REQUEST, function () {
            return e._handleNativeBack();
          }), xi.on(ku.NATIVE_CHANNEL_SYNC, function (t) {
            return e._handleSyncDataToNative(t);
          });
        }
      }, {
        key: "_initComponentConnector",
        value: function () {
          this.ComponentConnector.handleI18n(this._onLocaleChange.bind(this)), this.ComponentConnector.handleConfig(this._onConfigChange.bind(this)), this.ComponentConnector.handleAppContextChange(this._onAppContextChanged.bind(this));
        }
      }, {
        key: "_doPreRender",
        value: function (e) {
          if (e.initialPreRender) {
            var t = {
              pages: e.initialPreRender
            };
            this.preRenderConfig = t, this._preRender(t, !1);
          }
        }
      }, {
        key: "_onAppContextChanged",
        value: function (e) {
          var t = e.detail.value;
          t.fromPage && (this.NativeManager.sendPageStatusMessage(t.currentPage, !0), this.NativeManager.sendPageStatusMessage(t.fromPage, !1));
        }
      }, {
        key: "_notifyBridgeReady",
        value: function () {
          this.NativeManager.sendBridgeReadyMessage();
        }
      }, {
        key: "_handleBackRequest",
        value: function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
          console.log("CellsNativeBridge::_handleBackRequest()");
          var t = this.Router.getLastRoute();
          e.willAppear && !this.Router.isNativeRoute(t) || xi.emit(ku.INTERNAL_ROUTER_BACKSTEP);
        }
      }, {
        key: "registerCurrentTemplate",
        value: function (e, t) {
          var n = wu.NATIVE_ROUTE + "init",
              r = Gu.TEMPLATE_REGISTERED,
              i = Hu.UI,
              o = this;
          this._isNewStateIsEqualToOldState(e.name, (t || {}).name) || (t && t !== e && n !== t.name && this.unregisterChildren(t, o.binding === i ? "DM" : null), this.registerChildren(e, o.binding === i ? "DM" : null), this._updateChannels(t, e), xi.emit(r, {
            template: e.name
          }));
        }
      }, {
        key: "_handleBackRequestFromNative",
        value: function (e) {
          console.log("CellsNativeBridge::_handleBackRequestFromNative()");
          var t = e.page;
          this.TemplateManager.selectTemplate(t);
        }
      }, {
        key: "_handleNavigationRequest",
        value: function (e) {
          var t = e.page;
          console.log("_handleNavigationRequest : to ", t);
          var n = new CustomEvent(qu.ROUTER_NAVIGATION, {
            detail: this._prepareNavigationParams(e),
            bubbles: !0,
            composed: !0
          });
          this._shouldInitPrivateEvents && (this._shouldInitPrivateEvents = !1, this.routeHandler()), this.TemplateManager.selectTemplate(t), xi.emit(ku.INTERNAL_ROUTER_NAVIGATION, {
            detail: e,
            event: n
          }), console.log("_handleNavigationRequest : to NATIVE : ".concat(t));
        }
      }, {
        key: "_prepareNavigationParams",
        value: function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
              t = vi({}, e);

          for (var n in t.params) Object.prototype.hasOwnProperty.call(t.params, n) && (t[n] = t.params[n], t.params[n] = n);

          return t;
        }
      }, {
        key: "_handleNavigationStack",
        value: function (e) {
          console.log("INFO ", e);

          var t = this._unflattenRouteFromEvent(e),
              n = e.detail.options || {};

          console.log("_handleNavigationStack options.skipHistory :", n.skipHistory), console.log("_handleNavigationStack :from", this.Router.getLastRoute().page, t.page), n.skipHistory !== !0 && n.skipHistory !== !1 || this.Router.addSkipNavigation({
            from: e.detail.page,
            to: this.Router.getLastRoute().page,
            skipHistory: n.skipHistory
          }), this.handleForward(t, t.replace);
        }
      }, {
        key: "_isNewStateIsEqualToOldState",
        value: function (e, t) {
          console.log("_isNewStateIsEqualToOldState COMPARE", this.appState);
          var n = wu.NATIVE_ROUTE + "init",
              r = t === n || void 0 === t,
              i = (this.appState || {}).previousPage === n || void 0 === (this.appState || {}).previousPage,
              o = this.appState && this.appState.currentPage === e && (this.appState.previousPage === t || i === r);
          return console.log("_isNewStateIsEqualToOldState skip=", o), o;
        }
      }, {
        key: "_updateChannels",
        value: function (e, t) {
          if (this.BridgeChannelManager) {
            var n = e ? e.name : void 0,
                r = t.name,
                i = {
              from: {
                page: n
              },
              to: {
                page: r
              }
            },
                o = this.shouldInitPrivateEvents(i);
            o || n === r || (this.BridgeChannelManager.initPrivateChannel(n, r), this.BridgeChannelManager.updateAppContext(n, r));
          }
        }
      }, {
        key: "shouldInitPrivateEvents",
        value: function (e) {
          return this.Router.isNativeRoute(e.from) || this.Router.isNativeRoute(e.to);
        }
      }, {
        key: "updatePrivateChannels",
        value: function (e, t) {
          if (this.BridgeChannelManager) {
            var n = e ? e.page : void 0;
            this.BridgeChannelManager.updateAppContext(n, t.page), this.BridgeChannelManager.initPrivateChannel(n, t.page);
          }
        }
      }, {
        key: "handlePrivateChannelsForNavigation",
        value: function (e) {
          this.shouldInitPrivateEvents(e) && this.updatePrivateChannels(e.from, e.to);
        }
      }, {
        key: "onNativeBackStepRequest",
        value: function () {
          return {
            continue: !0
          };
        }
      }, {
        key: "_doBeforeBack",
        value: function (e) {
          return Promise.resolve(this.onNativeBackStepRequest(e));
        }
      }, {
        key: "goBack",
        value: function () {
          var e = mi(Ti(t.prototype), "goBack", this).call(this);
          return this.handlePrivateChannelsForNavigation(e), e;
        }
      }, {
        key: "handleBack",
        value: function (e) {
          var t = this,
              n = this.Router.navigationStack.lastNavigation(),
              r = {
            currentPage: n.to,
            backToPage: n.from
          };
          e.type === ku.INTERNAL_ROUTER_BACKSTEP ? this._doBeforeBack(r).then(function (e) {
            e.continue === !0 ? t.goBack() : (e.cancelledNavigation = r, t.BridgeChannelManager.publishCancelledBackNavigation(e));
          }) : this.goBack();
        }
      }, {
        key: "handleForward",
        value: function (e) {
          var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
              n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2],
              r = this.Router.manageStack(e, t, n);
          this.handlePrivateChannelsForNavigation(r);
        }
      }, {
        key: "_unflattenRouteFromEvent",
        value: function (e) {
          var t = e.detail,
              n = t.page,
              r = t.params,
              i = t.cleanNavigationStack,
              o = void 0 !== i && i,
              a = t.cleanUntil,
              s = void 0 !== a && a,
              u = t.replace,
              c = void 0 !== u && u,
              l = e.event.detail,
              h = {},
              f = {
            page: n,
            params: this._unflattenRouteParams(r, l, !0),
            replace: c
          };
          return o && (h.cleanNavigationStack = o), s && (h.cleanUntil = s), Object.keys(h).length > 0 && (f.options = h), f;
        }
      }, {
        key: "_unflattenRouteParams",
        value: function () {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
              t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
              n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2],
              r = {};
          return Object.keys(e).forEach(function (i) {
            var o = n ? e[i] : i,
                a = t[i];
            a ? r[o] = a : console.error("Error trying to unflat value from param ".concat(i, " - value is not presented on value list (").concat(JSON.stringify(t), ")"));
          }), r;
        }
      }, {
        key: "_handleSyncDataToNative",
        value: function (e) {
          var t = e.detail,
              n = this.ComponentConnector.getChannel(t);
          this.NativeManager.sendSyncChannelsDataMessage([n]);
        }
      }, {
        key: "_handleNativeNavRequest",
        value: function (e) {
          console.log("CellsNativeBridge::_handleNativeNavRequest()");

          var t = this._unflattenNavigationData(e),
              n = t.resetChannels || !1;

          n ? this.NativeManager.resetChannels() : this._syncChannelsToNative(), this.handleForward(t, !1, !0), this.NativeManager.sendNavigationMessage(t.page, t.params), this.TemplateManager.cacheSelected();
        }
      }, {
        key: "_unflattenNavigationData",
        value: function (e) {
          var t = e.event.detail,
              n = vi({}, e.detail),
              r = n.cleanNavigationStack,
              i = void 0 !== r && r,
              o = n.cleanUntil,
              a = void 0 !== o && o,
              s = n.params,
              u = {},
              c = this._unflattenRouteParams(s, t, !0);

          return c && (n.params = c), i && (u.cleanNavigationStack = i), a && (u.cleanUntil = a), Object.keys(u).length > 0 && (n.options = u), n;
        }
      }, {
        key: "_handleNativeBack",
        value: function () {
          console.log("CellsNativeBridge::_handleNativeBack()"), this._syncChannelsToNative(), this.NativeManager.sendBackstepMessage(), this._cacheSelected();
        }
      }, {
        key: "updateSkipNavigations",
        value: function (e) {
          var t = this,
              n = e.navigations;
          n.forEach(function (e) {
            t.Router.addSkipNavigation(e);
          });
        }
      }, {
        key: "_handleNativeSyncChannelsData",
        value: function (e) {
          console.log("CellsNativeBridge::_handleNativeSyncChannelsData()"), this.ComponentConnector.syncChannels(e.channels);
        }
      }, {
        key: "_syncChannelsToNative",
        value: function () {
          var e = this.ComponentConnector.getChannels();
          this.NativeManager.sendSyncChannelsDataMessage(e);
        }
      }]), t;
    }(_u),
        Ku = zu,
        Yu = {
      native: {
        windowExport: "CellsNativeBridge",
        library: "cellsNative",
        file: "cells-native-bridge",
        version: "0.11.0"
      },
      core: {
        windowExport: "CellsPolymerBridge",
        library: "cells",
        file: "cells-polymer-bridge"
      }
    }.native || {
      native: {
        windowExport: "CellsNativeBridge",
        library: "cellsNative",
        file: "cells-native-bridge",
        version: "0.11.0"
      },
      core: {
        windowExport: "CellsPolymerBridge",
        library: "cells",
        file: "cells-polymer-bridge"
      }
    }.core,
        Ju = Yu.windowExport;

    window[Ju] = Ku;
  }]);
}); //# sourceMappingURL=cells-native-bridge.min.js.map