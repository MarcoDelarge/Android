<html><head></head><body><div hidden="" by-polymer-bundler=""><script>!function(e,t){"object"==("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))&&"object"==("undefined"===typeof module?"undefined":babelHelpers.typeof(module))?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))?exports.BGADPReceiversV0=t():e.BGADPReceiversV0=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([/*!***************************!*\
  !*** ./src/base/_base.js ***!
  \***************************/function(e,t,n){"use strict";function r(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=babelHelpers.typeof(t)&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0,r;n<t.length;n++){r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(/*! events */5),u=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),o(t,[{key:"_error",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;throw e=e.toString(),e=("0000"+e).substr(e.length),Error("BGADP_ERROR_"+e+" :: "+t+" :: "+(n&&n.message))}}]),t}(u.default);t.default=l},/*!**************************************!*\
  !*** ./src/base/storage-polyfill.js ***!
  \**************************************/function(e,t,n){"use strict";function r(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=babelHelpers.typeof(t)&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0,r;n<t.length;n++){r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(/*! ./_base */0),u=function(e){return e&&e.__esModule?e:{default:e}}(a);n(/*! ./polyfills.js */6)();var l=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Object.defineProperty(e,"_reservedKeys",{value:["_items","_reservedKeys","setItem","getItem","removeItem"]}),Object.defineProperty(e,"_items",{configurable:!1,enumerable:!0,value:{},writable:!0}),e}return s(t,e),o(t,[{key:"length",get:function get(){return Object.keys(this._items).length}}]),o(t,[{key:"setItem",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";if("string"==typeof e&&e){if(this._reservedKeys.includes(e))this._error(2,"\""+e+"\" should NOT be a reserved key");else{if("string"!=typeof t)try{t=JSON.stringify(t)}catch(e){this._error(1,"\""+t+"\" couldn't be transformed into String")}t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this._items[e]=t}}else this._error(3,"Missing {item} parameter")}},{key:"getItem",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return this._items[e]?this._items[e]:null}},{key:"removeItem",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";this._items.hasOwnProperty(e)&&delete this._items[e]}},{key:"clear",value:function value(){Object.keys(this._items).length&&(this._items={})}}]),t}(u.default);t.default=l},/*!******************************!*\
  !*** ./src/models/entity.js ***!
  \******************************/function(e,t,n){"use strict";function r(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=babelHelpers.typeof(t)&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(/*! ../base/_base */0),a=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e&&Object.keys(e).forEach(function(t){Object.defineProperty(n,t,{enumerable:!0,configurable:!1,value:e[t],writable:!0})},n),n}return s(t,e),t}(a.default);t.default=u},/*!**********************************!*\
  !*** ./src/models/collection.js ***!
  \**********************************/function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=babelHelpers.typeof(t)&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0,r;n<t.length;n++){r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(/*! ../base/_base */0),l=r(u),c=n(/*! ./entity */2),h=r(c),f=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;i(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._items=[],Array.isArray(e)&&(n._items=e.map(function(e){return babelHelpers.instanceof(e,h.default)?e:new h.default(e)})),n}return o(t,e),a(t,[{key:"_compareValues",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return e<t?-1:e>t?1:0}},{key:"_dotProp",value:function value(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=JSON.parse(JSON.stringify(e)),r=t.split(".");r.length&&n;){n=n[r.shift()]}return n}},{key:"findFirst",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;if("string"==typeof e&&""!==e)return this._items.find(function(n){return n[e]===t?n:void 0});this._error(1,"findFirst: Param [key] ("+e+") is not valid!")}},{key:"sortBy",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=[e];return void 0!==n&&null!==n&&(Array.isArray(n)&&(i=i.concat(n)),"string"==typeof n&&i.push(n),"boolean"==typeof n&&(r=n)),Array.isArray(i)&&i.length&&"string"==typeof i[0]&&""!==i[0]?this._items.sort(function(e,n){for(var s=0,o=Array.from(i),a="",u="",l;!s&&o.length;){l=o.shift();-1!==l.lastIndexOf(".")?(a+=t._dotProp(e,l),u+=t._dotProp(n,l)):(a+=e[l],u+=n[l]),s+=t._compareValues(a,u)}return(0!==s?s/Math.abs(s):0)*(r?-1:1)}):this._error(2,"sortBy: Invalid [criteria] argument"),this._items}},{key:"length",value:function value(){return Array.isArray(this._items)?this._items.length:0}}]),t}(l.default);t.default=f},/*!******************************************!*\
  !*** ./src/services/receivers-get-v0.js ***!
  \******************************************/function(e,t,n){"use strict";function r(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=babelHelpers.typeof(t)&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++){n=arguments[t];for(var r in n){Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}return e},a=function(){function e(e,t){for(var n=0,r;n<t.length;n++){r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},l=n(/*! ../request/get.js */9),c=function(e){return e&&e.__esModule?e:{default:e}}(l),h=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o({requiresTsec:!0},e||{})));return n._setPath("receivers/v"+n.version+"/receivers"),n}return s(t,e),a(t,[{key:"toString",value:function value(){return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toString",this).call(this,"BGADPReceiversGetV0")}}]),t}(c.default);t.default=h},/*!****************************!*\
  !*** ./~/events/events.js ***!
  \****************************/function(e,t,n){"use strict";function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function s(e){return"number"==typeof e}function o(e){return"object"===(void 0===e?"undefined":u(e))&&null!==e}function a(e){return void 0===e}var u="function"==typeof Symbol&&"symbol"==babelHelpers.typeof(Symbol.iterator)?function(e){return babelHelpers.typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":babelHelpers.typeof(e)};e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!s(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,s,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(babelHelpers.instanceof(t=arguments[1],Error))throw t;var c=new Error("Uncaught, unspecified \"error\" event. ("+t+")");throw c.context=t,c}if(n=this._events[e],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s);}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),l=n.slice(),r=l.length,u=0;u<r;u++){l[u].apply(this,s)}return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,s,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;0<a--;){if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events){"removeListener"!==t&&this.removeAllListeners(t)}return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;){this.removeListener(e,n[n.length-1])}return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},/*!*******************************!*\
  !*** ./src/base/polyfills.js ***!
  \*******************************/function(e,t,n){"use strict";e.exports=function(){void 0===Array.prototype.includes&&Object.defineProperty(Array.prototype,"includes",{value:function value(e,t){if(null===this)throw new TypeError("\"this\" is null or not defined");var n=Object(this),r=n.length>>>0;if(0===r)return!1;for(var i=0|t,s=Math.max(0<=i?i:r-Math.abs(i),0);s<r;){if(function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}(n[s],e))return!0;s++}return!1}})}},/*!*****************************!*\
  !*** ./src/receivers-v0.js ***!
  \*****************************/function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(/*! ./services/receivers-get-v0.js */4),s=r(i),o=n(/*! ./models/collection.js */3),a=r(o),u=n(/*! ./models/entity.js */2),l=r(u),c=n(/*! ./base/storage-polyfill.js */1),h=r(c);e.exports={receivers:{get:s.default},models:{collection:a.default,entity:l.default},tools:{storage:h.default}}},/*!******************************!*\
  !*** ./src/request/_base.js ***!
  \******************************/function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=babelHelpers.typeof(t)&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++){n=arguments[t];for(var r in n){Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}return e},u="function"==typeof Symbol&&"symbol"==babelHelpers.typeof(Symbol.iterator)?function(e){return babelHelpers.typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":babelHelpers.typeof(e)},l=function(){function e(e,t){for(var n=0,r;n<t.length;n++){r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(/*! ../base/_base */0),h=r(c),f=n(/*! ../base/storage-polyfill */1),p=r(f),d={JWT:"jwt",TSEC:"tsec",NONE:"none"},v=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;i(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.host="http://localhost:8100",n.version="0",n.method="GET",n.params=null,n.body=null,n.headers=null,n.timeout=60,n.requiresTsec=!1,n.tsecHandler=null,n.requiresJWT=!1,n.jwtHandler=null,n.requiredToken=null,n.cacheType="NONE",n.cacheKey="bgadp",n.encodeCache=!1,n.withCredentials=!1,n.simulate=[],n.native=!1,n.jwtHeaderName="vnd.bbva.access-token",n.semaasMonitoring=!1,n.htmlContext=null,n.responseType="text",n.signatureFirstErrorCode="70",n.emitRequestEvents=!0,n._assignPrivateValues(),n._assignConstantValues(),n._assignConfigValues(e),n._assingSecurityToken(),n._setCacheEngine(),n}return o(t,e),l(t,[{key:"_assignPrivateValues",value:function value(){var e=this,t={_className:"BGADPRequestBase",_headers:{Accept:"application/json, text/html, */*; q=0.1","Content-Type":"application/json"},_promise:null,_request:null,_lastResponse:null,_lastResponseHeaders:null,_cacheItem:null};Object.keys(t).forEach(function(n){Object.defineProperty(e,n,{configurable:!1,enumerable:!1,value:t[n],writable:"_headers"!==n})},this),Object.defineProperty(this,"_memCache",{configurable:!1,enumerable:!1,value:new p.default,writable:!1}),Object.defineProperty(this,"_ERROR_CODES",{configurable:!0,enumerable:!0,value:{SIGNATURE_REQUIRED:["70","999"],SIGNATURE_INVALID:["168"]}})}},{key:"_assignConstantValues",value:function value(){var e=this;["_DEFAULT_XHR","_NATIVE_XHR"].forEach(function(t,n){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,value:n})},this),["_CACHE_NONE","_CACHE_LOCAL","_CACHE_SESSION","_CACHE_MEMORY"].forEach(function(t,n){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,value:n})},this)}},{key:"_assignConfigValues",value:function value(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;void 0!==t&&null!==t&&"object"===(void 0===t?"undefined":u(t))&&Object.keys(t).forEach(function(n){if(e.hasOwnProperty(n)&&"_"!==n.charAt(0)&&"function"!=typeof e[n])switch(u(e[n])){case"object":Array.isArray(t[n])?e[n]=Array.from(t[n]):null===e[n]?e[n]=t[n]:e[n]=a(e[n]||{},t[n]);break;case"string":case"number":case"boolean":default:e[n]=t[n];}else"signatureRequiredErrors"===n?e._ERROR_CODES.SIGNATURE_REQUIRED=t[n]:"signatureInvalidErrors"===n?e._ERROR_CODES.SIGNATURE_INVALID=t[n]:("function"==typeof e[n]&&e._error(1,n+" is a class method, can't be override"),"_"===n.charAt(0)&&e._error(2,"\""+n+"\" is a restricted property, can't be override"),e.hasOwnProperty(n)||e._error(3,"\""+n+"\" is not a valid property for "+e._className))},this),Object.defineProperty(this,"_xhrType",{configurable:!1,enumerable:!1,value:this.native?this._NATIVE_XHR:this._DEFAULT_XHR,writable:!1})}},{key:"_assingSecurityToken",value:function value(){null===this.requiredToken?(this.requiresTsec?this.requiredToken=d.TSEC:this.requiredToken=d.NONE,this.requiresJWT=!1):this.requiredToken===d.TSEC?(this.requiresTsec=!0,this.requiresJWT=!1):this.requiredToken===d.JWT?(this.requiresJWT=!0,this.requiresTsec=!1):this.requiredToken===d.NONE?(this.requiresJWT=!1,this.requiresTsec=!1):this._error(1,"requiredToken has an invalid value "+this.requiredToken),this._setTsecHandler(),this._setJwtHandler()}},{key:"_setTsecHandler",value:function value(){this._setTokenHandler(d.TSEC)}},{key:"_setJwtHandler",value:function value(){this._setTokenHandler(d.JWT)}},{key:"_setTokenHandler",value:function value(e){var t=e+"Handler";this[t]=this[t]||window.sessionStorage;try{this[t].setItem("test","test"),this[t].removeItem("test")}catch(e){this._error(4,"Invalid ["+t+"]. If not specified, default window.sessionStorage can't be written/read",e)}}},{key:"_setCacheEngine",value:function value(){this._cache=this["_CACHE_"+this.cacheType.toUpperCase()],void 0===this._cache&&this._error(5,"Invalid [cacheType] value. \"NONE\", \"LOCAL\", \"SESSION\" or \"MEMORY\" are available")}},{key:"_setPath",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";e&&"string"==typeof e?Object.defineProperty(this,"_path",{configurable:!1,enumerable:!0,value:e,writable:!1}):this._error(6,"[path] is required")}},{key:"_buildPromise",value:function value(){var e=this,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(!this._promise||this._promise.promise&&!this._promise.isPending){var n={isPending:!0};n.promise=new window.Promise(function(r,i){n=a(n,{resolve:r,reject:i}),e._buildRequest(t)}),this._promise=a({},n)}return this._promise.promise}},{key:"_defaultXHR",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=new window.XMLHttpRequest;if(babelHelpers.instanceof(t,window.XMLHttpRequest)){t.withCredentials=this.withCredentials,t.timeout=1e3*this.timeout,t.onreadystatechange=this._onReadyStateChange.bind(this),t.responseType=this.responseType,t.open(this.method.toUpperCase(),e);var n=this._getRequestHeaders();Object.keys(n).forEach(function(e){t.setRequestHeader(e,n[e])}),t.send(this._buildBody())}return t}},{key:"_nativeXHR",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=this._buildNativeRequest();return t?(t=t[this.method.toLowerCase()],"function"==typeof t?t=t(e,this._buildBody(),this._getRequestHeaders(),this._onRequestSuccess.bind(this),this._onRequestFail.bind(this)):this._error(7,"Methhod Http."+this.method.toLowerCase()+"() not present in native engine.")):this._error(8,"There isn't any native engine to build Http."+this.method.toLowerCase()+"() request."),t}},{key:"_buildNativeRequest",value:function value(){var e=!!window.CellsNativePlugins&&!!window.CellsNativePlugins.Http,t=!!window.cordovaCells&&!!window.cordovaCells.Http;return e?window.CellsNativePlugins.Http:t?window.cordovaCells.Http:null}},{key:"_buildRequest",value:function value(){var e=this,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=this._buildURL();if(this._cacheItem=this._retrieveFromCache(),!t&&this._cacheItem&&n===this._cacheItem.url&&this.method===this._cacheItem.method)setTimeout(function(){e._onRequestSuccess(e._cacheItem)},100);else if(!t&&Array.isArray(this.simulate)&&this.simulate.length)setTimeout(function(){e._onRequestSuccess({response:e.simulate.shift()})},100);else switch(null!==this._request&&(this._request=null),this._cacheItem=a({},{url:n,method:this.method,response:null}),this.emitRequestEvents&&this._emitRequestEvent("start"),this._xhrType){case this._DEFAULT_XHR:this._request=this._defaultXHR(n);break;case this._NATIVE_XHR:this._request=this._nativeXHR(n);}return this._request}},{key:"_buildURL",value:function value(){var e=this,t=[this.host,this._path].join("/");if(null!==this.params){var n=a({},this.params);-1!==t.lastIndexOf("{")&&(t=t.replace(/(\{[\w\-]+\})/g,function(t){var r=t.replace(/[\{\}]+/g,""),i=n[r];return i?delete n[r]:e._error(9,"Missing "+r+" param value"),i}),-1!==t.lastIndexOf("{")&&this._error(10,"Missing query [params]"));var r=Object.keys(n);r.length&&(t=[t,r.map(function(e){return e+"="+n[e]}).join("&")].join("?"))}return t}},{key:"_getRequestHeaders",value:function value(){var e=a(this._headers,this.headers||{});if(!0===this.requiresTsec&&(e=this._getTokenForRequestHeaders(d.TSEC,e)),!0===this.requiresJWT&&(e=this._getTokenForRequestHeaders(d.JWT,e)),!0===this.semaasMonitoring){var t=this._getSemaasHeaders();a(e,t)}return e}},{key:"_getSemaasHeaders",value:function value(){var e=["x-rho-traceid","x-rho-parentspanid"],t={};if(window.sessionStorage){var n=window.sessionStorage;e.forEach(function(e){var r=n.getItem(e);r&&"null"!==r&&(t[e]=r)})}return t}},{key:"_getTokenForRequestHeaders",value:function value(e,t){var n=e+"Handler",r=e===d.JWT?"JWT ":"",i=e===d.JWT?"Authorization":d.TSEC;if(void 0===this[n]||null===this[n])this._error(11,e+" handler is undefined");else{var s=this[n].getItem(e);s?t[i]=t[i]||r+s:this._error(12,"Missing '"+e+"' value")}return t}},{key:"_buildBody",value:function value(){var e=this.body;if(e&&this._xhrType===this._DEFAULT_XHR)if(this.headers&&"application/x-www-form-urlencoded"===this.headers["Content-Type"]){var t=[];Object.keys(e).forEach(function(n){t.push(n+"="+e[n])}),e=t.join("&")}else(!this.headers||this.headers&&"multipart/form-data"!==this.headers["Content-Type"])&&(e=JSON.stringify(e));return e}},{key:"_onReadyStateChange",value:function value(){var e=this._request;if(e&&e.readyState===window.XMLHttpRequest.DONE)switch(e.status.toString().charAt(0)){case"2":case"3":this._onRequestSuccess(e);break;case"4":case"5":default:this._onRequestFail(e);}}},{key:"_extractRequestResponse",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=null!==e?e.response:e;if(t&&"string"==typeof t)try{t=JSON.parse(t)}catch(e){t=null}return t}},{key:"_storeIntoCache",value:function value(){try{void 0!==this._cacheItem&&null!==this._cacheItem&&(this._cacheItem.response=this._lastResponse);var e=JSON.stringify(this._cacheItem);switch(this.encodeCache&&(e=window.btoa(e)),this._cache){case this._CACHE_MEMORY:this._memCache.setItem(this.cacheKey,e);break;case this._CACHE_LOCAL:window.localStorage.setItem(this.cacheKey,e);break;case this._CACHE_SESSION:window.sessionStorage.setItem(this.cacheKey,e);break;case this._CACHE_NONE:}}catch(e){this._error(13,"Can't write into cache engine: "+e.message,e)}}},{key:"_retrieveFromCache",value:function value(){var e=void 0;try{switch(this._cache){case this._CACHE_MEMORY:e=this._memCache.getItem(this.cacheKey);break;case this._CACHE_LOCAL:e=window.localStorage.getItem(this.cacheKey);break;case this._CACHE_SESSION:e=window.sessionStorage.getItem(this.cacheKey);break;case this._CACHE_NONE:}}catch(e){this._error(14,"Can't read from cache engine",e)}return e&&(this.encodeCache&&(e=window.atob(e)),"string"==typeof e&&/[\{\[]/.test(e.charAt(0))&&(e=JSON.parse(e))),e}},{key:"_setLastResponse",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;e&&(this._lastResponse=a({},e))}},{key:"_setLastResponseHeaders",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t={};e&&(babelHelpers.instanceof(e,window.XMLHttpRequest)?t=this._parseResponseHeadersToObject(e.getAllResponseHeaders()):e.headers&&(t=JSON.parse(e.headers))),this._lastResponseHeaders=t}},{key:"_parseResponseHeadersToObject",value:function value(e){var t={},n=e.trim().split(/[\r\n]+/);for(var r in n){if(n.hasOwnProperty(r)&&""!==n[r]){var i=n[r],s=i.split(": ");t[s.shift().toLowerCase()]=s.join(": ")}}return t}},{key:"_setLastResponse",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;e&&(this._lastResponse=a({},e))}},{key:"_onRequestSuccess",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this._setLastResponse(this._extractRequestResponse(e)),this._setLastResponseHeaders(e),this.requiresJWT&&this.jwtHandler&&this._storeToken(this.jwtHandler,e,"jwt",this.jwtHeaderName),this.tsecHandler&&this._storeToken(this.tsecHandler,e,"tsec","tsec"),this._storeIntoCache(),this._onRequestEnd("resolve",e)}},{key:"_storeToken",value:function value(e,t,n,r){var i=null;switch(this._xhrType){case this._DEFAULT_XHR:i=t&&t.getResponseHeader&&t.getResponseHeader(r);break;case this._NATIVE_XHR:i=JSON.parse(t.headers)[r];}i&&e.getItem(n)!==i&&(e.setItem(n,i),this._emitTokenUpdate(n,i))}},{key:"_emitTokenUpdate",value:function value(e,t){if(this.htmlContext){var n=new CustomEvent("token-update",{bubbles:!0,detail:{type:e,token:t}});this.htmlContext.dispatchEvent(n)}}},{key:"_emitRequestEvent",value:function value(e){this.emit("http-request-"+e,new CustomEvent("http-request-"+e,{bubbles:!0,composed:!0}))}},{key:"_onRequestFail",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this._isSignatureRequired(e)||(this._setLastResponse(this._extractRequestResponse(e)),this._setLastResponseHeaders(e),this._storeIntoCache(),this._onRequestEnd("reject",e))}},{key:"_onRequestEnd",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"resolve",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;this._resetDPState(),this.emitRequestEvents&&this._emitRequestEvent("end"),this._promise&&"function"==typeof this._promise[e]&&(this._promise.isPending=!1,this._promise[e](t))}},{key:"_resetDPState",value:function value(){var e=this;["Data","Type","State"].forEach(function(t){var n="Authentication"+t;e._headers&&e._headers.hasOwnProperty(n)&&delete e._headers[n],e.headers&&e.headers.hasOwnProperty(n)&&delete e.headers[n]},this),this.hasOwnProperty("signatureValue")&&delete this.signatureValue,this.hasOwnProperty("signatureType")&&delete this.signatureType}},{key:"_extractSignatureResponseHeaders",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=void 0,n=void 0,r=void 0;if(babelHelpers.instanceof(e,window.XMLHttpRequest))t=e.getResponseHeader("AuthenticationType"),n=e.getResponseHeader("AuthenticationData"),r=e.getResponseHeader("AuthenticationState");else{var i=JSON.parse(e.headers);t=i.authenticationtype,n=i.authenticationdata,r=i.authenticationstate}return{type:t,data:n,state:r}}},{key:"_defineSignatureType",value:function value(){var e=this,t=arguments;Object.defineProperty(this,"signatureType",{enumerable:!0,configurable:!0,set:function set(n){e._onSignatureTypeChange.apply(e,[n].concat(Array.prototype.slice.call(t)))}})}},{key:"_defineSignatureValue",value:function value(){var e=this,t=arguments;Object.defineProperty(this,"signatureValue",{enumerable:!0,configurable:!0,set:function set(n){e._onSignatureValueChange.apply(e,[n].concat(Array.prototype.slice.call(t)))}})}},{key:"_onSignatureTypeChange",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";if("string"==typeof e&&""!==e)if(t.includes(e)){if("string"==typeof e&&""!==e){var r=this._getSignatureData(e,t,n);this.headers=a(this.headers||{},{AuthenticationType:e,AuthenticationData:r}),this._buildRequest()}}else this._error(15,e+" is not a valid signature type");"boolean"==typeof e&&!1===e&&this._onRequestEnd("reject",this._extractRequestResponse(this._request))}},{key:"_onSignatureValueChange",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",i=void 0;"object"===(void 0===e?"undefined":u(e))&&e?(i=this._getSignatureData(e.signatureType,t,n)+"="+e.signatureValue,e.challenge&&(i+=",challenge="+e.challenge),this._buildSignatureHeaders(i,e.signatureType,r)):"string"==typeof e&&""!==e&&(i=n+"="+e,this._buildSignatureHeaders(i,t,r)),"boolean"==typeof e&&!1===e&&this._onRequestEnd("reject",this._extractRequestResponse(this._request))}},{key:"_buildSignatureHeaders",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";this.headers=a(this.headers||{},{AuthenticationData:e,AuthenticationType:t||""}),n&&(this.headers=a(this.headers,{AuthenticationState:n})),this._buildRequest()}},{key:"_isSignatureRequired",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=this._extractRequestResponse(e);if(!t)return!1;var n=this._ERROR_CODES.SIGNATURE_REQUIRED.find(function(e){return t["error-code"]===e}),r=this._ERROR_CODES.SIGNATURE_INVALID.find(function(e){return t["error-code"]===e}),i=!(!e||401!==+e.status)&&void 0!==t["error-code"]&&(n||r),s=t["error-code"]===this.signatureFirstErrorCode;if(i)if(r)this.emit("signature-invalid",new CustomEvent("signature-invalid",{bubbles:!0}));else{var o=this._extractSignatureResponseHeaders(e),a=o.type,u=o.data,l=o.state;if(a&&u){var c="";s?(c="signature-required-first-step",this._defineSignatureType(a,u),this._defineSignatureValue(a,u,l)):(c="signature-required",this._defineSignatureValue(a,u,l));var h=new CustomEvent(c,{bubbles:!0,detail:{type:a,data:u}});this.emit(c,h)}else i=!1}return i}},{key:"_getSignatureData",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",r=t.split(";").findIndex(function(t){return t===e});return n.split(";")[r]}},{key:"toString",value:function value(){return"[object "+((0<arguments.length&&void 0!==arguments[0]?arguments[0]:"")||this._className)+"]"}},{key:"getLastResponse",value:function value(){return this._lastResponse}},{key:"getLastResponseHeaders",value:function value(){return this._lastResponseHeaders}},{key:"getLastRequest",value:function value(){return this._request}},{key:"generateRequest",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this._buildPromise(e)}}]),t}(h.default);t.default=v},/*!****************************!*\
  !*** ./src/request/get.js ***!
  \****************************/function(e,t,n){"use strict";function r(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=babelHelpers.typeof(t)&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++){n=arguments[t];for(var r in n){Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}return e},a=function(){function e(e,t){for(var n=0,r;n<t.length;n++){r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},l=n(/*! ./_base.js */8),c=function(e){return e&&e.__esModule?e:{default:e}}(l),h=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o(e||{},{method:"GET"})))}return s(t,e),a(t,[{key:"toString",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toString",this).call(this,e||"BGADPRequestGET")}}]),t}(c.default);t.default=h}])});</script><script>!function(e,t){"object"==("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))&&"object"==("undefined"===typeof module?"undefined":babelHelpers.typeof(module))?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))?exports.BGADPReceiversV1=t():e.BGADPReceiversV1=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([/*!***************************!*\
  !*** ./src/base/_base.js ***!
  \***************************/function(e,t,n){"use strict";function r(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=babelHelpers.typeof(t)&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0,r;n<t.length;n++){r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(/*! events */5),u=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),o(t,[{key:"_error",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;throw e=e.toString(),e=("0000"+e).substr(e.length),Error("BGADP_ERROR_"+e+" :: "+t+" :: "+(n&&n.message))}}]),t}(u.default);t.default=l},/*!**************************************!*\
  !*** ./src/base/storage-polyfill.js ***!
  \**************************************/function(e,t,n){"use strict";function r(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=babelHelpers.typeof(t)&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0,r;n<t.length;n++){r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(/*! ./_base */0),u=function(e){return e&&e.__esModule?e:{default:e}}(a);n(/*! ./polyfills.js */6)();var l=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Object.defineProperty(e,"_reservedKeys",{value:["_items","_reservedKeys","setItem","getItem","removeItem"]}),Object.defineProperty(e,"_items",{configurable:!1,enumerable:!0,value:{},writable:!0}),e}return s(t,e),o(t,[{key:"length",get:function get(){return Object.keys(this._items).length}}]),o(t,[{key:"setItem",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";if("string"==typeof e&&e){if(this._reservedKeys.includes(e))this._error(2,"\""+e+"\" should NOT be a reserved key");else{if("string"!=typeof t)try{t=JSON.stringify(t)}catch(e){this._error(1,"\""+t+"\" couldn't be transformed into String")}t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this._items[e]=t}}else this._error(3,"Missing {item} parameter")}},{key:"getItem",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return this._items[e]?this._items[e]:null}},{key:"removeItem",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";this._items.hasOwnProperty(e)&&delete this._items[e]}},{key:"clear",value:function value(){Object.keys(this._items).length&&(this._items={})}}]),t}(u.default);t.default=l},/*!******************************!*\
  !*** ./src/models/entity.js ***!
  \******************************/function(e,t,n){"use strict";function r(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=babelHelpers.typeof(t)&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(/*! ../base/_base */0),a=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e&&Object.keys(e).forEach(function(t){Object.defineProperty(n,t,{enumerable:!0,configurable:!1,value:e[t],writable:!0})},n),n}return s(t,e),t}(a.default);t.default=u},/*!**********************************!*\
  !*** ./src/models/collection.js ***!
  \**********************************/function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=babelHelpers.typeof(t)&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0,r;n<t.length;n++){r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(/*! ../base/_base */0),l=r(u),c=n(/*! ./entity */2),h=r(c),f=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;i(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._items=[],Array.isArray(e)&&(n._items=e.map(function(e){return babelHelpers.instanceof(e,h.default)?e:new h.default(e)})),n}return o(t,e),a(t,[{key:"_compareValues",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return e<t?-1:e>t?1:0}},{key:"_dotProp",value:function value(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=JSON.parse(JSON.stringify(e)),r=t.split(".");r.length&&n;){n=n[r.shift()]}return n}},{key:"findFirst",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;if("string"==typeof e&&""!==e)return this._items.find(function(n){return n[e]===t?n:void 0});this._error(1,"findFirst: Param [key] ("+e+") is not valid!")}},{key:"sortBy",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=[e];return void 0!==n&&null!==n&&(Array.isArray(n)&&(i=i.concat(n)),"string"==typeof n&&i.push(n),"boolean"==typeof n&&(r=n)),Array.isArray(i)&&i.length&&"string"==typeof i[0]&&""!==i[0]?this._items.sort(function(e,n){for(var s=0,o=Array.from(i),a="",u="",l;!s&&o.length;){l=o.shift();-1!==l.lastIndexOf(".")?(a+=t._dotProp(e,l),u+=t._dotProp(n,l)):(a+=e[l],u+=n[l]),s+=t._compareValues(a,u)}return(0!==s?s/Math.abs(s):0)*(r?-1:1)}):this._error(2,"sortBy: Invalid [criteria] argument"),this._items}},{key:"length",value:function value(){return Array.isArray(this._items)?this._items.length:0}}]),t}(l.default);t.default=f},/*!******************************************!*\
  !*** ./src/services/receivers-get-v1.js ***!
  \******************************************/function(e,t,n){"use strict";function r(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=babelHelpers.typeof(t)&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++){n=arguments[t];for(var r in n){Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}return e},a=function(){function e(e,t){for(var n=0,r;n<t.length;n++){r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},l=n(/*! ../request/get.js */9),c=function(e){return e&&e.__esModule?e:{default:e}}(l),h=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o({requiresTsec:!0},e||{})));return n._setPath("receivers/v"+n.version+"/receivers"),n}return s(t,e),a(t,[{key:"toString",value:function value(){return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toString",this).call(this,"BGADPReceiversGetV1")}}]),t}(c.default);t.default=h},/*!****************************!*\
  !*** ./~/events/events.js ***!
  \****************************/function(e,t,n){"use strict";function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function s(e){return"number"==typeof e}function o(e){return"object"===(void 0===e?"undefined":u(e))&&null!==e}function a(e){return void 0===e}var u="function"==typeof Symbol&&"symbol"==babelHelpers.typeof(Symbol.iterator)?function(e){return babelHelpers.typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":babelHelpers.typeof(e)};e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!s(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,s,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(babelHelpers.instanceof(t=arguments[1],Error))throw t;var c=new Error("Uncaught, unspecified \"error\" event. ("+t+")");throw c.context=t,c}if(n=this._events[e],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s);}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),l=n.slice(),r=l.length,u=0;u<r;u++){l[u].apply(this,s)}return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,s,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;0<a--;){if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events){"removeListener"!==t&&this.removeAllListeners(t)}return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;){this.removeListener(e,n[n.length-1])}return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},/*!*******************************!*\
  !*** ./src/base/polyfills.js ***!
  \*******************************/function(e,t,n){"use strict";e.exports=function(){void 0===Array.prototype.includes&&Object.defineProperty(Array.prototype,"includes",{value:function value(e,t){if(null===this)throw new TypeError("\"this\" is null or not defined");var n=Object(this),r=n.length>>>0;if(0===r)return!1;for(var i=0|t,s=Math.max(0<=i?i:r-Math.abs(i),0);s<r;){if(function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}(n[s],e))return!0;s++}return!1}})}},/*!*****************************!*\
  !*** ./src/receivers-v1.js ***!
  \*****************************/function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(/*! ./services/receivers-get-v1.js */4),s=r(i),o=n(/*! ./models/collection.js */3),a=r(o),u=n(/*! ./models/entity.js */2),l=r(u),c=n(/*! ./base/storage-polyfill.js */1),h=r(c);e.exports={receivers:{get:s.default},models:{collection:a.default,entity:l.default},tools:{storage:h.default}}},/*!******************************!*\
  !*** ./src/request/_base.js ***!
  \******************************/function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=babelHelpers.typeof(t)&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++){n=arguments[t];for(var r in n){Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}return e},u="function"==typeof Symbol&&"symbol"==babelHelpers.typeof(Symbol.iterator)?function(e){return babelHelpers.typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":babelHelpers.typeof(e)},l=function(){function e(e,t){for(var n=0,r;n<t.length;n++){r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(/*! ../base/_base */0),h=r(c),f=n(/*! ../base/storage-polyfill */1),p=r(f),d={JWT:"jwt",TSEC:"tsec",NONE:"none"},v=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;i(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.host="http://localhost:8100",n.version="0",n.method="GET",n.params=null,n.body=null,n.headers=null,n.timeout=60,n.requiresTsec=!1,n.tsecHandler=null,n.requiresJWT=!1,n.jwtHandler=null,n.requiredToken=null,n.cacheType="NONE",n.cacheKey="bgadp",n.encodeCache=!1,n.withCredentials=!1,n.simulate=[],n.native=!1,n.jwtHeaderName="vnd.bbva.access-token",n.semaasMonitoring=!1,n.htmlContext=null,n.responseType="text",n.signatureFirstErrorCode="70",n.emitRequestEvents=!0,n._assignPrivateValues(),n._assignConstantValues(),n._assignConfigValues(e),n._assingSecurityToken(),n._setCacheEngine(),n}return o(t,e),l(t,[{key:"_assignPrivateValues",value:function value(){var e=this,t={_className:"BGADPRequestBase",_headers:{Accept:"application/json, text/html, */*; q=0.1","Content-Type":"application/json"},_promise:null,_request:null,_lastResponse:null,_lastResponseHeaders:null,_cacheItem:null};Object.keys(t).forEach(function(n){Object.defineProperty(e,n,{configurable:!1,enumerable:!1,value:t[n],writable:"_headers"!==n})},this),Object.defineProperty(this,"_memCache",{configurable:!1,enumerable:!1,value:new p.default,writable:!1}),Object.defineProperty(this,"_ERROR_CODES",{configurable:!0,enumerable:!0,value:{SIGNATURE_REQUIRED:["70","999"],SIGNATURE_INVALID:["168"]}})}},{key:"_assignConstantValues",value:function value(){var e=this;["_DEFAULT_XHR","_NATIVE_XHR"].forEach(function(t,n){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,value:n})},this),["_CACHE_NONE","_CACHE_LOCAL","_CACHE_SESSION","_CACHE_MEMORY"].forEach(function(t,n){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,value:n})},this)}},{key:"_assignConfigValues",value:function value(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;void 0!==t&&null!==t&&"object"===(void 0===t?"undefined":u(t))&&Object.keys(t).forEach(function(n){if(e.hasOwnProperty(n)&&"_"!==n.charAt(0)&&"function"!=typeof e[n])switch(u(e[n])){case"object":Array.isArray(t[n])?e[n]=Array.from(t[n]):null===e[n]?e[n]=t[n]:e[n]=a(e[n]||{},t[n]);break;case"string":case"number":case"boolean":default:e[n]=t[n];}else"signatureRequiredErrors"===n?e._ERROR_CODES.SIGNATURE_REQUIRED=t[n]:"signatureInvalidErrors"===n?e._ERROR_CODES.SIGNATURE_INVALID=t[n]:("function"==typeof e[n]&&e._error(1,n+" is a class method, can't be override"),"_"===n.charAt(0)&&e._error(2,"\""+n+"\" is a restricted property, can't be override"),e.hasOwnProperty(n)||e._error(3,"\""+n+"\" is not a valid property for "+e._className))},this),Object.defineProperty(this,"_xhrType",{configurable:!1,enumerable:!1,value:this.native?this._NATIVE_XHR:this._DEFAULT_XHR,writable:!1})}},{key:"_assingSecurityToken",value:function value(){null===this.requiredToken?(this.requiresTsec?this.requiredToken=d.TSEC:this.requiredToken=d.NONE,this.requiresJWT=!1):this.requiredToken===d.TSEC?(this.requiresTsec=!0,this.requiresJWT=!1):this.requiredToken===d.JWT?(this.requiresJWT=!0,this.requiresTsec=!1):this.requiredToken===d.NONE?(this.requiresJWT=!1,this.requiresTsec=!1):this._error(1,"requiredToken has an invalid value "+this.requiredToken),this._setTsecHandler(),this._setJwtHandler()}},{key:"_setTsecHandler",value:function value(){this._setTokenHandler(d.TSEC)}},{key:"_setJwtHandler",value:function value(){this._setTokenHandler(d.JWT)}},{key:"_setTokenHandler",value:function value(e){var t=e+"Handler";this[t]=this[t]||window.sessionStorage;try{this[t].setItem("test","test"),this[t].removeItem("test")}catch(e){this._error(4,"Invalid ["+t+"]. If not specified, default window.sessionStorage can't be written/read",e)}}},{key:"_setCacheEngine",value:function value(){this._cache=this["_CACHE_"+this.cacheType.toUpperCase()],void 0===this._cache&&this._error(5,"Invalid [cacheType] value. \"NONE\", \"LOCAL\", \"SESSION\" or \"MEMORY\" are available")}},{key:"_setPath",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";e&&"string"==typeof e?Object.defineProperty(this,"_path",{configurable:!1,enumerable:!0,value:e,writable:!1}):this._error(6,"[path] is required")}},{key:"_buildPromise",value:function value(){var e=this,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(!this._promise||this._promise.promise&&!this._promise.isPending){var n={isPending:!0};n.promise=new window.Promise(function(r,i){n=a(n,{resolve:r,reject:i}),e._buildRequest(t)}),this._promise=a({},n)}return this._promise.promise}},{key:"_defaultXHR",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=new window.XMLHttpRequest;if(babelHelpers.instanceof(t,window.XMLHttpRequest)){t.withCredentials=this.withCredentials,t.timeout=1e3*this.timeout,t.onreadystatechange=this._onReadyStateChange.bind(this),t.responseType=this.responseType,t.open(this.method.toUpperCase(),e);var n=this._getRequestHeaders();Object.keys(n).forEach(function(e){t.setRequestHeader(e,n[e])}),t.send(this._buildBody())}return t}},{key:"_nativeXHR",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=this._buildNativeRequest();return t?(t=t[this.method.toLowerCase()],"function"==typeof t?t=t(e,this._buildBody(),this._getRequestHeaders(),this._onRequestSuccess.bind(this),this._onRequestFail.bind(this)):this._error(7,"Methhod Http."+this.method.toLowerCase()+"() not present in native engine.")):this._error(8,"There isn't any native engine to build Http."+this.method.toLowerCase()+"() request."),t}},{key:"_buildNativeRequest",value:function value(){var e=!!window.CellsNativePlugins&&!!window.CellsNativePlugins.Http,t=!!window.cordovaCells&&!!window.cordovaCells.Http;return e?window.CellsNativePlugins.Http:t?window.cordovaCells.Http:null}},{key:"_buildRequest",value:function value(){var e=this,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=this._buildURL();if(this._cacheItem=this._retrieveFromCache(),!t&&this._cacheItem&&n===this._cacheItem.url&&this.method===this._cacheItem.method)setTimeout(function(){e._onRequestSuccess(e._cacheItem)},100);else if(!t&&Array.isArray(this.simulate)&&this.simulate.length)setTimeout(function(){e._onRequestSuccess({response:e.simulate.shift()})},100);else switch(null!==this._request&&(this._request=null),this._cacheItem=a({},{url:n,method:this.method,response:null}),this.emitRequestEvents&&this._emitRequestEvent("start"),this._xhrType){case this._DEFAULT_XHR:this._request=this._defaultXHR(n);break;case this._NATIVE_XHR:this._request=this._nativeXHR(n);}return this._request}},{key:"_buildURL",value:function value(){var e=this,t=[this.host,this._path].join("/");if(null!==this.params){var n=a({},this.params);-1!==t.lastIndexOf("{")&&(t=t.replace(/(\{[\w\-]+\})/g,function(t){var r=t.replace(/[\{\}]+/g,""),i=n[r];return i?delete n[r]:e._error(9,"Missing "+r+" param value"),i}),-1!==t.lastIndexOf("{")&&this._error(10,"Missing query [params]"));var r=Object.keys(n);r.length&&(t=[t,r.map(function(e){return e+"="+n[e]}).join("&")].join("?"))}return t}},{key:"_getRequestHeaders",value:function value(){var e=a(this._headers,this.headers||{});if(!0===this.requiresTsec&&(e=this._getTokenForRequestHeaders(d.TSEC,e)),!0===this.requiresJWT&&(e=this._getTokenForRequestHeaders(d.JWT,e)),!0===this.semaasMonitoring){var t=this._getSemaasHeaders();a(e,t)}return e}},{key:"_getSemaasHeaders",value:function value(){var e=["x-rho-traceid","x-rho-parentspanid"],t={};if(window.sessionStorage){var n=window.sessionStorage;e.forEach(function(e){var r=n.getItem(e);r&&"null"!==r&&(t[e]=r)})}return t}},{key:"_getTokenForRequestHeaders",value:function value(e,t){var n=e+"Handler",r=e===d.JWT?"JWT ":"",i=e===d.JWT?"Authorization":d.TSEC;if(void 0===this[n]||null===this[n])this._error(11,e+" handler is undefined");else{var s=this[n].getItem(e);s?t[i]=t[i]||r+s:this._error(12,"Missing '"+e+"' value")}return t}},{key:"_buildBody",value:function value(){var e=this.body;if(e&&this._xhrType===this._DEFAULT_XHR)if(this.headers&&"application/x-www-form-urlencoded"===this.headers["Content-Type"]){var t=[];Object.keys(e).forEach(function(n){t.push(n+"="+e[n])}),e=t.join("&")}else(!this.headers||this.headers&&"multipart/form-data"!==this.headers["Content-Type"])&&(e=JSON.stringify(e));return e}},{key:"_onReadyStateChange",value:function value(){var e=this._request;if(e&&e.readyState===window.XMLHttpRequest.DONE)switch(e.status.toString().charAt(0)){case"2":case"3":this._onRequestSuccess(e);break;case"4":case"5":default:this._onRequestFail(e);}}},{key:"_extractRequestResponse",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=null!==e?e.response:e;if(t&&"string"==typeof t)try{t=JSON.parse(t)}catch(e){t=null}return t}},{key:"_storeIntoCache",value:function value(){try{void 0!==this._cacheItem&&null!==this._cacheItem&&(this._cacheItem.response=this._lastResponse);var e=JSON.stringify(this._cacheItem);switch(this.encodeCache&&(e=window.btoa(e)),this._cache){case this._CACHE_MEMORY:this._memCache.setItem(this.cacheKey,e);break;case this._CACHE_LOCAL:window.localStorage.setItem(this.cacheKey,e);break;case this._CACHE_SESSION:window.sessionStorage.setItem(this.cacheKey,e);break;case this._CACHE_NONE:}}catch(e){this._error(13,"Can't write into cache engine: "+e.message,e)}}},{key:"_retrieveFromCache",value:function value(){var e=void 0;try{switch(this._cache){case this._CACHE_MEMORY:e=this._memCache.getItem(this.cacheKey);break;case this._CACHE_LOCAL:e=window.localStorage.getItem(this.cacheKey);break;case this._CACHE_SESSION:e=window.sessionStorage.getItem(this.cacheKey);break;case this._CACHE_NONE:}}catch(e){this._error(14,"Can't read from cache engine",e)}return e&&(this.encodeCache&&(e=window.atob(e)),"string"==typeof e&&/[\{\[]/.test(e.charAt(0))&&(e=JSON.parse(e))),e}},{key:"_setLastResponse",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;e&&(this._lastResponse=a({},e))}},{key:"_setLastResponseHeaders",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t={};e&&(babelHelpers.instanceof(e,window.XMLHttpRequest)?t=this._parseResponseHeadersToObject(e.getAllResponseHeaders()):e.headers&&(t=JSON.parse(e.headers))),this._lastResponseHeaders=t}},{key:"_parseResponseHeadersToObject",value:function value(e){var t={},n=e.trim().split(/[\r\n]+/);for(var r in n){if(n.hasOwnProperty(r)&&""!==n[r]){var i=n[r],s=i.split(": ");t[s.shift().toLowerCase()]=s.join(": ")}}return t}},{key:"_setLastResponse",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;e&&(this._lastResponse=a({},e))}},{key:"_onRequestSuccess",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this._setLastResponse(this._extractRequestResponse(e)),this._setLastResponseHeaders(e),this.requiresJWT&&this.jwtHandler&&this._storeToken(this.jwtHandler,e,"jwt",this.jwtHeaderName),this.tsecHandler&&this._storeToken(this.tsecHandler,e,"tsec","tsec"),this._storeIntoCache(),this._onRequestEnd("resolve",e)}},{key:"_storeToken",value:function value(e,t,n,r){var i=null;switch(this._xhrType){case this._DEFAULT_XHR:i=t&&t.getResponseHeader&&t.getResponseHeader(r);break;case this._NATIVE_XHR:i=JSON.parse(t.headers)[r];}i&&e.getItem(n)!==i&&(e.setItem(n,i),this._emitTokenUpdate(n,i))}},{key:"_emitTokenUpdate",value:function value(e,t){if(this.htmlContext){var n=new CustomEvent("token-update",{bubbles:!0,detail:{type:e,token:t}});this.htmlContext.dispatchEvent(n)}}},{key:"_emitRequestEvent",value:function value(e){this.emit("http-request-"+e,new CustomEvent("http-request-"+e,{bubbles:!0,composed:!0}))}},{key:"_onRequestFail",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this._isSignatureRequired(e)||(this._setLastResponse(this._extractRequestResponse(e)),this._setLastResponseHeaders(e),this._storeIntoCache(),this._onRequestEnd("reject",e))}},{key:"_onRequestEnd",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"resolve",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;this._resetDPState(),this.emitRequestEvents&&this._emitRequestEvent("end"),this._promise&&"function"==typeof this._promise[e]&&(this._promise.isPending=!1,this._promise[e](t))}},{key:"_resetDPState",value:function value(){var e=this;["Data","Type","State"].forEach(function(t){var n="Authentication"+t;e._headers&&e._headers.hasOwnProperty(n)&&delete e._headers[n],e.headers&&e.headers.hasOwnProperty(n)&&delete e.headers[n]},this),this.hasOwnProperty("signatureValue")&&delete this.signatureValue,this.hasOwnProperty("signatureType")&&delete this.signatureType}},{key:"_extractSignatureResponseHeaders",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=void 0,n=void 0,r=void 0;if(babelHelpers.instanceof(e,window.XMLHttpRequest))t=e.getResponseHeader("AuthenticationType"),n=e.getResponseHeader("AuthenticationData"),r=e.getResponseHeader("AuthenticationState");else{var i=JSON.parse(e.headers);t=i.authenticationtype,n=i.authenticationdata,r=i.authenticationstate}return{type:t,data:n,state:r}}},{key:"_defineSignatureType",value:function value(){var e=this,t=arguments;Object.defineProperty(this,"signatureType",{enumerable:!0,configurable:!0,set:function set(n){e._onSignatureTypeChange.apply(e,[n].concat(Array.prototype.slice.call(t)))}})}},{key:"_defineSignatureValue",value:function value(){var e=this,t=arguments;Object.defineProperty(this,"signatureValue",{enumerable:!0,configurable:!0,set:function set(n){e._onSignatureValueChange.apply(e,[n].concat(Array.prototype.slice.call(t)))}})}},{key:"_onSignatureTypeChange",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";if("string"==typeof e&&""!==e)if(t.includes(e)){if("string"==typeof e&&""!==e){var r=this._getSignatureData(e,t,n);this.headers=a(this.headers||{},{AuthenticationType:e,AuthenticationData:r}),this._buildRequest()}}else this._error(15,e+" is not a valid signature type");"boolean"==typeof e&&!1===e&&this._onRequestEnd("reject",this._extractRequestResponse(this._request))}},{key:"_onSignatureValueChange",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",i=void 0;"object"===(void 0===e?"undefined":u(e))&&e?(i=this._getSignatureData(e.signatureType,t,n)+"="+e.signatureValue,e.challenge&&(i+=",challenge="+e.challenge),this._buildSignatureHeaders(i,e.signatureType,r)):"string"==typeof e&&""!==e&&(i=n+"="+e,this._buildSignatureHeaders(i,t,r)),"boolean"==typeof e&&!1===e&&this._onRequestEnd("reject",this._extractRequestResponse(this._request))}},{key:"_buildSignatureHeaders",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";this.headers=a(this.headers||{},{AuthenticationData:e,AuthenticationType:t||""}),n&&(this.headers=a(this.headers,{AuthenticationState:n})),this._buildRequest()}},{key:"_isSignatureRequired",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=this._extractRequestResponse(e);if(!t)return!1;var n=this._ERROR_CODES.SIGNATURE_REQUIRED.find(function(e){return t["error-code"]===e}),r=this._ERROR_CODES.SIGNATURE_INVALID.find(function(e){return t["error-code"]===e}),i=!(!e||401!==+e.status)&&void 0!==t["error-code"]&&(n||r),s=t["error-code"]===this.signatureFirstErrorCode;if(i)if(r)this.emit("signature-invalid",new CustomEvent("signature-invalid",{bubbles:!0}));else{var o=this._extractSignatureResponseHeaders(e),a=o.type,u=o.data,l=o.state;if(a&&u){var c="";s?(c="signature-required-first-step",this._defineSignatureType(a,u),this._defineSignatureValue(a,u,l)):(c="signature-required",this._defineSignatureValue(a,u,l));var h=new CustomEvent(c,{bubbles:!0,detail:{type:a,data:u}});this.emit(c,h)}else i=!1}return i}},{key:"_getSignatureData",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",r=t.split(";").findIndex(function(t){return t===e});return n.split(";")[r]}},{key:"toString",value:function value(){return"[object "+((0<arguments.length&&void 0!==arguments[0]?arguments[0]:"")||this._className)+"]"}},{key:"getLastResponse",value:function value(){return this._lastResponse}},{key:"getLastResponseHeaders",value:function value(){return this._lastResponseHeaders}},{key:"getLastRequest",value:function value(){return this._request}},{key:"generateRequest",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this._buildPromise(e)}}]),t}(h.default);t.default=v},/*!****************************!*\
  !*** ./src/request/get.js ***!
  \****************************/function(e,t,n){"use strict";function r(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=babelHelpers.typeof(t)&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++){n=arguments[t];for(var r in n){Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}return e},a=function(){function e(e,t){for(var n=0,r;n<t.length;n++){r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},l=n(/*! ./_base.js */8),c=function(e){return e&&e.__esModule?e:{default:e}}(l),h=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o(e||{},{method:"GET"})))}return s(t,e),a(t,[{key:"toString",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toString",this).call(this,e||"BGADPRequestGET")}}]),t}(c.default);t.default=h}])});</script><dom-module id="cells-dm-global-apis-receivers" assetpath="cells-dm-global-apis-receivers/"><template></template><script>/*global BGADPReceivers*/ /*eslint new-cap: 0*/ /**
* @summary CELLS Data Manager for GLOBAL APIS Receivers.
* @customElement
* @polymer
* @extends {Polymer.Element}
*/var CellsDmGlobalApisReceivers=/*#__PURE__*/function(_Polymer$mixinBehavio){babelHelpers.inherits(CellsDmGlobalApisReceivers,_Polymer$mixinBehavio);function CellsDmGlobalApisReceivers(){babelHelpers.classCallCheck(this,CellsDmGlobalApisReceivers);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(CellsDmGlobalApisReceivers).apply(this,arguments))}babelHelpers.createClass(CellsDmGlobalApisReceivers,[{key:"getReceiver",/**
   * Search receiver by magic query
   */value:function getReceiver(params){var _this=this;params=params?{"product.number":params.number}:{};var service=this._getService("Receivers",this.receiversApiVersion,"receivers.get",{host:this.host,params:params,version:this.receiversApiVersion,requiredToken:this.requiredToken,native:this.native});service.generateRequest().then(function(){var response=_this._parseResponse(service.getLastResponse());_this.set("receiver",_this._parseReceiver(response,params["product.number"]));_this._generateAvailableCurrencies(response);_this.dispatchEvent(new CustomEvent("set-receiver",{bubbles:!0,composed:!0,detail:response&&_this._generateReceiver(response)}))},this._generateErrorFireEventHandler("error-on-get-receiver"))}/**
   * Parse receviers
   */},{key:"_parseReceiver",value:function _parseReceiver(response,number){var found=!!response,receiver=found?this._generateReceiver(response):{number:number},complete=!!(receiver.number&&receiver.name&&receiver.bank);return{complete:complete,found:found,notification:this._generateNotification(complete,found),recipient:receiver}}/**
   * Parse names and surnames
   */},{key:"_parseName",value:function _parseName(text){return text.toLowerCase().split(" ").map(function(s){return s.charAt(0).toUpperCase()+s.substring(1)}).join(" ")}/**
   * Parse receviers
   */},{key:"_generateReceiver",value:function _generateReceiver(receiver){var _this2=this;receiver=receiver||[{product:{currencies:[]}}];var name="",receiverData;if(receiver&&0<receiver.length){receiverData=receiver[0]}var names=receiver.reduce(function(result,item){var person=(item||{}).person;if((person||{}).firstName&&person.lastName){result.push("".concat(_this2._parseName(person.firstName)," ").concat(_this2._parseName(person.lastName)))}if((person||{}).legalName){result.push("".concat(_this2._parseName(person.legalName)))}return result},[]);if(1===names.length){name=names[0]}return Object.assign(receiverData.product,{id:receiverData.id,name:name||"cells-step-recipient-selector-joint-account",namesJoined:1<names.length?names.join(", "):"",names:1<names.length?names:!1,currencies:receiverData.product.currencies,personType:receiverData.personType,classNamesJoined:1<names.length?"joint-account-image":"",beneficiaresImage:1<names.length?Polymer.ResolveUrl.resolveUrl("images/transactions/multi.png"):""})}/**
   * Generate receviers available currencies
   */},{key:"_generateAvailableCurrencies",value:function _generateAvailableCurrencies(response){if(response){var availableCurrencies=[],currencies={UYU:{id:"UYU",currency:"$"},USD:{id:"USD",currency:"U$S"},EUR:{id:"EUR",currency:"\u20AC"}};this._parseAvailableCurrencies(response).map(function(item){availableCurrencies.push(currencies[item])});this.dispatchEvent(new CustomEvent("set-available-currencies",{detail:availableCurrencies,bubbles:!0,composed:!0}))}}},{key:"_parseAvailableCurrencies",value:function _parseAvailableCurrencies(response){response=response||{product:{}};if(response&&response.length){response=response[0]}if(response.product.currencies){return response.product.currencies.reduce(function(acc,currency){acc.push(currency.id);return acc},[])}else{return["UYU","USD"]}}/**
   * Generate Notification by complete/incomplete
   */},{key:"_generateNotification",value:function _generateNotification(complete,found){return{type:complete&&found?"success":"info",icon:"coronita:"+(complete?"correct":"info"),message:"cells-new-recipient-review-notification-message-"+(!found?"not-found":complete?"success":"info")}}/**
   * Parse response
   */},{key:"_parseResponse",value:function _parseResponse(response){return response&&response.data||null}}],[{key:"is",get:function get(){return"cells-dm-global-apis-receivers"}},{key:"properties",get:function get(){return{/**
       * Chosen domain to make requests.
       */host:String,/**
       * Receiver
       */receiver:{type:Object,notify:!0},/**
       * Receivers API version
       */receiversApiVersion:{type:String,value:"0"},/**
       * requiredToken, 'jwt' or 'tsec'
       */requiredToken:{type:String,value:"tsec"},/**
      * Native request
      */native:{type:Boolean,value:!1}}}}]);return CellsDmGlobalApisReceivers}(Polymer.mixinBehaviors([CellsBehaviors.CellsGlobalApisHandleRequest,CellsBehaviors.CellsGlobalApisHandleRequestSign,CellsBehaviors.CellsGlobalApisHandleRequestError,CellsBehaviors.CellsGlobalApisServiceGetter],Polymer.Element));window.customElements.define(CellsDmGlobalApisReceivers.is,CellsDmGlobalApisReceivers);</script></dom-module><script>!function(e,t){"object"==("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))&&"object"==("undefined"===typeof module?"undefined":babelHelpers.typeof(module))?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))?exports.BGADPCatalogsV0=t():e.BGADPCatalogsV0=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=9)}([/*!***************************!*\
  !*** ./src/base/_base.js ***!
  \***************************/function(e,t,n){"use strict";function r(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=babelHelpers.typeof(t)&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0,r;n<t.length;n++){r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(/*! events */7),u=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),o(t,[{key:"_error",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;throw e=e.toString(),e=("0000"+e).substr(e.length),Error("BGADP_ERROR_"+e+" :: "+t+" :: "+(n&&n.message))}}]),t}(u.default);t.default=l},/*!**************************************!*\
  !*** ./src/base/storage-polyfill.js ***!
  \**************************************/function(e,t,n){"use strict";function r(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=babelHelpers.typeof(t)&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0,r;n<t.length;n++){r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(/*! ./_base */0),u=function(e){return e&&e.__esModule?e:{default:e}}(a);n(/*! ./polyfills.js */8)();var l=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Object.defineProperty(e,"_reservedKeys",{value:["_items","_reservedKeys","setItem","getItem","removeItem"]}),Object.defineProperty(e,"_items",{configurable:!1,enumerable:!0,value:{},writable:!0}),e}return s(t,e),o(t,[{key:"length",get:function get(){return Object.keys(this._items).length}}]),o(t,[{key:"setItem",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";if("string"==typeof e&&e){if(this._reservedKeys.includes(e))this._error(2,"\""+e+"\" should NOT be a reserved key");else{if("string"!=typeof t)try{t=JSON.stringify(t)}catch(e){this._error(1,"\""+t+"\" couldn't be transformed into String")}t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this._items[e]=t}}else this._error(3,"Missing {item} parameter")}},{key:"getItem",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return this._items[e]?this._items[e]:null}},{key:"removeItem",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";this._items.hasOwnProperty(e)&&delete this._items[e]}},{key:"clear",value:function value(){Object.keys(this._items).length&&(this._items={})}}]),t}(u.default);t.default=l},/*!******************************!*\
  !*** ./src/models/entity.js ***!
  \******************************/function(e,t,n){"use strict";function r(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=babelHelpers.typeof(t)&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(/*! ../base/_base */0),a=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e&&Object.keys(e).forEach(function(t){Object.defineProperty(n,t,{enumerable:!0,configurable:!1,value:e[t],writable:!0})},n),n}return s(t,e),t}(a.default);t.default=u},/*!****************************!*\
  !*** ./src/request/get.js ***!
  \****************************/function(e,t,n){"use strict";function r(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=babelHelpers.typeof(t)&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++){n=arguments[t];for(var r in n){Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}return e},a=function(){function e(e,t){for(var n=0,r;n<t.length;n++){r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},l=n(/*! ./_base.js */10),c=function(e){return e&&e.__esModule?e:{default:e}}(l),h=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o(e||{},{method:"GET"})))}return s(t,e),a(t,[{key:"toString",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toString",this).call(this,e||"BGADPRequestGET")}}]),t}(c.default);t.default=h},/*!**********************************!*\
  !*** ./src/models/collection.js ***!
  \**********************************/function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=babelHelpers.typeof(t)&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0,r;n<t.length;n++){r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(/*! ../base/_base */0),l=r(u),c=n(/*! ./entity */2),h=r(c),f=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;i(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._items=[],Array.isArray(e)&&(n._items=e.map(function(e){return babelHelpers.instanceof(e,h.default)?e:new h.default(e)})),n}return o(t,e),a(t,[{key:"_compareValues",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return e<t?-1:e>t?1:0}},{key:"_dotProp",value:function value(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=JSON.parse(JSON.stringify(e)),r=t.split(".");r.length&&n;){n=n[r.shift()]}return n}},{key:"findFirst",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;if("string"==typeof e&&""!==e)return this._items.find(function(n){return n[e]===t?n:void 0});this._error(1,"findFirst: Param [key] ("+e+") is not valid!")}},{key:"sortBy",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=[e];return void 0!==n&&null!==n&&(Array.isArray(n)&&(i=i.concat(n)),"string"==typeof n&&i.push(n),"boolean"==typeof n&&(r=n)),Array.isArray(i)&&i.length&&"string"==typeof i[0]&&""!==i[0]?this._items.sort(function(e,n){for(var s=0,o=Array.from(i),a="",u="",l;!s&&o.length;){l=o.shift();-1!==l.lastIndexOf(".")?(a+=t._dotProp(e,l),u+=t._dotProp(n,l)):(a+=e[l],u+=n[l]),s+=t._compareValues(a,u)}return(0!==s?s/Math.abs(s):0)*(r?-1:1)}):this._error(2,"sortBy: Invalid [criteria] argument"),this._items}},{key:"length",value:function value(){return Array.isArray(this._items)?this._items.length:0}}]),t}(l.default);t.default=f},/*!*********************************************************!*\
  !*** ./src/services/catalogs-catalog-records-get-v0.js ***!
  \*********************************************************/function(e,t,n){"use strict";function r(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=babelHelpers.typeof(t)&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++){n=arguments[t];for(var r in n){Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}return e},a=function(){function e(e,t){for(var n=0,r;n<t.length;n++){r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},l=n(/*! ../request/get.js */3),c=function(e){return e&&e.__esModule?e:{default:e}}(l),h=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o({requiresTsec:!0},e||{})));return n._setPath("catalogs/v"+n.version+"/catalogs/{catalog-id}/records"),n}return s(t,e),a(t,[{key:"toString",value:function value(){return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toString",this).call(this,"BGADPCatalogsCatalogRecordsGetV0")}}]),t}(c.default);t.default=h},/*!*****************************************!*\
  !*** ./src/services/catalogs-get-v0.js ***!
  \*****************************************/function(e,t,n){"use strict";function r(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=babelHelpers.typeof(t)&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++){n=arguments[t];for(var r in n){Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}return e},a=function(){function e(e,t){for(var n=0,r;n<t.length;n++){r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},l=n(/*! ../request/get.js */3),c=function(e){return e&&e.__esModule?e:{default:e}}(l),h=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o({requiresTsec:!0},e||{})));return n._setPath("catalogs/v"+n.version+"/catalogs"),n}return s(t,e),a(t,[{key:"toString",value:function value(){return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toString",this).call(this,"BGADPCatalogsGetV0")}}]),t}(c.default);t.default=h},/*!****************************!*\
  !*** ./~/events/events.js ***!
  \****************************/function(e,t,n){"use strict";function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function s(e){return"number"==typeof e}function o(e){return"object"===(void 0===e?"undefined":u(e))&&null!==e}function a(e){return void 0===e}var u="function"==typeof Symbol&&"symbol"==babelHelpers.typeof(Symbol.iterator)?function(e){return babelHelpers.typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":babelHelpers.typeof(e)};e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!s(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,s,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(babelHelpers.instanceof(t=arguments[1],Error))throw t;var c=new Error("Uncaught, unspecified \"error\" event. ("+t+")");throw c.context=t,c}if(n=this._events[e],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s);}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),l=n.slice(),r=l.length,u=0;u<r;u++){l[u].apply(this,s)}return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,s,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;0<a--;){if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events){"removeListener"!==t&&this.removeAllListeners(t)}return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;){this.removeListener(e,n[n.length-1])}return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},/*!*******************************!*\
  !*** ./src/base/polyfills.js ***!
  \*******************************/function(e,t,n){"use strict";e.exports=function(){void 0===Array.prototype.includes&&Object.defineProperty(Array.prototype,"includes",{value:function value(e,t){if(null===this)throw new TypeError("\"this\" is null or not defined");var n=Object(this),r=n.length>>>0;if(0===r)return!1;for(var i=0|t,s=Math.max(0<=i?i:r-Math.abs(i),0);s<r;){if(function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}(n[s],e))return!0;s++}return!1}})}},/*!****************************!*\
  !*** ./src/catalogs-v0.js ***!
  \****************************/function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(/*! ./services/catalogs-get-v0.js */6),s=r(i),o=n(/*! ./services/catalogs-catalog-records-get-v0.js */5),a=r(o),u=n(/*! ./models/collection.js */4),l=r(u),c=n(/*! ./models/entity.js */2),h=r(c),f=n(/*! ./base/storage-polyfill.js */1),p=r(f);e.exports={catalogs:{get:s.default,catalog:{records:{get:a.default}}},models:{collection:l.default,entity:h.default},tools:{storage:p.default}}},/*!******************************!*\
  !*** ./src/request/_base.js ***!
  \******************************/function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!babelHelpers.instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=babelHelpers.typeof(t)&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+babelHelpers.typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++){n=arguments[t];for(var r in n){Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}return e},u="function"==typeof Symbol&&"symbol"==babelHelpers.typeof(Symbol.iterator)?function(e){return babelHelpers.typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":babelHelpers.typeof(e)},l=function(){function e(e,t){for(var n=0,r;n<t.length;n++){r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(/*! ../base/_base */0),h=r(c),f=n(/*! ../base/storage-polyfill */1),p=r(f),d={JWT:"jwt",TSEC:"tsec",NONE:"none"},v=function(e){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;i(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.host="http://localhost:8100",n.version="0",n.method="GET",n.params=null,n.body=null,n.headers=null,n.timeout=60,n.requiresTsec=!1,n.tsecHandler=null,n.requiresJWT=!1,n.jwtHandler=null,n.requiredToken=null,n.cacheType="NONE",n.cacheKey="bgadp",n.encodeCache=!1,n.withCredentials=!1,n.simulate=[],n.native=!1,n.jwtHeaderName="vnd.bbva.access-token",n.semaasMonitoring=!1,n.htmlContext=null,n.responseType="text",n.signatureFirstErrorCode="70",n.emitRequestEvents=!0,n._assignPrivateValues(),n._assignConstantValues(),n._assignConfigValues(e),n._assingSecurityToken(),n._setCacheEngine(),n}return o(t,e),l(t,[{key:"_assignPrivateValues",value:function value(){var e=this,t={_className:"BGADPRequestBase",_headers:{Accept:"application/json, text/html, */*; q=0.1","Content-Type":"application/json"},_promise:null,_request:null,_lastResponse:null,_lastResponseHeaders:null,_cacheItem:null};Object.keys(t).forEach(function(n){Object.defineProperty(e,n,{configurable:!1,enumerable:!1,value:t[n],writable:"_headers"!==n})},this),Object.defineProperty(this,"_memCache",{configurable:!1,enumerable:!1,value:new p.default,writable:!1}),Object.defineProperty(this,"_ERROR_CODES",{configurable:!0,enumerable:!0,value:{SIGNATURE_REQUIRED:["70","999"],SIGNATURE_INVALID:["168"]}})}},{key:"_assignConstantValues",value:function value(){var e=this;["_DEFAULT_XHR","_NATIVE_XHR"].forEach(function(t,n){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,value:n})},this),["_CACHE_NONE","_CACHE_LOCAL","_CACHE_SESSION","_CACHE_MEMORY"].forEach(function(t,n){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,value:n})},this)}},{key:"_assignConfigValues",value:function value(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;void 0!==t&&null!==t&&"object"===(void 0===t?"undefined":u(t))&&Object.keys(t).forEach(function(n){if(e.hasOwnProperty(n)&&"_"!==n.charAt(0)&&"function"!=typeof e[n])switch(u(e[n])){case"object":Array.isArray(t[n])?e[n]=Array.from(t[n]):null===e[n]?e[n]=t[n]:e[n]=a(e[n]||{},t[n]);break;case"string":case"number":case"boolean":default:e[n]=t[n];}else"signatureRequiredErrors"===n?e._ERROR_CODES.SIGNATURE_REQUIRED=t[n]:"signatureInvalidErrors"===n?e._ERROR_CODES.SIGNATURE_INVALID=t[n]:("function"==typeof e[n]&&e._error(1,n+" is a class method, can't be override"),"_"===n.charAt(0)&&e._error(2,"\""+n+"\" is a restricted property, can't be override"),e.hasOwnProperty(n)||e._error(3,"\""+n+"\" is not a valid property for "+e._className))},this),Object.defineProperty(this,"_xhrType",{configurable:!1,enumerable:!1,value:this.native?this._NATIVE_XHR:this._DEFAULT_XHR,writable:!1})}},{key:"_assingSecurityToken",value:function value(){null===this.requiredToken?(this.requiresTsec?this.requiredToken=d.TSEC:this.requiredToken=d.NONE,this.requiresJWT=!1):this.requiredToken===d.TSEC?(this.requiresTsec=!0,this.requiresJWT=!1):this.requiredToken===d.JWT?(this.requiresJWT=!0,this.requiresTsec=!1):this.requiredToken===d.NONE?(this.requiresJWT=!1,this.requiresTsec=!1):this._error(1,"requiredToken has an invalid value "+this.requiredToken),this._setTsecHandler(),this._setJwtHandler()}},{key:"_setTsecHandler",value:function value(){this._setTokenHandler(d.TSEC)}},{key:"_setJwtHandler",value:function value(){this._setTokenHandler(d.JWT)}},{key:"_setTokenHandler",value:function value(e){var t=e+"Handler";this[t]=this[t]||window.sessionStorage;try{this[t].setItem("test","test"),this[t].removeItem("test")}catch(e){this._error(4,"Invalid ["+t+"]. If not specified, default window.sessionStorage can't be written/read",e)}}},{key:"_setCacheEngine",value:function value(){this._cache=this["_CACHE_"+this.cacheType.toUpperCase()],void 0===this._cache&&this._error(5,"Invalid [cacheType] value. \"NONE\", \"LOCAL\", \"SESSION\" or \"MEMORY\" are available")}},{key:"_setPath",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";e&&"string"==typeof e?Object.defineProperty(this,"_path",{configurable:!1,enumerable:!0,value:e,writable:!1}):this._error(6,"[path] is required")}},{key:"_buildPromise",value:function value(){var e=this,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(!this._promise||this._promise.promise&&!this._promise.isPending){var n={isPending:!0};n.promise=new window.Promise(function(r,i){n=a(n,{resolve:r,reject:i}),e._buildRequest(t)}),this._promise=a({},n)}return this._promise.promise}},{key:"_defaultXHR",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=new window.XMLHttpRequest;if(babelHelpers.instanceof(t,window.XMLHttpRequest)){t.withCredentials=this.withCredentials,t.timeout=1e3*this.timeout,t.onreadystatechange=this._onReadyStateChange.bind(this),t.responseType=this.responseType,t.open(this.method.toUpperCase(),e);var n=this._getRequestHeaders();Object.keys(n).forEach(function(e){t.setRequestHeader(e,n[e])}),t.send(this._buildBody())}return t}},{key:"_nativeXHR",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=this._buildNativeRequest();return t?(t=t[this.method.toLowerCase()],"function"==typeof t?t=t(e,this._buildBody(),this._getRequestHeaders(),this._onRequestSuccess.bind(this),this._onRequestFail.bind(this)):this._error(7,"Methhod Http."+this.method.toLowerCase()+"() not present in native engine.")):this._error(8,"There isn't any native engine to build Http."+this.method.toLowerCase()+"() request."),t}},{key:"_buildNativeRequest",value:function value(){var e=!!window.CellsNativePlugins&&!!window.CellsNativePlugins.Http,t=!!window.cordovaCells&&!!window.cordovaCells.Http;return e?window.CellsNativePlugins.Http:t?window.cordovaCells.Http:null}},{key:"_buildRequest",value:function value(){var e=this,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=this._buildURL();if(this._cacheItem=this._retrieveFromCache(),!t&&this._cacheItem&&n===this._cacheItem.url&&this.method===this._cacheItem.method)setTimeout(function(){e._onRequestSuccess(e._cacheItem)},100);else if(!t&&Array.isArray(this.simulate)&&this.simulate.length)setTimeout(function(){e._onRequestSuccess({response:e.simulate.shift()})},100);else switch(null!==this._request&&(this._request=null),this._cacheItem=a({},{url:n,method:this.method,response:null}),this.emitRequestEvents&&this._emitRequestEvent("start"),this._xhrType){case this._DEFAULT_XHR:this._request=this._defaultXHR(n);break;case this._NATIVE_XHR:this._request=this._nativeXHR(n);}return this._request}},{key:"_buildURL",value:function value(){var e=this,t=[this.host,this._path].join("/");if(null!==this.params){var n=a({},this.params);-1!==t.lastIndexOf("{")&&(t=t.replace(/(\{[\w\-]+\})/g,function(t){var r=t.replace(/[\{\}]+/g,""),i=n[r];return i?delete n[r]:e._error(9,"Missing "+r+" param value"),i}),-1!==t.lastIndexOf("{")&&this._error(10,"Missing query [params]"));var r=Object.keys(n);r.length&&(t=[t,r.map(function(e){return e+"="+n[e]}).join("&")].join("?"))}return t}},{key:"_getRequestHeaders",value:function value(){var e=a(this._headers,this.headers||{});if(!0===this.requiresTsec&&(e=this._getTokenForRequestHeaders(d.TSEC,e)),!0===this.requiresJWT&&(e=this._getTokenForRequestHeaders(d.JWT,e)),!0===this.semaasMonitoring){var t=this._getSemaasHeaders();a(e,t)}return e}},{key:"_getSemaasHeaders",value:function value(){var e=["x-rho-traceid","x-rho-parentspanid"],t={};if(window.sessionStorage){var n=window.sessionStorage;e.forEach(function(e){var r=n.getItem(e);r&&"null"!==r&&(t[e]=r)})}return t}},{key:"_getTokenForRequestHeaders",value:function value(e,t){var n=e+"Handler",r=e===d.JWT?"JWT ":"",i=e===d.JWT?"Authorization":d.TSEC;if(void 0===this[n]||null===this[n])this._error(11,e+" handler is undefined");else{var s=this[n].getItem(e);s?t[i]=t[i]||r+s:this._error(12,"Missing '"+e+"' value")}return t}},{key:"_buildBody",value:function value(){var e=this.body;if(e&&this._xhrType===this._DEFAULT_XHR)if(this.headers&&"application/x-www-form-urlencoded"===this.headers["Content-Type"]){var t=[];Object.keys(e).forEach(function(n){t.push(n+"="+e[n])}),e=t.join("&")}else(!this.headers||this.headers&&"multipart/form-data"!==this.headers["Content-Type"])&&(e=JSON.stringify(e));return e}},{key:"_onReadyStateChange",value:function value(){var e=this._request;if(e&&e.readyState===window.XMLHttpRequest.DONE)switch(e.status.toString().charAt(0)){case"2":case"3":this._onRequestSuccess(e);break;case"4":case"5":default:this._onRequestFail(e);}}},{key:"_extractRequestResponse",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=null!==e?e.response:e;if(t&&"string"==typeof t)try{t=JSON.parse(t)}catch(e){t=null}return t}},{key:"_storeIntoCache",value:function value(){try{void 0!==this._cacheItem&&null!==this._cacheItem&&(this._cacheItem.response=this._lastResponse);var e=JSON.stringify(this._cacheItem);switch(this.encodeCache&&(e=window.btoa(e)),this._cache){case this._CACHE_MEMORY:this._memCache.setItem(this.cacheKey,e);break;case this._CACHE_LOCAL:window.localStorage.setItem(this.cacheKey,e);break;case this._CACHE_SESSION:window.sessionStorage.setItem(this.cacheKey,e);break;case this._CACHE_NONE:}}catch(e){this._error(13,"Can't write into cache engine: "+e.message,e)}}},{key:"_retrieveFromCache",value:function value(){var e=void 0;try{switch(this._cache){case this._CACHE_MEMORY:e=this._memCache.getItem(this.cacheKey);break;case this._CACHE_LOCAL:e=window.localStorage.getItem(this.cacheKey);break;case this._CACHE_SESSION:e=window.sessionStorage.getItem(this.cacheKey);break;case this._CACHE_NONE:}}catch(e){this._error(14,"Can't read from cache engine",e)}return e&&(this.encodeCache&&(e=window.atob(e)),"string"==typeof e&&/[\{\[]/.test(e.charAt(0))&&(e=JSON.parse(e))),e}},{key:"_setLastResponse",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;e&&(this._lastResponse=a({},e))}},{key:"_setLastResponseHeaders",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t={};e&&(babelHelpers.instanceof(e,window.XMLHttpRequest)?t=this._parseResponseHeadersToObject(e.getAllResponseHeaders()):e.headers&&(t=JSON.parse(e.headers))),this._lastResponseHeaders=t}},{key:"_parseResponseHeadersToObject",value:function value(e){var t={},n=e.trim().split(/[\r\n]+/);for(var r in n){if(n.hasOwnProperty(r)&&""!==n[r]){var i=n[r],s=i.split(": ");t[s.shift().toLowerCase()]=s.join(": ")}}return t}},{key:"_setLastResponse",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;e&&(this._lastResponse=a({},e))}},{key:"_onRequestSuccess",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this._setLastResponse(this._extractRequestResponse(e)),this._setLastResponseHeaders(e),this.requiresJWT&&this.jwtHandler&&this._storeToken(this.jwtHandler,e,"jwt",this.jwtHeaderName),this.tsecHandler&&this._storeToken(this.tsecHandler,e,"tsec","tsec"),this._storeIntoCache(),this._onRequestEnd("resolve",e)}},{key:"_storeToken",value:function value(e,t,n,r){var i=null;switch(this._xhrType){case this._DEFAULT_XHR:i=t&&t.getResponseHeader&&t.getResponseHeader(r);break;case this._NATIVE_XHR:i=JSON.parse(t.headers)[r];}i&&e.getItem(n)!==i&&(e.setItem(n,i),this._emitTokenUpdate(n,i))}},{key:"_emitTokenUpdate",value:function value(e,t){if(this.htmlContext){var n=new CustomEvent("token-update",{bubbles:!0,detail:{type:e,token:t}});this.htmlContext.dispatchEvent(n)}}},{key:"_emitRequestEvent",value:function value(e){this.emit("http-request-"+e,new CustomEvent("http-request-"+e,{bubbles:!0,composed:!0}))}},{key:"_onRequestFail",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this._isSignatureRequired(e)||(this._setLastResponse(this._extractRequestResponse(e)),this._setLastResponseHeaders(e),this._storeIntoCache(),this._onRequestEnd("reject",e))}},{key:"_onRequestEnd",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"resolve",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;this._resetDPState(),this.emitRequestEvents&&this._emitRequestEvent("end"),this._promise&&"function"==typeof this._promise[e]&&(this._promise.isPending=!1,this._promise[e](t))}},{key:"_resetDPState",value:function value(){var e=this;["Data","Type","State"].forEach(function(t){var n="Authentication"+t;e._headers&&e._headers.hasOwnProperty(n)&&delete e._headers[n],e.headers&&e.headers.hasOwnProperty(n)&&delete e.headers[n]},this),this.hasOwnProperty("signatureValue")&&delete this.signatureValue,this.hasOwnProperty("signatureType")&&delete this.signatureType}},{key:"_extractSignatureResponseHeaders",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=void 0,n=void 0,r=void 0;if(babelHelpers.instanceof(e,window.XMLHttpRequest))t=e.getResponseHeader("AuthenticationType"),n=e.getResponseHeader("AuthenticationData"),r=e.getResponseHeader("AuthenticationState");else{var i=JSON.parse(e.headers);t=i.authenticationtype,n=i.authenticationdata,r=i.authenticationstate}return{type:t,data:n,state:r}}},{key:"_defineSignatureType",value:function value(){var e=this,t=arguments;Object.defineProperty(this,"signatureType",{enumerable:!0,configurable:!0,set:function set(n){e._onSignatureTypeChange.apply(e,[n].concat(Array.prototype.slice.call(t)))}})}},{key:"_defineSignatureValue",value:function value(){var e=this,t=arguments;Object.defineProperty(this,"signatureValue",{enumerable:!0,configurable:!0,set:function set(n){e._onSignatureValueChange.apply(e,[n].concat(Array.prototype.slice.call(t)))}})}},{key:"_onSignatureTypeChange",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";if("string"==typeof e&&""!==e)if(t.includes(e)){if("string"==typeof e&&""!==e){var r=this._getSignatureData(e,t,n);this.headers=a(this.headers||{},{AuthenticationType:e,AuthenticationData:r}),this._buildRequest()}}else this._error(15,e+" is not a valid signature type");"boolean"==typeof e&&!1===e&&this._onRequestEnd("reject",this._extractRequestResponse(this._request))}},{key:"_onSignatureValueChange",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",i=void 0;"object"===(void 0===e?"undefined":u(e))&&e?(i=this._getSignatureData(e.signatureType,t,n)+"="+e.signatureValue,e.challenge&&(i+=",challenge="+e.challenge),this._buildSignatureHeaders(i,e.signatureType,r)):"string"==typeof e&&""!==e&&(i=n+"="+e,this._buildSignatureHeaders(i,t,r)),"boolean"==typeof e&&!1===e&&this._onRequestEnd("reject",this._extractRequestResponse(this._request))}},{key:"_buildSignatureHeaders",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";this.headers=a(this.headers||{},{AuthenticationData:e,AuthenticationType:t||""}),n&&(this.headers=a(this.headers,{AuthenticationState:n})),this._buildRequest()}},{key:"_isSignatureRequired",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=this._extractRequestResponse(e);if(!t)return!1;var n=this._ERROR_CODES.SIGNATURE_REQUIRED.find(function(e){return t["error-code"]===e}),r=this._ERROR_CODES.SIGNATURE_INVALID.find(function(e){return t["error-code"]===e}),i=!(!e||401!==+e.status)&&void 0!==t["error-code"]&&(n||r),s=t["error-code"]===this.signatureFirstErrorCode;if(i)if(r)this.emit("signature-invalid",new CustomEvent("signature-invalid",{bubbles:!0}));else{var o=this._extractSignatureResponseHeaders(e),a=o.type,u=o.data,l=o.state;if(a&&u){var c="";s?(c="signature-required-first-step",this._defineSignatureType(a,u),this._defineSignatureValue(a,u,l)):(c="signature-required",this._defineSignatureValue(a,u,l));var h=new CustomEvent(c,{bubbles:!0,detail:{type:a,data:u}});this.emit(c,h)}else i=!1}return i}},{key:"_getSignatureData",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",r=t.split(";").findIndex(function(t){return t===e});return n.split(";")[r]}},{key:"toString",value:function value(){return"[object "+((0<arguments.length&&void 0!==arguments[0]?arguments[0]:"")||this._className)+"]"}},{key:"getLastResponse",value:function value(){return this._lastResponse}},{key:"getLastResponseHeaders",value:function value(){return this._lastResponseHeaders}},{key:"getLastRequest",value:function value(){return this._request}},{key:"generateRequest",value:function value(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this._buildPromise(e)}}]),t}(h.default);t.default=v}])});</script><dom-module id="cells-dm-global-apis-catalogs" assetpath="cells-dm-global-apis-catalogs/"><template></template><script>/*eslint new-cap: 0*/ /* global BGADPCatalogs */ /**
* @summary CELLS Data Manager for GLOBAL APIS Catalogs.
* @customElementg
* @polymer
* @extends {Polymer.Element}
*/var CellsDmGlobalApisCatalogs=/*#__PURE__*/function(_Polymer$mixinBehavio){babelHelpers.inherits(CellsDmGlobalApisCatalogs,_Polymer$mixinBehavio);function CellsDmGlobalApisCatalogs(){babelHelpers.classCallCheck(this,CellsDmGlobalApisCatalogs);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(CellsDmGlobalApisCatalogs).apply(this,arguments))}babelHelpers.createClass(CellsDmGlobalApisCatalogs,[{key:"getBanks",value:function getBanks(data){if(!this.banks||!this.banks.length){this._getBanks(data)}else{this.dispatchEvent(new CustomEvent("set-banks",{bubbles:!0,composed:!0,detail:this.banks}))}}/**
   * Get banks
   */},{key:"_getBanks",value:function _getBanks(data){var _this=this;data=!data?"BANKS":data;this._getRecords(data).then(function(response){response=_this._parseBanks(response)||[];_this.set("banks",response);_this.dispatchEvent(new CustomEvent("set-banks",{bubbles:!0,composed:!0,detail:response}))},this._generateErrorFireEventHandler("error-on-get-banks"))}/**
 * Parse banks
 */},{key:"_parseBanks",value:function _parseBanks(banks){var _this2=this;return banks&&banks.reduce(function(acc,bank){var name=bank.descriptions.find(function(local){return local.language===_this2.localCurrency||"SPA"===local.language});acc.push({id:bank.id,name:name&&name.value});return acc},[])}/**
   * Set Transfer Reasons channel in
   */},{key:"getTreansferReasons",value:function getTreansferReasons(){var _this3=this;if(!this.transferReasons||!this.transferReasons.length){Promise.all([this._getRecords("TRANSFER_REASON"),this._getRecords("TRANSFER_REASON_DECLARATION")]).then(function(results){var transferReasonsGrouped=_this3._parseTreansferReasons(results);_this3.set("transferReasons",transferReasonsGrouped);_this3._dispatchCustomEvent("set-transfer-reasons",transferReasonsGrouped,!0,!0)},this._generateErrorFireEventHandler("error-on-get-movements-types"))}else{this._dispatchCustomEvent("set-transfer-reasons",this.transferReasons,!0,!0)}}/**
    * Parse Transfer Reasons
    * @param {Array} transferReasons
    * Join two arrays from getTreansferReasons response, set validate in true or false if the response is for TRANSFER_REASON request or TRANSFER_REASON_DECLARATION request and give correct formater for cells-modal-selector.
    */},{key:"_parseTreansferReasons",value:function _parseTreansferReasons(transferReasons){var _this4=this,grupedTransferReasons=[];transferReasons.forEach(function(item,i){item.forEach(function(obj){var description=_this4.get("descriptions.0.value",obj);grupedTransferReasons.push({id:obj.id,name:description,validate:!!i})})});return grupedTransferReasons}},{key:"getMovementsTypes",value:function getMovementsTypes(){if(!this.movementsTypes||!this.movementsTypes.length){this._getMovementsTypes()}else{this.dispatchEvent(new CustomEvent("set-movements-types",{bubbles:!0,composed:!0,detail:this.movementsTypes}))}}/**
   * Get movements types
   */},{key:"_getMovementsTypes",value:function _getMovementsTypes(){var _this5=this;this._getRecords("TRANSACTION_TYPES").then(function(response){response=_this5._parseMovementsTypes(response)||[];_this5.set("movementsTypes",response);_this5.dispatchEvent(new CustomEvent("set-movements-types",{bubbles:!0,composed:!0,detail:response}))},this._generateErrorFireEventHandler("error-on-get-movements-types"))}/**
   * Get movements types
   */},{key:"getCardTypes",value:function getCardTypes(){var _this6=this;this.dispatchEvent(new CustomEvent("init-card-types",{bubbles:!0,composed:!0,detail:!0}));this._getRecords(this.cardTypeId,!0).then(function(response){response=response||[];_this6.set("cardTypes",response);_this6.dispatchEvent(new CustomEvent("set-card-types",{bubbles:!0,composed:!0,detail:response}))},this._generateErrorFireEventHandler("error-on-get-card-types"))}/**
  * Parse movements types
  */},{key:"_parseMovementsTypes",value:function _parseMovementsTypes(movements){var _this7=this;return movements&&movements.reduce(function(acc,movement){var name=movement.descriptions.find(function(local){return local.language===_this7.localCurrency||"SPA"===local.language});acc.push({id:movement.id,name:name&&name.value});return acc},[])}/**
   * Get catalogs
   */},{key:"_getCatalogs",value:function _getCatalogs(){var _this8=this,service=this._getService("Catalogs",this.catalogsApiVersion,"catalogs.get",{host:this.host,version:this.catalogsApiVersion,requiredToken:this.requiredToken,native:this.native});service.generateRequest().then(function(){_this8.dispatchEvent(new CustomEvent("set-catalogs",{bubbles:!0,composed:!0,detail:_this8._parseResponse(service.getLastResponse())}))},this._generateErrorFireEventHandler("error-on-get-catalogs"))}/**
   * Get glossary
   */},{key:"getGlossary",value:function getGlossary(catalogId){var _this9=this;this._getRecords(catalogId).then(function(response){_this9.dispatchEvent(new CustomEvent("set-glossary",{bubbles:!0,composed:!0,detail:response}))},this._generateErrorFireEventHandler("error-on-get-glossary"))}/**
   * Get records limits
   */},{key:"getRecordsLimits",value:function getRecordsLimits(catalogId){var _this10=this;this._getRecords(catalogId).then(function(response){_this10.dispatchEvent(new CustomEvent("set-records-limits",{bubbles:!0,composed:!0,detail:response}))},this._generateErrorFireEventHandler("error-on-get-records-limits"))}/**
   * Get records
   */},{key:"_getRecords",value:function _getRecords(id,noHandleError){var _this11=this,service=this._getService("Catalogs",this.catalogsApiVersion,"catalogs.catalog.records.get",{host:this.host,params:{"catalog-id":id},version:this.catalogsApiVersion,requiredToken:this.requiredToken,native:this.native});return service.generateRequest().then(function(){return _this11._parseResponse(service.getLastResponse())},function(err){if(!noHandleError){return _this11._generateErrorFireEventHandler("error-on-get-records").apply(_this11,[err])}return Promise.reject(err)})}/**
   * Public method to get the provinces
   * @emits set-provinces
   */},{key:"getProvinces",value:function getProvinces(){if(this.provinces&&this.provinces.length){this._emitProvinces(this.provinces)}else{this._getProvinces()}}/**
   * Emits an event with the provinces info
   * @param {Array} provinces
   */},{key:"_emitProvinces",value:function _emitProvinces(provinces){this._dispatchCustomEvent("set-provinces",provinces)}/**
   * Gets the records for the provinces with the catalog API
   */},{key:"_getProvinces",value:function _getProvinces(){var _this12=this;this._dispatchCustomEvent("open-veil");this._getRecords(this.provincesCatalogId).then(function(provinces){_this12._dispatchCustomEvent("close-veil");if(provinces){_this12.set("provinces",_this12._parseProvinces(provinces));_this12._emitProvinces(_this12.provinces)}else{_this12._dispatchCustomEvent("error-on-get-provinces","cells-global-account-spei-link-error-message")}})}/**
   * Parses the provinces-response data
   * @param {Array} provinces
   * @returns {Array<Object>}
   * @example {"name":"LIMA Y CALLAO","id":"001"}
   */},{key:"_parseProvinces",value:function _parseProvinces(){var provinces=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[];return provinces.map(function(province){var id=province.id,name=province.descriptions&&province.descriptions[0]&&province.descriptions[0].value;return{name:name,id:id}})}/**
   * Retrieves mobile providers from catalog
   */},{key:"getMobileProviders",value:function getMobileProviders(){if(this.mobileProviders&&this.mobileProviders.length){this._dispatchMobileProviders()}else{this._getMobileProviders()}}},{key:"_getMobileProviders",value:function _getMobileProviders(){var _this13=this;this._dispatchCustomEvent("open-veil");this._getRecords(this.mobileProvidersCatalogId).then(function(resp){_this13._dispatchCustomEvent("close-veil");if(resp){_this13.set("mobileProviders",_this13._parseMobileProviders(resp));_this13._dispatchMobileProviders()}else{_this13._dispatchCustomEvent("error-on-get-mobile-providers","cells-global-account-spei-link-error-message")}})}/**
   * Parses the service response
   * @returns {Array<String>}
   * @param {Array} rawProviders
   */},{key:"_parseMobileProviders",value:function _parseMobileProviders(){var rawProviders=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[];return rawProviders.map(function(provider){var id=provider.id,name=provider&&provider.descriptions&&provider.descriptions[0]&&provider.descriptions[0].value;return{id:id,name:name}})}/**
   * Sends event with the provinces
   */},{key:"_dispatchMobileProviders",value:function _dispatchMobileProviders(){this._dispatchCustomEvent("set-mobile-providers",this.mobileProviders)}/**
  * Dispatches a new customEvent with the given name and detail.
  * Bubbles and composed are true by default
  * @param {String} eventName
  * @param {Any} detail event detail
  */},{key:"_dispatchCustomEvent",value:function _dispatchCustomEvent(eventName,detail){var bubbles=2<arguments.length&&arguments[2]!==void 0?arguments[2]:!0,composed=3<arguments.length&&arguments[3]!==void 0?arguments[3]:!0;this.dispatchEvent(new CustomEvent(eventName,{detail:detail,bubbles:bubbles,composed:composed}))}/**
   * Gets the records for the claims with the catalog API
   * @param {String} id
   * @param {Object} params
   * @param {String} event
   */},{key:"getClaims",value:function getClaims(id,params,event){var _this14=this,service=this._getService("Catalogs",this.catalogsApiVersion,"catalogs.catalog.records.get",{host:this.host,params:Object.assign({"catalog-id":id},params),version:this.catalogsApiVersion,requiredToken:this.requiredToken,native:this.native});return service.generateRequest().then(function(){var response=_this14._parseResponse(service.getLastResponse());_this14.dispatchEvent(new CustomEvent("set-"+event,{bubbles:!0,composed:!0,detail:response}));return response},this._generateErrorFireEventHandler("error-on-get-"+event))}}],[{key:"is",get:function get(){return"cells-dm-global-apis-catalogs"}},{key:"properties",get:function get(){return{/**
       * Chosen domain to make requests.
       * @type {String}
       */host:String,/**
       * Local currency
       * @type {String}
       */localCurrency:String,/**
       * Banks list
       * @type  {Object}
       */banks:{type:Array,notify:!0},/**
       * provinces list
       * @type  {Object}
       */provinces:{type:Array,value:function value(){return[]}},/**
       * Provinces & area-codes catalog id
       */provincesCatalogId:String,/**
       * Mobile providers list
       */mobileProviders:{type:Array,value:function value(){return[]}},/**
       * Mobile providers catalog Id
       */mobileProvidersCatalogId:String,/**
       * Movements types list
       * @type  {Object}
       */movementsTypes:{type:Array,notify:!0},/**
       * Transfer reasons list
       * @type  {Array}
       */transferReasons:{type:Array,value:function value(){return[]},notify:!0},/**
       * Card types list
       * @type  {Object}
       */cardTypes:{type:Array,value:function value(){return[]},notify:!0},/**
       * Contact Books API version
       * @type {String}
       */catalogsApiVersion:{type:String,value:"0"},/**
       * Type of token is required: 'Tsec' or 'JWT'
       * @type {String}
       */requiredToken:{type:String,value:"tsec"},/**
      * Native request
      */native:{type:Boolean,value:!1},/**
       * Card Type Id
       */cardTypeId:{type:String,value:"BRAND_ASSOCIATION_TYPE"}}}}]);return CellsDmGlobalApisCatalogs}(Polymer.mixinBehaviors([CellsBehaviors.CellsGlobalApisHandleRequest,CellsBehaviors.CellsGlobalApisHandleRequestSign,CellsBehaviors.CellsGlobalApisHandleRequestError,CellsBehaviors.CellsGlobalApisServiceGetter],Polymer.Element));window.customElements.define(CellsDmGlobalApisCatalogs.is,CellsDmGlobalApisCatalogs);</script></dom-module><dom-module id="glomo-opx-payroll-portability-dm" assetpath="glomo-opx-payroll-portability-dm/"><template><cells-dm-global-apis-customers id="dmCustomers" customer-id="[[customerId]]" customers="{{customers}}" host="[[host]]" headers="[[headers]]" customer-contacts="{{contactDetailData}}" required-token="[[requiredToken]]" native="[[native]]" on-set-customers="getCustomers" on-error-on-get-customers="_errorGetCustomers"></cells-dm-global-apis-customers><cells-dm-global-apis-receivers id="dmReceivers" host="[[host]]" receivers-api-version="[[receiversApiVersion]]" required-token="[[requiredToken]]" receiver="{{receiver}}" native="[[native]]" on-set-receiver="getRecieverResponse" on-error-on-get-receiver="_errorReceivers"></cells-dm-global-apis-receivers><cells-dm-global-apis-accounts id="accountDm" host="[[host]]" account="[[accountIdData]]" account-id="[[accountId]]" accounts="{{_accountsList}}" accounts-api-version="[[accountsApiVersion]]" required-token="[[requiredToken]]" native="[[native]]" on-get-on-get-account="_setAccountsListResponse" on-error-on-get-account="_errorAccount"></cells-dm-global-apis-accounts><cells-dm-global-apis-catalogs id="catalogsDm" host="[[host]]" catalogs-api-version="[[catalogsApiVersion]]" required-token="[[requiredToken]]" native="[[native]]" on-banks-changed="getBanks" on-error-on-get-banks="errorGetBanks" on-set-banks="setLoadingBanks"></cells-dm-global-apis-catalogs></template><script>/*global moment*/ /*eslint new-cap: 0*/var GlobalOpxPayrollPortabilityDm=/*#__PURE__*/function(_Polymer$mixinBehavio){babelHelpers.inherits(GlobalOpxPayrollPortabilityDm,_Polymer$mixinBehavio);function GlobalOpxPayrollPortabilityDm(){babelHelpers.classCallCheck(this,GlobalOpxPayrollPortabilityDm);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(GlobalOpxPayrollPortabilityDm).apply(this,arguments))}babelHelpers.createClass(GlobalOpxPayrollPortabilityDm,[{key:"init",/**
   * @description init DM
   * @method '_openSpinner'
   * @method 'getCustomers'
   */value:function init(){this._openSpinner();this.$.dmCustomers.getCustomers()}/**
   * @description Receive portabilities list data
   * @param {Object} payload
   * @method '_beginPayrollPortabilityProcess'
   * @method 'openModalInProcessPortability'
   */},{key:"setPortabilitiesListData",value:function setPortabilitiesListData(payload){this._closeSpinner();if(!payload||!this._validatePendingPortability(payload)){if(this.accountId){this.dispatchEvent(new CustomEvent("new-payroll-request-accounts",{bubbles:!0,composed:!0}))}}else{this.openModalInProcessPortability()}}/**
   * @description Validate if there are pending portability in portabilities list
   * @param {Object} portabilities
   * @returns {Boolean} true if there are portability at this status
   */},{key:"_validatePendingPortability",value:function _validatePendingPortability(portabilities){var statusList=portabilities.map(function(item){return item&&item.status&&item.status.id}),statusListPortability=statusList.includes(this.PENDING_STATUS_LABEL)||statusList.includes(this.SENDING_STATUS_LABEL);return statusListPortability}/**
   * @description Method that obtains the account id
   * @param {object} data
   * @method 'getAccount'
   * @method 'setTriplePlay'
   */},{key:"receivePortabilityData",value:function receivePortabilityData(data){if(data&&data.accountId){this.dispatchEvent(new CustomEvent("activate-steps",{detail:{value:!0},bubbles:!0,composed:!0}));this.accountId=data.accountId;this.$.accountDm.getAccount();this.dispatchEvent(new CustomEvent("request-payroll-portabilities-list",{detail:data.accountId,bubbles:!0,composed:!0}));this.setTriplePlay(data)}}/**
   * @description Get data customers for birthday and customer services for API
   * @param {Object} {detail}
   */},{key:"getCustomers",value:function getCustomers(_ref){var _ref$detail=_ref.detail,detail=void 0===_ref$detail?[]:_ref$detail,dataGetCustomers=detail[0].birthData.birthDate;this.userBirthDate=moment(dataGetCustomers).format(this.formatDate)}/**
   * @description Confirm birthday in modal for next step
   */},{key:"getBirthdayConfirmation",value:function getBirthdayConfirmation(){var bithdateObj={code:"BIRTHDATE-CONFIRMATION",selectedConfig:{className:"header--white birthday-confirmation-page portabilty-modal birthday-size-img header--fs-18",openMaximized:!0,heroImage:"./images/portability-birthdate.svg",title:this.t("payroll-portability-birthday-title"),acceptBtLabel:this.t("payroll-portability-benefits-correct-birthday-button-text"),cancelBtLabel:this.t("payroll-portability-benefits-incorrect-birthday-button-text"),closeOnPrimaryButton:!0,closeOnSecondaryButton:!0,cancelFromHeaderEvent:"birthday-close",closeIconSize:20,template:{type:"paragraphs",values:[{text:this.t("payroll-portability-benefits-birthday-confirmation-title")},{text:"".concat(this.t("payroll-portability-benefits-birthday-confirmation-text"),"<br><strong>").concat(this.userBirthDate,"</strong>")}]}}};this._dispatchCustomEvent("open-birthday-confirmation-modal",bithdateObj);this.typeRequest=this.triplePlay?"payroll-portability-triple-play":"payroll-portability-normal";this._sendAppsFlyerPayrollPortability("valida_fecha_porta",{af_content_type:this.typeRequest});if(this.accountId){this.dispatchEvent(new CustomEvent("simulate-current-payroll-selection",{detail:this.selectedAccount.id}));this._dispatchCustomEvent("quit-product-selected-attribute",!1)}this.changeDecorated()}/**
   * @description Change decorated for step
   * @event 'change-decorated-step-3-flag'
   */},{key:"changeDecorated",value:function changeDecorated(){this._dispatchCustomEvent("change-decorated-step-3-flag",!0)}/**
   * @description Modal to show that the date of birth is wrong
   */},{key:"errorBirthdayModal",value:function errorBirthdayModal(){var paramsModal={headerClass:"header--white portabilty-modal header--fs-18",titleModal:this.t("payroll-portability-birthday-title"),paragraphBold:this.t("payroll-portability-wrong-birthday-title"),paragraphSingle:this.t("payroll-portability-wrong-birthday-text")};this._dispatchCustomEventErrorModal("open-birthday-wrong-modal",paramsModal);this.typeRequest=this.triplePlay?"payroll-portability-triple-play":"payroll-portability-normal";this._sendAppsFlyerPayrollPortability("rechazo_porta",{af_content_type:this.typeRequest})}/**
   * @description Modal to show that portability is in process
   */},{key:"openModalInProcessPortability",value:function openModalInProcessPortability(){var paramsModal={headerClass:"portabilty-modal-dark",titleModal:this.t("payroll-portability-change-payroll-title"),paragraphBold:this.t("payroll-portability-in-process-title"),paragraphSingle:this.t("payroll-portability-in-process-text")};this._dispatchCustomEventErrorModal("open-modal-process",paramsModal)}/**
   * @description Get receivers the API
   * @param {String} receiversNumber
   */},{key:"getReceivers",value:function getReceivers(receiversNumber){this.receiversNumber=receiversNumber.number;this.$.dmReceivers.getReceiver(receiversNumber)}/**
   * @description Get response detail the receiver
   * @param {Object} {detail}
   */},{key:"getRecieverResponse",value:function getRecieverResponse(_ref2){var detail=_ref2.detail;if(detail){this.set("dataProductDetail",detail);var currentPayrollData=this._orderCurrenPayrollData(this.dataProductDetail,this.receiversNumber);this.dispatchEvent(new CustomEvent("receiver-current-payroll-response",{bubbles:!0,composed:!0,detail:currentPayrollData}));this.dispatchEvent(new CustomEvent("current-payroll-status-settled",{detail:this.statusForSpecificResult,bubbles:!0,composed:!0}))}else{this._errorReceivers()}}/**
   * @description Validate some receivers response params and define jus success or error status
   * @param {String} response receiver search results
   * @param {String} number introduced number by user
   * @returns {Object} ordered data for current payroll step
   */},{key:"_orderCurrenPayrollData",value:function _orderCurrenPayrollData(response,number){var dataForCurrentPayrollStep={productType:"",productNumber:"",bankName:""},bankId=this._validEmpty(response,"bank"),bankName=this._validEmptyName(response,"bank"),numberType=this._validEmptyName(response,"numberType"),specificProductTypeName=this._validEmptyName(response,"specificProductType");dataForCurrentPayrollStep.bankName=bankName;this.set("selectedBank",response.bank);if(bankId!==this.BBVA_BANK_ID){dataForCurrentPayrollStep.productNumber=number;this.set("receiverAccount",number);if(numberType===this.ACCOUNT_CLABE_TYPE){dataForCurrentPayrollStep.productType=numberType;this.set("statusForSpecificResult",this.SUCCESS_STATUS_FLAG)}else{dataForCurrentPayrollStep.productType=this._validEmpty(response,"specificProductType");if(dataForCurrentPayrollStep.productType===this.ACCOUNT_CARD_TYPE){this.set("statusForSpecificResult",this.SUCCESS_STATUS_FLAG)}else{this.set("statusForSpecificResult",this.ERROR_STATUS_FLAG)}}}else{this.set("receiverAccount",number);this.set("statusForSpecificResult",this.ERROR_STATUS_FLAG);dataForCurrentPayrollStep.productNumber=this.receiversNumber;if(specificProductTypeName){dataForCurrentPayrollStep.productType=specificProductTypeName}else{dataForCurrentPayrollStep.productType=this._validateCardOrClabe(this.receiversNumber)}}return dataForCurrentPayrollStep}/**
   * Returns BankId, numberType and specificProductType
   * @param {Object} response
   * @param {String} field
   */},{key:"_validEmpty",value:function _validEmpty(response,field){return response[field].id?response[field].id:""}/**
   * Returns BankName, numberType and specificProductType
   * @param {Object} response
   * @param {String} field
   */},{key:"_validEmptyName",value:function _validEmptyName(response,field){return response&&response[field]&&response[field].name||""}/**
   * @description Assign specific product type depending on product number length
   * @param {String} receiverNumber introduced number
   */},{key:"_validateProduct",value:function _validateProduct(receiverNumber,fileds){if(receiverNumber){var specificProductTypeNameReceiver=receiverNumber.length===this.CARDNUMBERLENGTH?this.SPECIFIC_PRODUCT_TYPE_CARD:this.SPECIFIC_PRODUCT_TYPE_CLABE;this.set("specificProductTypeId",specificProductTypeNameReceiver)}}/**
   * @description Error for api receivers and generate promise for catalogs
   * @param {Object} error
   */},{key:"_errorReceivers",value:function _errorReceivers(error){this.set("receiverAccount",this.receiversNumber);this.set("statusForSpecificResult",this.COMPLETE_STATUS_FLAG);var currentPayrollData={productType:"",productNumber:this.receiversNumber,bankName:""};this.getBanks();this._dispatchCustomEvent("receiver-current-payroll-response",currentPayrollData);this._dispatchCustomEvent("current-payroll-status-settled",this.statusForSpecificResult)}/**
   * @description Get catalogs banks
   */},{key:"getBanks",value:function getBanks(){this._dispatchCustomEvent("get-cathalog-data",this.banksListFake)}/**
   * @description Listen when found bank in list
   * @param {Object} newVal
   */},{key:"_selectedBankObserver",value:function _selectedBankObserver(newVal){var banklList=this.banksListFake.filter(function(banks){return banks.name===newVal.name});if(banklList){var receiverId=0<banklList.length?banklList[0]:{};this.receiversId=receiverId.id;this.set("selectedBank",newVal);if(newVal){this.dispatchEvent(new CustomEvent("return-found-bank-id",{detail:this.selectedBank,bubbles:!0,composed:!0}))}}}/**
   * @description Get document Terms & conditions
   */},{key:"openTermsAndConditions",value:function openTermsAndConditions(){this._dispatchCustomEvent("open-terms-and-conditions-pdf",{title:this.t("payroll-portability-success-header-title"),productId:this.termsAndConditionsProductId})}/**
   * @description validate lable for number lenght
   * @param {Object} number introduced number
   */},{key:"_validateCardOrClabe",value:function _validateCardOrClabe(number){return number.length===this.CARDNUMBERLENGTH?this.t("payroll-portability-current-payroll-debit-card-label"):this.t("payroll-portability-current-payroll-step-clabe-label")}/**
   * @description Bank list event
   */},{key:"_getCathalogsData",value:function _getCathalogsData(){this.dispatchEvent(new CustomEvent("get-cathalog-data",{bubbles:!0,composed:!0}))}/**
   * @description Existing accounts are obtained
   * @param {object} detail
   */},{key:"_setAccountsListResponse",value:function _setAccountsListResponse(_ref3){var _this=this,detail=_ref3.detail;this.setAccountsList="Array"===typeof detail?detail:[detail];var mappedItem={},mappedAccounts=this.setAccountsList.filter(function(complete){return complete.accountId&&complete.alias&&complete.number&&complete.availableBalance&&complete.status&&"MXN"===complete.currencies[0].currency}).map(function(item){mappedItem={};mappedItem.name=item.alias;mappedItem.id=_this.accountId;mappedItem.imgSrc="";mappedItem.currencies=item.currencies;mappedItem.description={value:item.number,masked:!0};mappedItem.type=item.accountType;mappedItem.group="";mappedItem.holds=[];mappedItem.primaryAmount={amount:item.availableBalance.currentBalances[0].amount,currency:item.availableBalance.currentBalances[0].currency};mappedItem.productType="ACCOUNTS";return mappedItem});this.dispatchEvent(new CustomEvent("new-payroll-accounts-list-has-mapped",{detail:mappedAccounts,bubbles:!0,composed:!0}));if(this.accountId){var uniqueAccount=this._filterUniqueAccount(mappedAccounts);this.set("selectedAccount",uniqueAccount[0])}}/**
   * @description Search account by ID in accounts list if needed
   * @param {Array} accountsList
   * @returns current costumer's account detail
   */},{key:"_filterUniqueAccount",value:function _filterUniqueAccount(accountsList){var _this2=this;return accountsList.filter(function(item){return item.id===_this2.accountId})}/**
   * @description Dispatches an event to close spinner
   */},{key:"_closeSpinner",value:function _closeSpinner(){this._dispatchCustomEvent("close-control-veil")}/**
   * @description Dispatches an event to open spinner
   */},{key:"_openSpinner",value:function _openSpinner(){this._dispatchCustomEvent("open-control-veil")}/**
   * @description Next step
   * @param {number} currentStepKey
   */},{key:"goNextStep",value:function goNextStep(currentStepKey){this.currentStep=currentStepKey;this.setSteps()}/**
   * @description setTripleplay
   * @param {boolean} active
   */},{key:"setTriplePlay",value:function setTriplePlay(data){if(data&&data.isTriplePlay){this._dispatchCustomEvent("set-triple-play-event",{isTriplePlay:data.isTriplePlay})}}/**
   * @description Open modal last oportunity
   */},{key:"lastOportunityModal",value:function lastOportunityModal(){var customModalConfig={code:"LAST-OPORTUNITY",selectedConfig:{openMaximized:!0,className:"full-height-error portabilty-modal header--white header--fs-18",closeIconSize:20,title:this.t("payroll-portability-change-payroll-title"),iconOnlyFullHeight:!0,heroImage:"./images/pig-portability.svg",acceptBtLabel:"payroll-portability-benefits-step-collapse-button-label-triple-play",cancelBtLabel:"payroll-portability-benefits-step-collapse-button-label-triple-play-back",template:{type:"paragraphs",values:[{title:"payroll-portability-last-oportunity-title"},{text:"".concat(this.t("payroll-portability-last-oportunity-text")," <strong>").concat(this.t("payroll-portability-last-oportunity-text-bold")," </strong>"),class:"content-fs-xxl"},{title:"payroll-portability-last-oportunity-invite",class:"content-fs-ml"}]}}};this._dispatchCustomEvent("open-last-oportunity-modal",customModalConfig)}/**
   * @description Send data for post customer services in Portability
   */},{key:"postCustomerServices",value:function postCustomerServices(){var dataPostCustomerServices={receiverContract:{id:this.selectedAccount.id},senderContract:{number:this.receiversNumber,product:{productType:{specificProductType:{id:this.specificProductTypeId}}},bank:{id:this.receiversId}}};this._dispatchCustomEvent("post-customer-services-data",dataPostCustomerServices)}/**
   * @description Send object the success
   * @param {Obejct} payload
   */},{key:"postCustomerServicesSuccess",value:function postCustomerServicesSuccess(payload){var cardName="".concat(this._validateCardOrClabe(this.receiversNumber)," ").concat(this.selectedBank.name),successObjData={id:payload.id,mainIcon:{src:"./images/check.svg",info:"Operation Success"},topInfo:[{value:this._getDateAndTime(payload.operationDate),class:"bold spacing"},{key:"Solicitud enviada"}],additionalInfo:[{key:"payroll-portability-new-payroll-step-title"},{key:"",value:cardName,class:"bold"},{class:"bold spacing",musk:{value:this.receiversNumber,chars:4,simbol:"\u2022"}},{key:"payroll-portability-current-payroll-step-title"},{key:"",value:"payroll-portability-debit-card",class:"bold"},{class:"bold",musk:{value:payload.receiverContract.number,chars:5,simbol:"\u2022"}}],message:{type:"info",text:this.triplePlay?"payroll-portability-message-succes-triple-play":"payroll-portability-message-succes",icon:"coronita:info"},bottomInfo:[{key:"cells-successful-page-number",value:payload.operationNumber,class:"bold folio"},{key:"",value:"payroll-portability-message-succes-bbva",class:"bbva"}],buttons:{primary:{text:"pocket-create-success-exit-button-label",action:"go-to-next"},secondary:{hidden:!0}}};this.typeRequest=this.triplePlay?"payroll-portability-triple-play":"payroll-portability-normal";this._sendAppsFlyerPayrollPortability("exito_porta",{af_content_type:this.typeRequest});this.dispatchEvent(new CustomEvent("post-services-success",{detail:successObjData,bubbles:!0,composed:!0}))}/**
   * @description Mothod for post error
   * @param {Obejct} error
   */},{key:"postCustomerServicesError",value:function postCustomerServicesError(error){if("BNE0978"===error["error-code"]){var paramsModal={headerClass:"portabilty-modal-dark",paragraphBold:this.t("payroll-portability-active-title"),paragraphSingle:this.t("payroll-portability-active-text")};this._dispatchCustomEventErrorModal("payroll-portability-active-process",paramsModal)}else{var customErrorModalConfig={code:"modal-error",selectedConfig:{openMaximized:!0,className:"title-modal-operational-limits full-height-error header--white header--fs-16",closeIconSize:20,title:"Error de servicio",heroImage:"./images/Error@1x.svg",iconOnlyFullHeight:!0,acceptBtLabel:"payroll-portability-accept",template:{type:"paragraphs",values:[{title:"payroll-portability-error-service",class:"spacing content-fs-xxl"},{text:"payroll-portability-try-later",class:"content-fs-ml"}]}}};this._dispatchCustomEvent("post-services-error",customErrorModalConfig)}}/**
   * @description parse date anf join with current time
   * @returns date joied with time
   */},{key:"_getDateAndTime",value:function _getDateAndTime(receivedDate){var date=new Date;return"".concat(moment(receivedDate).format(this.formatDate),", ").concat(date.getHours(),":").concat(date.getMinutes()," h")}/**
   * @description Method that receives parameters and displays modal error
   * @param {string} nameEvent
   */},{key:"_dispatchCustomEventErrorModal",value:function _dispatchCustomEventErrorModal(nameEvent,_ref4){var _ref4$headerClass=_ref4.headerClass,headerClass=void 0===_ref4$headerClass?"header--white":_ref4$headerClass,_ref4$paragraphBold=_ref4.paragraphBold,paragraphBold=void 0===_ref4$paragraphBold?"":_ref4$paragraphBold,_ref4$paragraphSingle=_ref4.paragraphSingle,paragraphSingle=void 0===_ref4$paragraphSingle?"":_ref4$paragraphSingle,_ref4$titleModal=_ref4.titleModal,titleModal=void 0===_ref4$titleModal?this.t("payroll-portability-change-payroll-title"):_ref4$titleModal,customErrorModalConfig={code:"modal-error",selectedConfig:{openMaximized:!0,className:headerClass,closeIconSize:20,title:titleModal,heroImage:"./images/Error@1x.svg",iconOnlyFullHeight:!0,acceptBtLabel:"glomo-channel-settings-unresolved-acceptbtn",template:{type:"paragraphs",values:[{title:paragraphBold,class:"spacing content-fs-xxl"},{text:paragraphSingle,class:"content-fs-ml"}]}}};this._dispatchCustomEvent(nameEvent,customErrorModalConfig)}/**
   * @description this method, clear the module variables for complete the module again
   * @event 'request-receivers-empty-input'
   * @event 'payroll-portability-request-reset-checkbox'
   * @event 'payroll-portability-request-reset-new-payroll'
   * @method 'resetSteps'
   */},{key:"_cleanSettledVariables",value:function _cleanSettledVariables(){this.set("accountId","");this.set("selectedAccount",{});this.set("selectedBank",{});this.set("receiversId","");this.set("receiverAccount","");this.dispatchEvent(new CustomEvent("request-receivers-empty-input",{detail:{requestCleanFromOutside:!0,bubbles:!0,composed:!0}}));this.dispatchEvent(new CustomEvent("payroll-portability-request-reset-checkbox",{detail:[{checked:!1,label:"payroll-portability-terms-and-conditions-step-full-text",labelClickEventName:"terms-and-conditions-clicked"}],bubbles:!0,composed:!0}));this.dispatchEvent(new CustomEvent("payroll-portability-request-reset-new-payroll",{bubbles:!0,composed:!0}));this.dispatchEvent(new CustomEvent("payroll-portability-request-reset-benefits",{bubbles:!0,composed:!0}));this.resetSteps()}/**
   * @description this method, clear the module variables for complete the module again
   */},{key:"manageCloseButtonTapped",value:function manageCloseButtonTapped(){this._cleanSettledVariables()}/**
   * @description Helper for set dynamic account and dispatch an event to collapse cells-step-product selector
   * when component does not have default product
   * @event manage-product-selector-event
   */},{key:"manageProductSelectorEvent",value:function manageProductSelectorEvent(selectedProduct){this.set("selectedAccount",selectedProduct);this.dispatchEvent(new CustomEvent("manage-product-selector-event",{detail:this.productSelectorIndex,bubbles:!0,composed:!0}));this.changeDecorated()}/**
   * Dispatches a new customEvent with the given name and detail.
   * Bubbles and composed are true by default
   * @param {String} eventName
   * @param {Any} detail event detail
  */},{key:"_dispatchCustomEvent",value:function _dispatchCustomEvent(eventName,detail){var _this3=this,bubbles=2<arguments.length&&arguments[2]!==void 0?arguments[2]:!0,composed=3<arguments.length&&arguments[3]!==void 0?arguments[3]:!0;setTimeout(function(){_this3.dispatchEvent(new CustomEvent(eventName,{detail:detail,bubbles:bubbles,composed:composed}))},200)}/**
   * @description Method for send event a AppsFlyers Benefits
   */},{key:"benefitsAppsFlyer",value:function benefitsAppsFlyer(){this.typeRequest=this.triplePlay?"payroll-portability-triple-play":"payroll-portability-normal";this._sendAppsFlyerPayrollPortability("beneficios_porta",{af_content_type:this.typeRequest})}/**
   * @description Method for send event a AppsFlyers Accounts
   */},{key:"accountAppsFlyer",value:function accountAppsFlyer(){this.typeRequest=this.triplePlay?"payroll-portability-triple-play":"payroll-portability-normal";this._sendAppsFlyerPayrollPortability("nueva_nomina_porta",{af_content_type:this.typeRequest})}/**
   * @description Method for send event a AppsFlyers Receivers
   */},{key:"receiversAppsFlyer",value:function receiversAppsFlyer(){this.typeRequest=this.triplePlay?"payroll-portability-triple-play":"payroll-portability-normal";this._sendAppsFlyerPayrollPortability("nomina_actual_porta",{af_content_type:this.typeRequest})}/**
   * @description Method for send event a AppsFlyers Receivers Confirm
   */},{key:"receiversConfirmationAppsFlyer",value:function receiversConfirmationAppsFlyer(){this.typeRequest=this.triplePlay?"payroll-portability-triple-play":"payroll-portability-normal";this._sendAppsFlyerPayrollPortability("confirma_actual_porta",{af_content_type:this.typeRequest})}/**
   * @description Method for send event a AppsFlyers Terms and Conditions
   */},{key:"termsCondiAppsFlyer",value:function termsCondiAppsFlyer(){this.typeRequest=this.triplePlay?"payroll-portability-triple-play":"payroll-portability-normal";this._sendAppsFlyerPayrollPortability("tyc_porta",{af_content_type:this.typeRequest})}/**
   * @description Method for send event a AppsFlyers Confirm Payroll
   */},{key:"confirmPayrollAppsFlyer",value:function confirmPayrollAppsFlyer(){this.typeRequest=this.triplePlay?"payroll-portability-triple-play":"payroll-portability-normal";this._sendAppsFlyerPayrollPortability("confirma_porta",{af_content_type:this.typeRequest})}/**
   * @description Method for send event a AppsFlyers OTP
   */},{key:"otpAppsFlyer",value:function otpAppsFlyer(){this.typeRequest=this.triplePlay?"payroll-portability-triple-play":"payroll-portability-normal";this._sendAppsFlyerPayrollPortability("otp_porta",{af_content_type:this.typeRequest})}/**
   * Event for AppsFlyer for Payroll Portability
   * @param {String} eventName
   * @param {Object} eventValue
   */},{key:"_sendAppsFlyerPayrollPortability",value:function _sendAppsFlyerPayrollPortability(eventName,eventValue){this.dispatchEvent(new CustomEvent("apps-flyer-payroll-portability",{detail:{eventName:eventName,eventValue:eventValue},bubbles:!0,composed:!0}))}}],[{key:"is",get:function get(){return"glomo-opx-payroll-portability-dm"}},{key:"properties",get:function get(){return{/**
       * Object a receiver magic query
       * @type {Object}
       */receiver:{type:Object,value:function value(){return{}}},/**
       * Bank List
       * @type {Array}
       */banksListFake:{type:Array,value:function value(){return[{id:"40138",name:"ABCCAPITAL"},{id:"40133",name:"ACTINVER"},{id:"40062",name:"AFIRME"},{id:"40128",name:"AUTOFIN"},{id:"40127",name:"AZTECA"},{id:"40030",name:"BAJIO"},{id:"40002",name:"BANAMEX"},{id:"40137",name:"BANCOPPEL"},{id:"40131",name:"BANCO FAMSA"},{id:"37019",name:"BANJERCITO"},{id:"40072",name:"BANORTE/IXE"},{id:"40058",name:"BANREGIO"},{id:"40060",name:"BANSI"},{id:"40112",name:"BMONEX"},{id:"40132",name:"BMULTIVA"},{id:"40143",name:"CIBANCO"},{id:"40130",name:"COMPARTAMOS"},{id:"40151",name:"DONDE"},{id:"40021",name:"HSBC"},{id:"40036",name:"INBURSA"},{id:"40150",name:"INMOBILIARIO"},{id:"40037",name:"INTERACCIONES"},{id:"40136",name:"INTERBANCO"},{id:"40102",name:"INVERSABANK"},{id:"40059",name:"INVEX"},{id:"40042",name:"MIFEL"},{id:"40148",name:"PAGATODO"},{id:"40014",name:"SANTANDER"},{id:"40044",name:"SCOTIABANK"},{id:"40113",name:"VEPORMAS"}]}},/**
       * Receiver Number the input
       * @type {String}
       */receiversNumber:{type:String,value:""},/**
       * host for api
       * @type {String}
       */host:String,/**
       * headers for api
       * @type {Object}
       */headers:{type:Object,value:function value(){return{}}},/**
       * Format for date birthdate
       * @type {String}
       */formatDate:{type:String,value:"DD MMMM YYYY"},/**
       * Format for date in successs
       * @type {String}
       */formatDateSuccess:{type:String,value:"DD MMMM YYYY HH:MM"},/**
       * Required token
       * @type {String}
       */requiredToken:String,/**
       * Native or not used
       * @type {String}
       */native:{type:Boolean,value:!1},/**
       * API version customer
       * @type {String}
       */customersApiVersion:{type:String,value:"1"},/**
       * API version receivers
       * @type {String}
       */receiversApiVersion:{type:String,value:"0"},/**
       * API version catalogs
       * @type {String}
       */catalogsApiVersion:{type:String,value:"0"},/**
       * API version customer services
       * @type {String}
       */customerServicesApiVersion:{type:String,value:"0"},/**
       * API version accounts
       * @type {String}
       */accountsApiVersion:{type:String,value:"0"},/**
       * Get accounts list
       * @type {Array}
       */_accountsList:{type:Array,value:function value(){return[]}},/**
       * icon for bithdate
       * @type {String}
       */birthdateIcon:{type:String},/**
       * account Id
       */accountIdData:{type:Object,value:function value(){return{}}},/**
       * selected bank for return
       * @type {Object}
       */selectedBank:{type:Object,observer:"_selectedBankObserver"},/**
       * @type {String}
       * @description Complete number of another bank
       */receiverAccount:{type:String,observer:"_validateProduct"},/**
       * BBVA bank id
       * @type {String}
       */BBVA_BANK_ID:{type:String,value:"0012"},/**
       * Account with CLABE
       * @type {String}
       */ACCOUNT_CLABE_TYPE:{type:String,value:"Standardized Banking Cipher"},/**
       * Account with debit card
       * @type {String}
       */ACCOUNT_CARD_TYPE:{type:String,value:"DEBIT_CARD"},/**
       * Product Id
       * @type {String}
       */productId:{type:String,value:""},/**
       * Name referring to otpid
       * @type {String}
       */otpId:{type:String,value:"payrollPortabilityCreatePage"},/**
       * Account id
       * @type {String}
       */accountId:{type:String,value:""},/**
       * Receivers id
       * @type {String}
       */receiversId:{type:String,value:""},/**
       * Send name for api the param
       * @type {String}
       */termsAndConditionsProductId:{type:String,value:"PORTABILIDAD"},/**
       * Product id in terms and conditional
       * @type {String}
       */termsAndConditionsSubProductId:{type:String,value:"ALTA"},/**
       * Status PENDING
       * @type {String}
       */PENDING_STATUS_LABEL:{type:String,value:"PENDING"},/**
       * Status SENDING
       * @type {String}
       */SENDING_STATUS_LABEL:{type:String,value:"SENDING"},/**
       * flag success for receivers
       * @type {String}
       */SUCCESS_STATUS_FLAG:{type:String,value:"success"},/**
       * flag complete for receivers
       * @type {String}
       */COMPLETE_STATUS_FLAG:{type:String,value:"complete"},/**
       * flag error for receivers
       * @type {String}
       */ERROR_STATUS_FLAG:{type:String,value:"error"},/**
       * @type {String}
       * @description Flag for prev screen
       */PREV_PAGE_FLAG:{type:String,value:"previous"},/**
       * Request list for accounts
       * @type {Number}
       */accountsToRequestList:{type:Number,value:1},/**
       * PDF Title
       * @type {String}
       */pdfTitle:{type:String,value:"payroll-portability-terms-and-conditions-pdf-header"},/**
       * Account Id
       * @type {Array}
       */selectedAccount:{type:Array,value:function value(){return[]}},/**
       * @type {Number}
       * @description Product selector index detail to cells-glomo-steps-dm goNextStep method
       */productSelectorIndex:{type:Number},/**
       * @type {Object}
       * @description set account list
       */setAccountsList:{type:Object,value:function value(){return{}}},/**
       * @type {Object}
       * @description product detail object
       */dataProductDetail:{type:Object,value:function value(){return{}}},/**
       * Type reques for portability the user
       * @type {String}
       */typeRequest:{type:String,value:""},/**
       * @desc triple play
       */triplePlay:{type:Boolean,value:!1,notify:!0}}}}]);return GlobalOpxPayrollPortabilityDm}(Polymer.mixinBehaviors([CellsBehaviors.CellsGlomoUtilsBehavior,CellsBehaviors.StepManagerBehavior,CellsBehaviors.i18nBehavior],Polymer.Element));customElements.define(GlobalOpxPayrollPortabilityDm.is,GlobalOpxPayrollPortabilityDm);</script></dom-module><dom-module id="glomo-step-product-benefits-styles" assetpath="glomo-step-product-benefits/"><template><style>:host{display:block;box-sizing:border-box;font-family:var(--cells-fontDefault, sans-serif);@apply --glomo-step-product-benefits;}:host([hidden]), [hidden]{display:none;}*, *:before, *:after{box-sizing:inherit;}cells-step{--cells-step-header:{};@apply --glomo-step-product-benefits-cells-step;}cells-step.hide-title{--cells-step-header:{display:none;};}cells-step[collapsed]{--cells-step-header:{display:flex;background-color:var(--bbva-core-blue, #004481);};--cells-step-header-title:{line-height:1.375rem;letter-spacing:0;color:var(--bbva-white, #fff);@apply --cells-fontDefaultBold;};--cells-step-iron-collapse-expanded-resume:{background-color:var(--bbva-core-blue, #004481);padding:1rem 1rem 0rem 0rem;};--cells-step-filled:{min-height:0;};--cells-st-button-text-color-link:var(--bbva-light-blue);--cells-st-button-min-height:0;--cells-st-button:{min-width:0;padding-right:0;padding-left:0;};@apply --glomo-step-product-benefits-cells-step-collapsed;}.container{@apply --glomo-step-product-benefits-container;}.core-white{background-color:var(--bbva-white, #fff);@apply --glomo-step-product-benefits-core-blue;}.center{text-align:center;@apply --glomo-step-product-benefits-center;}.block-element{display:block;@apply --glomo-step-product-benefits-block-element;}.bold-text{@apply --cells-fontDefaultMedium;@apply --glomo-step-product-benefits-bold-text;}.black-text{color:var(--bbva-black, #000);@apply --glomo-step-product-benefits-black-text;}.font-size-18{font-size:var(--cells-text-size-xl, 1.125rem);@apply --glomo-step-product-benefits-font-size-18;}.font-size-14{font-size:var(--cells-text-size-l, 1rem);@apply --glomo-step-product-benefits-font-size-14;}.vertical-padding-30{padding:1.875rem 0rem;@apply --glomo-step-product-benefits-vertical-padding-30;}cells-glomo-page-content{--cells-glomo-page-content-header:{font-size:var(--cells-text-size-xl, 1.125rem);text-align:center;line-height:1.5rem;};--cells-glomo-page-content-list-title:{@apply --cells-fontDefaultNormal;text-align:left;padding-top:0;};--cells-page-content-list-info-container:{font-size:var(--cells-text-size-l, 1rem);};@apply --glomo-step-product-benefits-page-content;}cells-icon-message{--cells-icon-message-background-color-info:var(--bbva-white-light-blue);margin:1.875rem 0rem;--cells-icon-message-message_-_padding:0rem 1.875rem;@apply --glomo-step-product-benefits-icon-message;}div[slot="after_content"]{padding-bottom:1.25rem;@apply --glomo-step-product-benefits-after-content;}:host(:not([decorated])){--cells-step-after-position:relative;@apply --glomo-step-product-benefits-not-decorated;}.img-background{background-color:var(--bbva-100, #f4f4f4);color:var(--bbva-black, #000);}.text-margin{@apply --cells-fontDefaultMedium;font-size:var(--cells-text-size-l, 1rem);}.button-text-init{margin-top:1.875rem;display:flex;justify-content:center;}</style></template></dom-module><dom-module id="glomo-step-product-benefits" assetpath="glomo-step-product-benefits/"><template><style include="glomo-step-product-benefits-styles glomo-step-product-benefits-shared-styles"></style><slot></slot><cells-step class$="[[className]]" click-disabled="[[clickDisabled]]" collapsed="[[collapsed]]" active="{{active}}" step-title="[[stepTitle]]" current-step="[[currentStep]]" max-steps="[[maxSteps]]" hide-current-step-label="[[hideCurrentStepLabel]]" step-id="[[stepId]]" change-label="[[changeLabel]]" fixed="[[fixed]]" class-to-toggle="step-active" disable-change="{{_changeHidden}}" previous="[[previous]]" next="[[next]]" scrolled="[[scrolled]]" decorated="[[decorated]]"><div slot="full" class="full"><div class="img-background"><cells-glomo-page-content class="header" show-icon="[[src]]" src="[[src]]" content-icon-width="[[contentIconWidth]]" content-icon-height="[[contentIconHeight]]" show-header="" header="[[contentHeaderLabel]]" no-bold-header=""></cells-glomo-page-content></div><div class="core-white black-text" hidden$="[[isTriplePlayPayroll]]"><cells-glomo-page-content title="[[titleListContent]]" show-title="[[_titleShown]]" class$="content-benefits [[pageContentClass]]" show-list="[[benefitsList]]" content-list="[[benefitsList]]"><div slot="after_content" class="center"><template is="dom-if" if="[[iconMessageLabel]]"><cells-icon-message type="info" icon="[[iconMessage]]" icon-size="26" message="[[iconMessageLabel]]"></cells-icon-message></template><cells-st-button class="size-s secondary" on-tap="_startButtonTapped"><button>[[t(collapseButtonLabel)]]</button></cells-st-button></div></cells-glomo-page-content></div><div class="core-white black-text" hidden$="[[!isTriplePlayPayroll]]"><cells-glomo-page-content class="content-benefits" show-list="[[benefitsListTriplePlay]]" content-list="[[benefitsListTriplePlay]]"><div slot="after_content" class="center"><template is="dom-if" if="[[iconMessageLabelTriplePlay]]"><cells-icon-message type="info" icon="[[iconMessage]]" icon-size="26" message="[[iconMessageLabelTriplePlay]]"></cells-icon-message></template><span class="text-margin">[[t(specialLabelBbva)]]</span><cells-st-button class="size-s secondary button-text-init" on-tap="_startButtonTapped"><button>[[t(collapseButtonLabelTriplePlay)]]</button></cells-st-button><cells-st-button class="size-s link" on-tap="_backButtonTapped"><button>[[t(collapseButtonLabelTriplePlayBack)]]</button></cells-st-button></div></cells-glomo-page-content></div></div><div slot="filled" class="filled" hidden$="[[isTriplePlayPayroll]]"><span class="white-text font-size-14">[[t(collapsedStepLabel)]]</span></div><div slot="filled" class="filled" hidden$="[[!isTriplePlayPayroll]]"><span class="white-text font-size-14">[[t(collapseLabelTriplePlayBack)]]</span></div></cells-step></template><script>var GlomoStepProductBenefits=/*#__PURE__*/function(_Polymer$mixinBehavio){babelHelpers.inherits(GlomoStepProductBenefits,_Polymer$mixinBehavio);function GlomoStepProductBenefits(){babelHelpers.classCallCheck(this,GlomoStepProductBenefits);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(GlomoStepProductBenefits).apply(this,arguments))}babelHelpers.createClass(GlomoStepProductBenefits,[{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(GlomoStepProductBenefits.prototype),"ready",this).call(this);this.addEventListener("change-pressed",this._productBenefitsStepchangePressed.bind(this));this.addEventListener("collapsed-changed",this._productBenefitsStepCollapseChanged.bind(this))}},{key:"init",value:function init(){this.initialize()}/**
   * @desc Receives title property and returns boolean based on empty or not
   * @param {String} title
   * @return {Boolean}
   */},{key:"_computedTitleShown",value:function _computedTitleShown(title){return!!title}/**
   * @desc get header class based on 'collapsed' property
   * @param 'collapsed' collapsed property
   * @return {Boolean}
   */},{key:"_getHeaderClass",value:function _getHeaderClass(collapsed){return collapsed?"":"oc-offer"}/**
   * @desc is the step header hidden based on 'collapsed' property
   * @param 'collapsed' collapsed property
   * @return {Boolean}
   */},{key:"_isStepHeaderHidden",value:function _isStepHeaderHidden(collapsed){return!collapsed}/**
   * @desc Opens the step when the change label is clicked or tapped
   */},{key:"_productBenefitsStepchangePressed",value:function _productBenefitsStepchangePressed(){this.set("collapsed",!1);this.set("hasCollapsed",!0);this.dispatchEvent(new CustomEvent("open-step",{bubbles:!0,composed:!0}));this.set("decorated",!0)}/**
   * @desc on collapse property change
   */},{key:"_productBenefitsStepCollapseChanged",value:function _productBenefitsStepCollapseChanged(){this.dispatchEvent(new CustomEvent("step-collapsed-changed",{bubbles:!0,composed:!0}));this._setColorHeader("payroll-portability header--light-grey");this.set("decorated",!0)}/**
   * @desc Fires `go-next-step` event
   * @event go-next-step
   */},{key:"_nextStep",value:function _nextStep(){this.dispatchEvent(new CustomEvent("go-next-step",{detail:this.currentStep,bubbles:!0,composed:!0}));this._setColorHeader("portability portability-text");if(!this.haveAccount&&!this.hasCollapsed){this.set("decorated",!0)}}/**
   *  @desc set custom class to header molecule
   *  @param 'stringClasses' string classes to apply
   *  @event set-color-header-event
   */},{key:"_setColorHeader",value:function _setColorHeader(stringClasses){this.dispatchEvent(new CustomEvent("set-color-header-event",{detail:stringClasses,bubbles:!0,composed:!0}))}/**
   * @description triggered when user press cells-st-button
   * @event 'benefits-start-button-pressed'
  */},{key:"_startButtonTapped",value:function _startButtonTapped(){if(this.hasCollapsed){this._nextStep()}else{this.dispatchEvent(new CustomEvent("benefits-start-button-pressed",{bubbles:!0,composed:!0}))}}/**
   * @description triggered when user press cells-st-button
   * @event 'benefits-start-button-pressed'
  */},{key:"_backButtonTapped",value:function _backButtonTapped(){this.set("hasCollapsed",!0);this.dispatchEvent(new CustomEvent("benefits-back-button-pressed",{bubbles:!0,composed:!0}))}/**
   * @desc set is Tripleplay Payroll
   * @param 'isTriplePlay' flag
   * @event is-triple-play
   */},{key:"setTriplePlay",value:function setTriplePlay(_ref){var isTriplePlay=_ref.isTriplePlay;if(isTriplePlay){this.stepTitle=this.stepTitleTripleplay;this.contentHeaderLabel=this.contentHeaderLabelTriplePlay}this.isTriplePlayPayroll=isTriplePlay;this.dispatchEvent(new CustomEvent("is-triple-play",{detail:this.isTriplePlayPayroll,bubbles:!0,composed:!0}))}/**
   * @desc add decoration to step
   */},{key:"addDecorationStep",value:function addDecorationStep(){this.set("haveAccount",!0)}/**
   * @desc step is always valid due to no logic implemented
   */},{key:"isValid",value:function isValid(){return!0}/**
   * @desc reset properties to step
   */},{key:"resetProperties",value:function resetProperties(){this.set("haveAccount",!1);this.set("hasCollapsed",!1)}}],[{key:"is",get:function get(){return"glomo-step-product-benefits"}},{key:"properties",get:function get(){return{/**
       * @type {String}
       * @description header label
       */contentHeaderLabel:String,/**
       * @type {String}
       * @description header label
       */contentHeaderLabelTriplePlay:String,/**
       * @type {Boolean}
       * @description helper property to hide/show the change button
       */_changeHidden:{type:Boolean,value:!1},/**
       * @type {Boolean}
       * @description enable tap only to button
       */clickDisabled:Boolean,/**
       * @type {String}
       * @description icon for cells-glomo-page-content
       */src:String,/**
       * @type {Number}
       * @description width for cells-glomo-page-content icon
       */contentIconWidth:Number,/**
       * @type {Number}
       * @description height for cells-glomo-page-content icon
       */contentIconHeight:Number,/**
       * @type {Array}
       * @description list for cells-glomo-page-content component
       */benefitsList:Array,/**
       * @type {Array}
       * @description list for cells-glomo-page-content component
       */benefitsListTriplePlay:Array,/**
       * @type {String}
       * @description Text of cells-icon-message component
       */iconMessageLabel:String,/**
       * @type {String}
       * @description Text of cells-icon-message component
       */iconMessageLabelTriplePlay:String,/**
       * @type {String}
       * @description Collpase button text
       */collapseButtonLabel:String,/**
       * @type {String}
       * @description Collpase button text
       */collapseButtonLabelTriplePlay:String,/**
       * @type {String}
       * @description Collpase button text
       */collapseButtonLabelTriplePlayBack:String,/**
       * @type {String}
       * @description Label text
       */specialLabelBbva:String,/**
       * @type {String}
       * @description Title step
       */stepTitle:{type:String,value:""},/**
       * @type {String}
       * @description Title step triple play
       */stepTitleTripleplay:{type:String,value:""},/**
       * @type {String}
       * @description header page class
       */headerClass:{type:String,value:"",computed:"_getHeaderClass(collapsed)",readOnly:!0,notify:!0},/**
       * @type {Boolean}
       * @description hide step header
       */hideStepHeader:{type:Boolean,value:!0,computed:"_isStepHeaderHidden(collapsed)",readOnly:!0},/**
       * @type {Boolean}
       * @description hide step current label
       */hideCurrentStepLabel:{type:Boolean,value:!1},/**
       * @type {String}
       * @description class cells-step
       */className:{type:String,value:"portability"},/**
       * @desc show triple play
       * @type {Boolean}
       */isTriplePlayPayroll:{type:Boolean,value:!1},/**
       * @type {Boolean}
       * @description flag have account selected
       */haveAccount:{type:Boolean,value:!1},/**
       * @type {String}
       * @description label triple play
       */collapseLabelTriplePlayBack:{type:String,value:""},/**
       * @type {Boolean}
       * @description flag show again birthday modal
       */hasCollapsed:{type:Boolean,value:!1},/**
       * @type {String}
       * @description type request for user
       */typeRequest:{type:String,value:""},/**
       * @type {String}
       * @description icon message
       */iconMessage:{type:String,value:"coronita:info"},/**
       * @type {Boolean}
       * @description Handles the title element rendering
       */_titleShown:{type:Boolean,computed:"_computedTitleShown(titleListContent)"},/**
       * @type {String}
       * @description Class to be bindend to cells-glomo-page-contents
       */pageContentClass:{type:String,value:""}}}}]);return GlomoStepProductBenefits}(Polymer.mixinBehaviors([CellsBehaviors.i18nBehavior,CellsBehaviors.StepBehavior,CellsBehaviors.CellsGlomoUtilsBehavior],Polymer.Element));customElements.define(GlomoStepProductBenefits.is,GlomoStepProductBenefits);</script></dom-module><dom-module id="glomo-step-receivers-search-styles" assetpath="glomo-step-receivers-search/"><template><style>@charset "UTF-8";:host{display:block;box-sizing:border-box;font-family:var(--cells-fontDefault, sans-serif);@apply --glomo-step-receivers-search;}:host([hidden]), [hidden]{display:none !important;}*, *:before, *:after{box-sizing:inherit;}cells-step{--cells-step-header:{padding:3.125rem 1.875rem 0.9375rem;};--cells-step-header-title:{line-height:1.375rem;letter-spacing:0;color:var(--bbva-600);font-weight:600;};@apply --glomo-step-receivers-search-cells-step;}cells-step[collapsed]{--cells-step-header:{background-color:var(--bbva-core-blue);};--cells-step-header-title:{line-height:1.375rem;letter-spacing:0;color:var(--bbva-white);font-weight:500;};--cells-step-iron-collapse-expanded-resume:{background-color:var(--bbva-core-blue);};--cells-step-filled:{min-height:0;};--cells-st-button-text-color-link:var(--bbva-light-blue);--cells-st-button-min-height:0;--cells-st-button:{min-width:0;padding-right:0;padding-left:0;};@apply --glomo-step-receivers-search-cells-step-collapsed;}.container{padding:0 1.875rem;@apply --glomo-step-receivers-search-container;}.core-blue{background-color:var(--bbva-core-blue);@apply --glomo-step-receivers-search-core-blue;}.center{text-align:center;@apply --glomo-step-receivers-search-center;}.block-element{display:block;@apply --glomo-step-receivers-search-block-element;}.bold-text{font-weight:500;@apply --glomo-step-receivers-search-bold-text;}.white-text{color:var(--bbva-white);@apply --glomo-step-receivers-search-white-text;}.gray-text{color:var(--bbva-500);@apply --glomo-step-receivers-search-gray-text;}.black-text{color:var(--bbva-600);@apply --glomo-step-receivers-search-black-text;}.font-size-14{font-size:var(--cells-text-size-14, 0.875rem);@apply --glomo-step-receivers-search-font-size-14;}.font-size-16{font-size:var(--cells-text-size-16, 1rem);@apply --glomo-step-receivers-search-font-size-16;}.margin-bottom-10{margin-bottom:0.625rem;@apply --glomo-step-receivers-search-margin-bottom-10;}.instructions{margin:0.9375rem 0 1.25rem;@apply --glomo-step-receivers-search-instructions;}.results-info{margin:1.875rem 0;@apply --glomo-step-receivers-search-results-info;}.info-separator{border-width:0.03125rem;margin:1.875rem 0;color:var(--bbva-200);@apply --glomo-step-receivers-search-info-separator;}cells-molecule-input{margin-bottom:1.875rem;border-bottom:0.0625rem var(--bbva-500) solid;--cells-molecule-input-wrapper:{height:3.75rem;};@apply --glomo-step-receivers-search-molecule-input;}cells-icon-message{margin-top:0.9375rem;@apply --glomo-step-receivers-search-icon-message;}cells-icon-message[type="success"]{background-color:rgba(218, 239, 224, 0.5);@apply --glomo-step-receivers-search-icon-message-success;}cells-icon-message[type="info"]{background-color:rgba(212, 237, 252, 0.5);@apply --glomo-step-receivers-search-icon-message-info;}cells-icon-message[type="error"]{background-color:rgba(252, 223, 223, 0.5);@apply --glomo-step-receivers-search-icon-message-error;}.btn-container{padding:0 0 3.125rem;@apply --glomo-step-receivers-search-btn-container;}.modal-selector{border:var(--bbva-white-core-blue);width:100%;box-sizing:border-box;min-height:3.75rem;background-color:var(--bbva-100);color:var(--bbva-500);border-bottom:0.0625rem solid var(--bbva-500);padding:0.75rem 0.625rem;@apply --glomo-step-receivers-search-modal-selector;}.modal-icon{color:var(--bbva-medium-blue);height:1.625rem;width:1.625rem;@apply --glomo-step-receivers-search-modal-icon;}.grid-container{display:grid;grid-template-columns:auto auto;@apply --glomo-step-receivers-search-grid-container;}.flex-column-first{display:flex;align-items:center;justify-content:flex-start;margin-left:0.625rem;@apply --glomo-step-receivers-search-flex-column-first;}.flex-column-second{display:flex;align-items:center;justify-content:flex-end;margin-right:0.625rem;@apply --glomo-step-receivers-search-flex-column-second;}.flex-column{display:flex;flex-direction:column;align-items:flex-start;@apply --glomo-step-receivers-search-flex-column;}.ptoptext{font-size:var(--cells-text-size-12, 0.75rem);margin-bottom:0.5rem;color:var(--bbva-400);@apply --glomo-step-receivers-search-ptoptext;}.pmaintext{font-size:var(--cells-text-size-16, 1rem);text-align:left;@apply --glomo-step-receivers-search-pmaintext;}cells-middle-modal{--cells-middle-modal-md-content:{padding:0.9375rem 0;};--cells-middle-modal-md-modal:{width:80%;};--cells-middle-modal-md-overlay-background-color:var(--bbva-navy);--cells-middle-modal-md-overlay-opacity:0.9;@apply --glomo-step-receivers-search-middle-modal;}cells-product-item{padding:0;--cells-product-item-item-name:{margin-bottom:0.625rem;};@apply --glomo-step-receivers-search-product-item;}:host(:not([active])){pointer-events:none;@apply --glomo-step-receivers-search-host-not-active;}:host(:not([active])) cells-step{--cells-step-header-title:{color:var(--bbva-300);};}:host(:not([active])) .instructions{color:var(--bbva-400);}:host(:not([active])) cells-molecule-input{border-bottom:0.0625rem var(--bbva-400) solid;}:host(:not([decorated])){--cells-step-after-position:relative;@apply --glomo-step-receivers-search-not-decorated;}</style></template></dom-module><dom-module id="glomo-step-receivers-search" assetpath="glomo-step-receivers-search/"><template><style include="glomo-step-receivers-search-styles glomo-step-receivers-search-shared-styles"></style><slot></slot><cells-step class$="[[classNameStep]]" click-disabled="[[clickDisabled]]" collapsed="[[collapsed]]" active="{{active}}" step-title="[[stepTitle]]" current-step="[[currentStep]]" change-label="[[changeLabel]]" fixed="[[fixed]]" max-steps="[[maxSteps]]" class-to-toggle="step-active" disable-change="{{disableChange}}" previous="[[previous]]" next="[[next]]" scrolled="[[scrolled]]" decorated="[[decorated]]"><div slot="full" class="full"><div class="container"><dom-if if="[[_shouldRenderInputLayot]]"><template><p class="black-text font-size-14 instructions" inner-h-t-m-l="[[t(instructionsLabel)]]"></p><cells-molecule-input id="currentPayrollInput" value="{{payrollInputValue}}" disabled="[[!active]]" label="[[inputLabel]]" icon="coronita:close" icon-size="26" type="tel" on-value-changed="_setInputLength" allowed-chars="[0-9]" max-length="[[payrollInputMaxLength]]"></cells-molecule-input><div class="center btn-container"><cells-st-button class="size-s secondary" on-tap="_searchButtonTapped"><button disabled="[[!_isInputFill]]">[[t(searchButtonLabel)]]</button></cells-st-button></div></template></dom-if><dom-if if="[[!_shouldRenderInputLayot]]"><template><dom-if if="[[successResponseLayout]]"><template><cells-icon-message type="success" icon="coronita:correct" icon-size="26" message="[[succesMesssageLabel]]"></cells-icon-message><div class="results-info"><div class="results-info"><span class="font-size-14 gray-text block-element margin-bottom-10">[[searchResults.productType]]</span> <span class="font-size-16 black-text block-element">[[_parsedProductNumber]]</span></div><div class="results-info"><span class="font-size-14 gray-text block-element margin-bottom-10">[[t(bankLabel)]]</span> <span class="font-size-16 black-text block-element">[[searchResults.bankName]]</span></div></div><div class="btn-container center"><cells-st-button class="size-s secondary" on-tap="_continueButtonTapped"><button>[[t(continueButtonLabel)]]</button></cells-st-button><br><cells-st-button class="size-s link" on-tap="resetInputValues"><button>[[t(anotherSearchLabel)]]</button></cells-st-button></div></template></dom-if><dom-if if="[[completeResponseLayout]]"><template><cells-icon-message type="info" icon="coronita:info" icon-size="26" message="[[completeMessageLabel]]"></cells-icon-message><div class="results-info"><div class="results-info"><span class="font-size-14 gray-text block-element margin-bottom-10">[[searchResults.productType]]</span> <span class="font-size-16 black-text block-element">[[_parsedProductNumber]]</span></div><button class="modal-selector" on-tap="_openModal" type="button"><div class="grid-container"><div class="flex-column-first"><div class="flex-column"><div class="ptoptext" hidden$="[[isTopTextButton]]">[[t(bankLabel)]]</div><div class="pmaintext">[[modalSelectedBank]]<div hidden$="[[!isTopTextButton]]">[[t(bankLabel)]]</div></div></div></div><div class="flex-column-second"><iron-icon icon="coronita:unfold" class="modal-icon icon-size-24"></iron-icon></div></div></button></div><div class="btn-container center"><cells-st-button class="size-s secondary" on-tap="_continueButtonTapped"><button disabled="[[continueCompleteBtnDisabled]]">[[t(continueButtonLabel)]]</button></cells-st-button><br><cells-st-button class="size-s link" on-tap="resetInputValues"><button>[[t(anotherSearchLabel)]]</button></cells-st-button></div></template></dom-if><dom-if if="[[errorResponseLayout]]"><template><cells-icon-message type="error" icon="coronita:alert" icon-size="26" message="[[errorMessageLabel]]"></cells-icon-message><div class="results-info"><div class="results-info"><span class="font-size-14 gray-text block-element margin-bottom-10">[[searchResults.productType]]</span> <span class="font-size-16 black-text block-element">[[_parsedProductNumber]]</span></div><div class="results-info"><span class="font-size-14 gray-text block-element margin-bottom-10">[[t(bankLabel)]]</span> <span class="font-size-16 black-text block-element">[[searchResults.bankName]]</span></div></div><div class="btn-container center"><cells-st-button class="size-s secondary" on-tap="resetInputValues"><button>[[t(changeDataButtonLabel)]]</button></cells-st-button></div></template></dom-if></template></dom-if></div></div><div slot="filled" class="filled"><cells-product-item name="[[searchResults.productType]] [[_computeFilledBankName(searchResults.bankName, modalSelectedBank)]]" description="[[description]]"></cells-product-item></div></cells-step></template><script>var GlomoStepReceiversSearch=/*#__PURE__*/function(_Polymer$mixinBehavio){babelHelpers.inherits(GlomoStepReceiversSearch,_Polymer$mixinBehavio);function GlomoStepReceiversSearch(){babelHelpers.classCallCheck(this,GlomoStepReceiversSearch);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(GlomoStepReceiversSearch).apply(this,arguments))}babelHelpers.createClass(GlomoStepReceiversSearch,[{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(GlomoStepReceiversSearch.prototype),"ready",this).call(this);this.addEventListener("change-pressed",this._receiversSearchStepchangePressed.bind(this));this.addEventListener("collapsed-changed",this._receiversSearchStepCollapseChanged.bind(this))}},{key:"init",value:function init(){this.initialize()}/**
   * @desc Opens the step when the change label is clicked or tapped
   */},{key:"_receiversSearchStepchangePressed",value:function _receiversSearchStepchangePressed(){this.collapsed=!1;this.dispatchEvent(new CustomEvent("receiver-app-flyer"),{bubbles:!0,composed:!0})}/**
   * @desc on collapse property change
   */},{key:"_receiversSearchStepCollapseChanged",value:function _receiversSearchStepCollapseChanged(){this.dispatchEvent(new CustomEvent("step-collapsed-changed"))}/**
   * @desc Fires `go-next-step` event
   * @event go-next-step
   */},{key:"_nextStep",value:function _nextStep(){this.dispatchEvent(new CustomEvent("go-next-step",{detail:this.currentStep}));this.set("active",!0)}/**
   * @description set _inputLength property with input evnet
   * @param {Object} e event detail of cells-molecule-input
   */},{key:"_setInputLength",value:function _setInputLength(e){this.set("_inputLength",e.detail.value.toString().length)}/**
   * @description set _inputLength property with input evnet
   * @param {Number} inputLength inputLength property, change will execute validation
   */},{key:"_computeIsInputFill",value:function _computeIsInputFill(inputLength){return inputLength===this.CARD_NUMBER_LENGTH||inputLength===this.CLABE_NUMBER_LENGTH}/**
   * @description response observer
   * @param {String} newVal contains a parameter of response status success | complete | error
   */},{key:"_observeResponseLayoutChange",value:function _observeResponseLayoutChange(newVal){this.set("successResponseLayout",newVal===this.SUCCESS_LAYOUT_FLAG);this.set("completeResponseLayout",newVal===this.COMPLETE_LAYOUT_FLAG);this.set("errorResponseLayout",newVal===this.ERROR_LAYOUT_FLAG)}/**
   * @description validate if any response layout is displayed
   * @param {Boolean} success success response layout flag
   * @param {Boolean} complete complete info response layout flag
   * @param {Boolean} error error response layout flag
  */},{key:"_computeRenderInputLayout",value:function _computeRenderInputLayout(success,complete,error){return!(success||complete||error)}/**
   * @description triggered when user press cells-st-button "Search"
   * @event 'receivers-step-search-btn-tapped' stores input value
  */},{key:"_searchButtonTapped",value:function _searchButtonTapped(){this.dispatchEvent(new CustomEvent("receivers-step-search-btn-tapped",{detail:{number:this.payrollInputValue},bubbles:!0}));this.set("payrollInputValue","");this.set("_inputLength",0)}/**
   * @description return computed card number for formatProductNumber method in cells-glomo-utils-behavior
   * @param {Object} searchResults card number
   */},{key:"_computeProductNumber",value:function _computeProductNumber(searchResults){if(searchResults.productNumber){searchResults.productType=searchResults.productNumber.toString().length===this.CLABE_NUMBER_LENGTH?"CLABE":"Tarjeta d\xE9bito";return searchResults.productNumber}return""}/**
   * @description triggered when user press cells-st-button continue
   * @event 'receivers-step-continue-button-pressed'
  */},{key:"_continueButtonTapped",value:function _continueButtonTapped(){this.$$("#currentPayrollInput").blur();this._nextStep()}/**
   * @description When user tpas another search the variables are cleaned
   */},{key:"resetInputValues",value:function resetInputValues(){this.$$("#currentPayrollInput").blur();this.set("payrollInputValue","");this.set("_inputLength",0);this.set("isTopTextButton",!0);this.set("modalSelectedBank","");this.set("continueCompleteBtnDisabled",!0);this.set("responseLayoutFlag","");this.dispatchEvent(new CustomEvent("reset-banks-list-data",{bubbles:!0,composed:!0}))}/**
   * @description helper for open list modal element
   * @event 'receivers-step-open-modal'
   */},{key:"_openModal",value:function _openModal(){this.dispatchEvent(new CustomEvent("receivers-step-open-modal",{detail:!0}))}/**
   * @description set modal list selected element
   * @param {Object} e card number
   * @event 'receivers-user-has-selected-bank' detail of selected bank
   * @event 'receivers-step-open-modal'
   */},{key:"listModalSelected",value:function listModalSelected(selectedItem){var _this=this;this.debounce("onSelectItem",function(){_this.set("isTopTextButton",!1);_this.set("modalSelectedBank",selectedItem.name);_this.set("continueCompleteBtnDisabled",!1)},200);this.dispatchEvent(new CustomEvent("receivers-user-has-selected-bank",{detail:{name:selectedItem.name,id:selectedItem.id},bubbles:!0,composed:!0}))}/**
   * @description compute cells-product-item description element
   * @param {String} cardNumber card number
   */},{key:"_computeProductDescription",value:function _computeProductDescription(cardNumber){return{value:cardNumber,masked:!1}}/**
   * @description set slected bank name if is not provided form service
   * @param {String} bankResults bank name provided from service
   * @param {String} selectedBank bank name provided from modal list
   */},{key:"_computeFilledBankName",value:function _computeFilledBankName(bankResults,selectedBank){return bankResults||selectedBank}}],[{key:"is",get:function get(){return"glomo-step-receivers-search"}},{key:"properties",get:function get(){return{/**
       * @type {String}
       * @description Class name to step
       */classNameStep:{type:String,value:""},/**
       * @type {Boolean}
       * @description Disable change button
       */disableChange:{type:Boolean,value:!1},/**
       * @type {Boolean}
       * @description enable tap only to button
       */clickDisabled:Boolean,/**
       * @type {String}
       * @description Instructions for step
       */instructionsLabel:String,/**
       * @type {String}
       * @description Input placeholder
       */inputLabel:String,/**
       * @type {String}
       * @description Input placeholder
       */searchButtonLabel:String,/**
       * @type {String}
       * @description Success layout message
       */succesMesssageLabel:String,/**
       * @type {String}
       * @description Success layout continue button text
       */continueButtonLabel:String,/**
       * @type {String}
       * @description Complete information message
       */completeMessageLabel:String,/**
       * @type {String}
       * @description Another search button text
       */anotherSearchLabel:String,/**
       * @type {String}
       * @description Another search button text
       */errorMessageLabel:String,/**
       * @type {String}
       * @description Error layout button text
       */changeDataButtonLabel:String,/**
       * @type {String}
       * @description Summary item icon
       */resumeIcon:String,/**
       * @type {String}
       * @description value of current payroll search input
       */payrollInputValue:String,/**
       * @type {Number}
       * @description maximun chars of search input
       */payrollInputMaxLength:{type:Number,value:18},/**
       * @type {Number}
       * @description stores current length of input
       */_inputLength:Number,/**
       * @type {Boolean}
       * @description computed - validate input length for disable search button
       */_isInputFill:{type:Boolean,computed:"_computeIsInputFill(_inputLength)"},/**
       * @type {Boolean}
       * @description computed - validate if any result has obtained and hide input layout
       */_shouldRenderInputLayot:{type:Boolean,computed:"_computeRenderInputLayout(successResponseLayout, completeResponseLayout, errorResponseLayout)"},responseLayoutFlag:{type:String,observer:"_observeResponseLayoutChange"},/**
       * @type {Boolean}
       * @description success response layout flag
       */successResponseLayout:{type:Boolean,value:!1},/**
       * @type {Boolean}
       * @description complete information response layout flag
       */completeResponseLayout:{type:Boolean,value:!1},/**
       * @type {Boolean}
       * @description error response layout flag
       */errorResponseLayout:{type:Boolean,value:!1},/**
       * @type {Object}
       * @description Search results, this object will come from service response
       */searchResults:Object,/**
       * @type {String}
       * @description Bank/Entity label
       */bankLabel:String,/**
       * @type {String}
       * @description compute card number to XXXX XXXX XXXX XXXX format
       */_parsedProductNumber:{type:String,computed:"_computeProductNumber(searchResults)"},/**
       * visible top text button
       * @type {Boolean}
       */isTopTextButton:{type:Boolean,value:!1},/**
       * @type {String}
       * @description Selected bank in modal list
       */modalSelectedBank:String,/**
       * @type {Boolean}
       * @description Flag for modal list close on click
       */closeOnClick:{type:Boolean,value:!1},/**
       * @type {Array}
       * @description Banks list for modal list
       */banksList:Array,/**
       * @type {Boolean}
       * @description helper for disable continue btn
       */continueCompleteBtnDisabled:{type:Boolean,value:!0},/**
       * @type {Object}
       * @description cells-product-item description
       */description:{type:Object,computed:"_computeProductDescription(_parsedProductNumber)"},/**
       * @constant
       * @type {String}
       * @description flag for show success layout
       */SUCCESS_LAYOUT_FLAG:{type:String,value:"success"},/**
       * @constant
       * @type {String}
       * @description flag for show complete layout
       */COMPLETE_LAYOUT_FLAG:{type:String,value:"complete"},/**
       * @constant
       * @type {String}
       * @description flag for show error layout
       */ERROR_LAYOUT_FLAG:{type:String,value:"error"},/**
       * @constant
       * @type {Number}
       * @description length of card number
       */CARD_NUMBER_LENGTH:{type:Number,value:16},/**
       * @constant
       * @type {Number}
       * @description length of CLABE number
       */CLABE_NUMBER_LENGTH:{type:Number,value:18}}}}]);return GlomoStepReceiversSearch}(Polymer.mixinBehaviors([CellsBehaviors.i18nBehavior,CellsBehaviors.CellsGlomoUtilsBehavior,CellsBehaviors.StepBehavior],Polymer.Element));customElements.define(GlomoStepReceiversSearch.is,GlomoStepReceiversSearch);</script></dom-module><dom-module id="cells-plugin-softtoken-mx" assetpath="cells-plugin-softtoken-mx/"><template></template><script>var CellsPluginSofttokenMx=/*#__PURE__*/function(_Polymer$mixinBehavio){babelHelpers.inherits(CellsPluginSofttokenMx,_Polymer$mixinBehavio);function CellsPluginSofttokenMx(){babelHelpers.classCallCheck(this,CellsPluginSofttokenMx);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(CellsPluginSofttokenMx).apply(this,arguments))}babelHelpers.createClass(CellsPluginSofttokenMx,[{key:"getToken",/**
   * Retrieves token from Connect
   * @param {Object} params
   */value:function getToken(params){return this._genericCall(this.pluginName,"getToken","get-token-success",params)}}],[{key:"is",get:function get(){return"cells-plugin-softtoken-mx"}},{key:"properties",get:function get(){return{pluginName:{type:String,value:"OTPPlugin"}}}}]);return CellsPluginSofttokenMx}(Polymer.mixinBehaviors([CellsBehaviors.pluginBehavior],Polymer.Element));customElements.define(CellsPluginSofttokenMx.is,CellsPluginSofttokenMx);</script></dom-module><dom-module id="cells-plugin-biometrics" assetpath="cells-plugin-biometrics/"><script>var CellsPluginBiometrics=/*#__PURE__*/function(_Polymer$mixinBehavio){babelHelpers.inherits(CellsPluginBiometrics,_Polymer$mixinBehavio);function CellsPluginBiometrics(){babelHelpers.classCallCheck(this,CellsPluginBiometrics);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(CellsPluginBiometrics).apply(this,arguments))}babelHelpers.createClass(CellsPluginBiometrics,[{key:"cancel",/**
       * Methods implemented, but it using only in Android.
       *
       * @return
       * always:
       *  {
       *    status: 0
       *    payload: null
       *  }
       */value:function cancel(){return this._genericCall(this.pluginName,"cancel","cancel-success",{})}/**
       * Method for check if is enable and available the biometry from the device and the biometrics type if available
       *
       * @return
       * success:
       *  {
       *    status: 0
		   *    payload: {
			 *      type: fingerprint|face|none
		   *    }
       *  }
       *
       * error:
       *  {
       *    status: 1
		   *    payload: {
			 *      code: Int,
       *      message: String,
       *      type: fingerprint|face|none
		   *    }
       *  }
       */},{key:"checkenabled",value:function checkenabled(){return this._genericCall(this.pluginName,"checkEnabled","checkenabled-success",{})}/**
       * Method for authenticate the user with biometry or passcode
       *
       * params: A Object with this parameters
       *  - title_text (mandatory): The title message
       *  - subtitle_text: The subtitle Text of the message
       *  - cancel_text (mandatory): The text of the cancel button
       *  - is_confirmation_required: if 'false' confirm the operation without confirming anything else
       *  - reason (mandatory): The message to the user when the alert. If is empty or not passed, the library returns error malformed params
       *  - second_factor: If enabled, the user have the option to insert the pin(or other) if the biometric authentication fails. FALSE by default
       *  - second_factor_button_text (mandatory if second factor enable): The text for the 'enter password' button.
       *
       * @return
       * success with biometry:
       *  {
       *    status: 0
		   *    payload: {
			 *      hash: fingerprint hash (example: 66b432ce600e7ce696ce5ed4282ec242967fc54f)
		   *    }
       *  }
       *
       * success with passcode:
       *  {
       *    status: 0
		   *    payload: {
			 *      hash: "passcode"
		   *    }
       *  }
       *
       * error:
       *  {
       *    status: 1
		   *    payload: {
			 *      code: Int,
       *      message: String
		   *    }
       *  }
       */},{key:"authenticate",value:function authenticate(_ref){var _ref$titleText=_ref.titleText,titleText=void 0===_ref$titleText?"Lector de huella para BBVA":_ref$titleText,_ref$subTitleText=_ref.subTitleText,subTitleText=void 0===_ref$subTitleText?"":_ref$subTitleText,_ref$reason=_ref.reason,reason=void 0===_ref$reason?"Coloca tu huella sobre el lector.":_ref$reason,_ref$cancelText=_ref.cancelText,cancelText=void 0===_ref$cancelText?"Cancelar":_ref$cancelText,_ref$secondFactor=_ref.secondFactor,secondFactor=void 0===_ref$secondFactor?!1:_ref$secondFactor,_ref$isConfirmationRe=_ref.isConfirmationRequired,isConfirmationRequired=void 0===_ref$isConfirmationRe?!1:_ref$isConfirmationRe,_ref$secondFactorButt=_ref.secondFactorButtonText,secondFactorButtonText=void 0===_ref$secondFactorButt?"":_ref$secondFactorButt,params={title_text:titleText,subtitle_text:subTitleText,reason:reason,cancel_text:cancelText,is_confirmation_required:isConfirmationRequired};if(secondFactor){params=Object.assign(params,{second_factor:secondFactor,second_factor_button_text:secondFactorButtonText})}return this._genericCall(this.pluginName,"authenticate","authenticate-success",params)}}],[{key:"is",get:function get(){return"cells-plugin-biometrics"}},{key:"properties",get:function get(){return{pluginName:{type:String,value:"Biometrics"}}}}]);return CellsPluginBiometrics}(Polymer.mixinBehaviors([CellsBehaviors.pluginBehavior],Polymer.Element));customElements.define(CellsPluginBiometrics.is,CellsPluginBiometrics);</script></dom-module><dom-module id="cells-sign-operation-dm-mx" assetpath="cells-sign-operation-dm/"><template><cells-params id="params"></cells-params><cells-plugin-softtoken-mx id="softTokenPlugin"></cells-plugin-softtoken-mx></template><script>/**
 * `CellsSignOperationDmPe`
 *
 * @summary handles signature operation logic.
 * @customElement
 * @polymer
 * @extends {Polymer.Element}
 */var CellsSignOperationDmMx=/*#__PURE__*/function(_Polymer$mixinBehavio){babelHelpers.inherits(CellsSignOperationDmMx,_Polymer$mixinBehavio);function CellsSignOperationDmMx(){babelHelpers.classCallCheck(this,CellsSignOperationDmMx);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(CellsSignOperationDmMx).apply(this,arguments))}babelHelpers.createClass(CellsSignOperationDmMx,[{key:"handleSignatureRequiredFirstStep",/* * * * * * * * * * * * * * * * * *  SIGN  * * * * * * * * * * * * * * * * */ /**
   * Check and assign signature type
   * Usually binded to 'signature-required-first-step' event of the sign behavior
   */value:function handleSignatureRequiredFirstStep(evt){var signatureType=(evt||{}).type||"";if(signatureType){var mandatorySignType=(evt||{}).mandatorySignType;signatureType=signatureType.includes(mandatorySignType)?mandatorySignType:signatureType;this._otpId=(evt||{}).otpId;this._currentAuthenticationType=this._getAuthenticationType(signatureType.split(";"));this[this._currentAuthenticationType.action]()}}/**
   * Fires an signature-required event with a modal configuration
   * Usually binded to 'signature-required' event
   */},{key:"handleSignatureRequired",value:function handleSignatureRequired(){this.__fire("signature-required",this._getSmsSignModal());this.__fire("otp-params-request",{phone:this.otpPhone,patterns:[this.otpRegexPattern]})}/**
   * Handler for signature errors
   */},{key:"handlerSignatureErrors",value:function handlerSignatureErrors(evt){this._otpId=evt.otpId;this.signReset();this.__fire("sign-modal-close-spinner");this.__fire("signature-close-veil");this._openDefaultSignatureError()}/**
   * Submit a new request
   */},{key:"submitSign",value:function submitSign(sign){var _this=this;return this._generateSoftToken().then(function(res){if(res.token){_this._signRequest(res.token);_this.timerToNextSoftToken=0}else if(res.timer){_this.timerToNextSoftToken=1e3*res.timer;_this._updateSoftTokenModalConfig()}}).catch(function(){_this._openDefaultSignatureError();_this.__fire("signature-modal-close-reset")})}/**
   * Fires a new otp request event
   */},{key:"signGetNewOtp",value:function signGetNewOtp(){this.__fire("signature-request-new-sms-"+this._otpId,{otpEvent:"signature-request-new-sms",otpId:this._otpId})}},{key:"reset",value:function reset(){this._deviceConfiguration.bioType="";this._deviceConfiguration.biometricEnabled=!1;this._deviceConfiguration.stEnrolled=!1;this._currentAuthenticationType={}}/**
   * Fires a close modal event
   */},{key:"signModalClose",value:function signModalClose(){this.saveSoftToken();this.__fire("sign-modal-close")}/**
   * Sends a reset event to controller or data-manger source request
   */},{key:"signReset",value:function signReset(){this.__fire("signature-reset-"+this._otpId)}/**
   * Sends a cancel event to controller or data-manger source request
   */},{key:"signCancel",value:function signCancel(){this.__fire("signature-cancel-"+this._otpId)}/**
   * Calls the contact number
   */},{key:"callContactNumber",value:function callContactNumber(){this.__fire("open-call-action",{url:"tel:"+this.contactNumber,windowTarget:"external"});window.open("tel:".concat(this.contactNumber),"_system")}/**
   * Save current successful soft-token on session storage
   */},{key:"saveSoftToken",value:function saveSoftToken(){var _this2=this;return this._generateSoftToken().then(function(res){if(res.token){_this2._setStorage(res.token.otp)}}).catch(function(){_this2._openDefaultSignatureError();_this2.__fire("signature-modal-close-reset")})}/**
   * Open offline soft-token modal
   */},{key:"openOfflineSoftTokenModal",value:function openOfflineSoftTokenModal(){this.__fire("signature-required",this._getSoftTokenModalConfig())}/**
   * Fires a signature sign request
   */},{key:"_signRequest",value:function _signRequest(otp){this.__fire("signature-sign-request-"+this._otpId,Object.assign({},{signatureType:(this._currentAuthenticationType||{}).type,signatureValue:otp,challenge:this.challenge,otpId:this._otpId}))}},{key:"_getAuthenticationType",value:function _getAuthenticationType(types){var _this3=this,typesSupported=Object.keys(this._authenticationTypes),typesFiltered=types.filter(function(el){return typesSupported.includes(el)});return types.reduce(function(acc,type){return(_this3._authenticationTypes[type]||{}).priority>acc.priority?_this3._authenticationTypes[type]:acc},this._authenticationTypes[typesFiltered[0]])}},{key:"_softTokenSignFlow",value:function _softTokenSignFlow(){this._getDeviceAccessesInfo()}},{key:"_getDeviceAccessesInfo",value:function _getDeviceAccessesInfo(){var _this4=this;this._getStorage("deviceAccesses").then(function(deviceAccesses){_this4._deviceConfiguration.bioType=(deviceAccesses||{}).bioType;_this4._deviceConfiguration.biometricEnabled=!1;_this4._deviceConfiguration.stEnrolled=!0;_this4.__fire("signature-required",_this4._getSoftTokenModalConfig())}).catch(function(){_this4._openDefaultSignatureError();_this4.__fire("signature-modal-close-reset")})}},{key:"_generateSoftToken",value:function _generateSoftToken(){return this.$.softTokenPlugin.getToken({}).then(function(res){return res})}},{key:"_setStorage",value:function _setStorage(){var value=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",key=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"soft-token",type=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"session";window["".concat(type,"Storage")].setItem(key,JSON.stringify(value))}},{key:"_getStorage",value:function _getStorage(){var key=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"deviceAccesses",type=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"local",storage=window["".concat(type,"Storage")],storageValue=JSON.parse(storage.getItem(key));return Promise.resolve(storageValue)}},{key:"_getSmsSignModal",value:function _getSmsSignModal(){var type=this._currentAuthenticationType.type;return{modalMainText:"cells-sign-modal-".concat(type,"-main-text"),modalSecondaryText:"cells-sign-modal-".concat(type,"-secondary-text"),modalHeader:"cells-sign-modal-".concat(type,"-header"),validationErrorMessage:"cells-sign-modal-".concat(type,"-validation-error-message"),imgSrc:Polymer.ResolveUrl.resolveUrl("images/otp/otp-sms.svg"),inputMaxChars:6,allowedChars:"[0-9]",showButtons:!0,showInput:!0,timerSecs:18e4,secondaryButton:{buttonName:"cells-sign-operation-modal-resend",buttonEvent:"cells-sign-operation-get-new-sms"},openSpinner:!0,inputIcon:"coronita:close"}}},{key:"_updateSoftTokenModalConfig",value:function _updateSoftTokenModalConfig(){var timer=this.timerToNextSoftToken;this.__fire("update-modal-softtoken-settings",{timer:timer,timerUntilEnabled:!0})}},{key:"_getSoftTokenModalConfig",value:function _getSoftTokenModalConfig(){var type=this._currentAuthenticationType.type,isSTenrolled=this._deviceConfiguration.stEnrolled,isMasterApp=this.isMasterMode,fakeSoftToken="00000000",modalInfoText={type:"info",icon:"coronita:info",message:"cells-sign-modal-token-info-slave-text"},softTokenConfig={modalSecondaryText:"cells-sign-modal-".concat(type,"-secondary-text"),modalHeader:"cells-sign-modal-".concat(type,"-header"),validationErrorMessage:"cells-sign-modal-".concat(type,"-validation-error-message"),imgSrc:Polymer.ResolveUrl.resolveUrl("images/otp/otp-token.svg"),inputMaxChars:8,isBottomButtons:!0,allowedChars:"[0-9]",showButtons:!0,showInput:isMasterApp,openSpinner:!0,modalMainText:"cells-sign-modal-".concat(type,"-main-text"),inputIcon:"coronita:close"};return Object.assign(softTokenConfig,isSTenrolled?{modalMainText:"cells-sign-modal-soft-token-auto-generated",modalInfoText:isMasterApp?"":modalInfoText,confirmInfoText:"cells-sign-modal-confirm-info-text",otp:fakeSoftToken,inputType:"password",inputIcon:""}:{})}},{key:"_openDefaultSignatureError",value:function _openDefaultSignatureError(){this.openSignatureError()}},{key:"__fire",value:function __fire(event,payload){this.dispatchEvent(new CustomEvent(event,{bubbles:!0,composed:!0,detail:payload}))}/* * * * * * * * * * * * * * * * * ERRORS * * * * * * * * * * * * * * * * * */ /**
   * Open error modal with setting
   */},{key:"openSignatureModalError",value:function openSignatureModalError(){var options=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},defaultConfig={errorCode:"",errorImage:"general_error",fullModal:!1,title:"alert-signature-error-title",acceptBtLabel:"alert-signature-error-accept",cancelBtLabel:"alert-signature-error-cancel"},config=Object.assign(defaultConfig,options);this.dispatchEvent(new CustomEvent("signature-error",{bubbles:!0,composed:!0,detail:{code:"signature-".concat(config.errorCode),selectedConfig:{openMaximized:config.fullModal,className:config.fullModal?"full-height-error":"error",title:config.title,heroImage:config.fullModal?Polymer.ResolveUrl.resolveUrl("images/errors/".concat(config.errorImage,".svg")):"",iconOnlyFullHeight:!0,acceptBtLabel:config.acceptBtLabel,cancelBtLabel:config.fullModal?config.cancelBtLabel:"",closeOnPrimaryButton:!0,closeOnSecondaryButton:!0,cancelFromHeaderEvent:config.cancelFromHeaderEvent,template:{type:"paragraphs",values:[{icon:config.fullModal?"":"coronita:alert",class:"spacing"},{title:config.fullModal?"alert-signature-".concat(config.errorCode,"-message-title"):""},{text:"alert-signature-".concat(config.errorCode,"-message")}]}}}}))}/**
   * Open modal for signature generic error
   */},{key:"openSignatureError",value:function openSignatureError(){this.openSignatureModalError({errorCode:"generic-error"})}/**
   * Navigate to atmLocator page
   */},{key:"goToAtmLocator",value:function goToAtmLocator(){this.dispatchEvent(new CustomEvent("signature-navigate-to-atm-locator",{bubbles:!0,composed:!0,detail:{page:"atmLocator"}}))}}],[{key:"is",get:function get(){return"cells-sign-operation-dm-mx"}},{key:"properties",get:function get(){return{/**
       * Contact number
       */contactNumber:String,/**
       * Device configuration capabilities
       */_deviceConfiguration:{type:Object,value:{stEnrolled:!1,biometricEnabled:!1,bioType:""}},/**
       * High priority authentication type from response authenticationType header list
       */_currentAuthenticationType:{type:Object},_authenticationTypes:{type:Object,value:function value(){return{33:{type:"33",priority:1,id:"SOFT-TOKEN",action:"_softTokenSignFlow"}}}},/**
      *  Data-manager Id origin of the request
      */_otpId:{type:String,value:""},/**
       * phone number for sms regex plugin call
      */otpPhone:{type:String,value:"595"},/**
       * regex number for sms regex plugin call
      */otpRegexPattern:{type:String,value:"(?:\\D+)?(\\d{6})(?:\\D+)?"},/**
       * If next token is already generated
       */_isNextTokenGenerated:{type:Boolean,value:!1},timerToNextSoftToken:{type:Number},/**
       * Flag to detemrine if Glomo should generate the Token or not
       */isMasterMode:{Boolean:!1}}}}]);return CellsSignOperationDmMx}(Polymer.mixinBehaviors([CellsBehaviors.i18nBehavior],Polymer.Element));customElements.define(CellsSignOperationDmMx.is,CellsSignOperationDmMx);</script></dom-module></div></body></html>