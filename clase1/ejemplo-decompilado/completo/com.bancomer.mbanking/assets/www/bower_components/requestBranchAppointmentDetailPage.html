<html><head></head><body><div hidden="" by-polymer-bundler=""><script type="text/javascript">/* global GlomoRequestBranchAppointmentDetailDmMixin */ /* global moment */ /* eslint-disable new-cap */var GlomoRequestBranchAppointmentDetailDmMixin=window.GlomoRequestBranchAppointmentDetailDmMixin||{};GlomoRequestBranchAppointmentDetailDmMixin.mixin=Polymer.dedupingMixin(function(base){return(/*#__PURE__*/function(_Polymer$mixinBehavio){babelHelpers.inherits(_class,_Polymer$mixinBehavio);function _class(){babelHelpers.classCallCheck(this,_class);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(_class).apply(this,arguments))}babelHelpers.createClass(_class,[{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(_class.prototype),"ready",this).call(this)}},{key:"_dispatch",value:function _dispatch(eventName,detail){this.dispatchEvent(new CustomEvent(eventName,{detail:detail,bubbles:!0,composed:!0}))}/**
       * The user confirms the elimination of the shift
       */},{key:"_confirmDelete",value:function _confirmDelete(){this._openSpinner(!0);this._dispatch("request-delete-branch-appointment",{params:{"digital-appointment-id":this.get("_ticket.id",this)}});this._openSpinner(!1)}/**
       * Show spinner
       * @param {Boolean} open
       * @event open-control-veil
       * @event close-control-veil
       */},{key:"_openSpinner",value:function _openSpinner(open){this._dispatch(open?"open-control-veil":"close-control-veil")}}],[{key:"properties",get:function get(){return{/**
        * Property to save types of operations
        */operations:{type:Array,value:function value(){return[]}},shortFormatDate:{type:String,value:"DD MMMM YYYY"},detailType:{type:String,value:"EDIT"},deleteDateFormat:{type:String,value:"DD MMMM YYYY, HH:mm [h]"},_ticket:{type:Object}}}}]);return _class}(Polymer.mixinBehaviors([CellsBehaviors.AmountBehavior],base)))});</script><dom-module id="glomo-request-branch-appointment-detail-dm-mx" assetpath="glomo-request-branch-appointment-detail-dm/"><template></template><script>/* eslint new-cap: 0 */ /* global moment */ /* global GlomoRequestBranchAppointmentDetailDmMixin */var GlomoRequestBranchAppointmentDetailDmMx=/*#__PURE__*/function(_GlomoRequestBranchAp){babelHelpers.inherits(GlomoRequestBranchAppointmentDetailDmMx,_GlomoRequestBranchAp);function GlomoRequestBranchAppointmentDetailDmMx(){babelHelpers.classCallCheck(this,GlomoRequestBranchAppointmentDetailDmMx);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(GlomoRequestBranchAppointmentDetailDmMx).apply(this,arguments))}babelHelpers.createClass(GlomoRequestBranchAppointmentDetailDmMx,[{key:"mainAppointmentDetail",/**
   * Method to set object data in properties and call object mapping method
   * @param {Object} data
   */value:function mainAppointmentDetail(data){if(!data){return!1}data="NEW"===data.digitalAppointment.operationType?data.digitalAppointment:data;this.detailType=data.operationType||"DETAIL";this._ticket=data.digitalAppointment;this.set("digitalAppointment",data.digitalAppointment);this.dispatchEvent(new CustomEvent("digital-ticket-info-detail",{detail:this._parseAppointmentDetail(data.digitalAppointment)}))}},{key:"_parseAppointmentDetail",value:function _parseAppointmentDetail(ticket){var topInfoClass="spacing",ticketStatus=!ticket.isActive?"inactive":"NEW"===this.detailType?"active":"pending",address=ticket.bank.branch.location?ticket.bank.branch.location.formattedAddress:"",operationType=ticket.operativeType?ticket.operativeType.id:ticket.operationType.id,attentionType=ticket.operativeType?ticket.operativeType.attentionType:ticket.operationType.attentionType;return{id:"1234",mainIcon:{src:"./images/Illustration.svg",info:"Operation Success"},topInfo:[{key:"request-branch-appointment-detail-".concat(ticketStatus,"-title"),value:moment(ticket.lastUpdateDate).format(this.shortFormatDate),class:"bold lg spacing"}],additionalInfo:[{key:"request-branch-appointment-detail-name",value:ticket.customer.fullName,class:topInfoClass},{key:"request-branch-appointment-detail-ticket-number",value:ticket.ticketNumber,class:topInfoClass},{key:"request-branch-appointment-detail-date",value:moment(ticket.appointmentAttentionDate).format(this.deleteDateFormat),class:topInfoClass},{key:"request-branch-appointment-detail-procedure",value:this.t("request-branch-appointment-step-process-operation-"+operationType),class:topInfoClass},{key:"request-branch-appointment-detail-zone",value:this.t("request-branch-appointment-step-process-operation-"+attentionType),class:topInfoClass},{key:"request-branch-appointment-detail-branch-name",value:ticket.bank.branch.name,class:topInfoClass},{key:ticket.bank.branch.location?"request-branch-appointment-detail-address":"",value:address,class:topInfoClass}],message:{type:"info",text:"request-branch-appointment-detail-description",icon:"coronita:info"},operations:this.operations[this.detailType],buttons:{primary:{text:"request-branch-appointment-detail-exit-btn",action:"exit-appointment-detail"},secondary:{hidden:!0}}}}/**
   * Operational selected
   * @param {Object} operative
   */},{key:"operativeSelected",value:function operativeSelected(operative){switch(operative.id){case"route":this._route();break;case"delete":this._deleteModal();break;case"share":this._share();break;}}//= = = = = = = = = = = = = = = = = = = = = =
// SHARE
//= = = = = = = = = = = = = = = = = = = = = =
/**
   * Launch the modal to eliminate the turn
   * @event share-receipt-capture
   */},{key:"_share",value:function _share(){this.dispatchEvent(new CustomEvent("share-receipt-capture",{bubbles:!0,composed:!0,detail:{height:this.totalHeight,share:!0}}))}//= = = = = = = = = = = = = = = = = = = = = =
// DELETE
//= = = = = = = = = = = = = = = = = = = = = =
/**
   * Launch the modal to eliminate the turn
   * @event open-delete-modal
   */},{key:"_deleteModal",value:function _deleteModal(){this._dispatch("send-properties",{icon:"coronita:alert",type:"error",content:"request-branch-appointment-modal-delete-text",secondButtonLabel:"request-branch-appointment-modal-btn-cancel",firstButtonLabel:"request-branch-appointment-modal-btn-delete"});this.dispatchEvent(new CustomEvent("open-modal-info"))}},{key:"deleteSuccessResponse",value:function deleteSuccessResponse(deleteResponse){this.dispatchEvent(new CustomEvent("digital-shift-removed",{bubbles:!0,composed:!0,detail:deleteResponse}));this._openSpinner(!1)}//= = = = = = = = = = = = = = = = = = = = = =
// ROUTE
//= = = = = = = = = = = = = = = = = = = = = =
/**
   * Route to the map
   */},{key:"_route",value:function _route(){this.dispatchEvent(new CustomEvent("digital-shift-route",{bubbles:!0,composed:!0,detail:this._ticket.bank}))}},{key:"_errorModalInfo",value:function _errorModalInfo(type){var acceptBtLabel="retry"===type?"request-branch-appointment-error-accept":"request-branch-appointment-error-cancel",code="retry"===type?"request-branch-retry":"request-branch-exit",cancelBtLabel="retry"===type?"request-branch-appointment-error-cancel":"",errorDelete={code:code,selectedConfig:{className:"error",hideCloseIcon:!1,openMaximized:!0,title:"request-branch-appointment-error-title",heroImage:"./images/Error@1x.svg",acceptBtLabel:acceptBtLabel,cancelBtLabel:cancelBtLabel,template:{type:"paragraphs",values:[{title:"request-branch-appointment-error-message",class:"spacing text-center"},{text:"request-branch-appointment-error-subtext"}]}}},nameEvent="retry"===type?"retry":"exit";this._dispatch("error-".concat(nameEvent),errorDelete)}},{key:"errorOnDelete",value:function errorOnDelete(){this._counterAttempts++;if(3>=this._counterAttempts){this._errorModalInfo("retry")}else{this._errorModalInfo("exit");this.set("_counterAttempts",0)}}}],[{key:"is",get:function get(){return"glomo-request-branch-appointment-detail-dm-mx"}},{key:"properties",get:function get(){return{/**
      * @desc total height
      * @type {String}
      */totalHeight:{type:String,value:"1350"},_counterAttempts:{type:Number,value:0}}}}]);return GlomoRequestBranchAppointmentDetailDmMx}(GlomoRequestBranchAppointmentDetailDmMixin.mixin(Polymer.mixinBehaviors([CellsBehaviors.CellsGlomoUtilsBehavior,CellsBehaviors.i18nBehavior],Polymer.Element)));customElements.define(GlomoRequestBranchAppointmentDetailDmMx.is,GlomoRequestBranchAppointmentDetailDmMx);</script></dom-module></div></body></html>